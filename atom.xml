<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MiraitowağŸ¥‘</title>
  
  
  <link href="https://www.cameliia.top/atom.xml" rel="self"/>
  
  <link href="https://www.cameliia.top/"/>
  <updated>2024-01-02T08:00:00.000Z</updated>
  <id>https://www.cameliia.top/</id>
  
  <author>
    <name>MiraitowağŸ¥‘</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Egg(äºŒ)_Eggé¡¹ç›®é…ç½®è·¯ç”±ï¼Œå†™æ¥å£æ•°æ®</title>
    <link href="https://www.cameliia.top/posts/601.html"/>
    <id>https://www.cameliia.top/posts/601.html</id>
    <published>2024-01-02T08:00:00.000Z</published>
    <updated>2024-01-02T08:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /># å‰è¨€<p><strong>ç»™Eggé¡¹ç›®ä¸­é…ç½®è·¯ç”±ï¼Œå¹¶å†™å…¥æ¥å£ï¼Œæä¾›æ•°æ®ã€‚</strong></p><p><strong>å®ç°æ•ˆæœï¼š</strong></p><p><img src="https://img-blog.csdnimg.cn/direct/adb8588be5f44ae6a65b1993121c7077.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="ä¸€ã€åˆ›å»ºæ§åˆ¶å™¨-controller-home-js">ä¸€ã€åˆ›å»ºæ§åˆ¶å™¨    controller/home.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// controller/home.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Controller</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;egg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HomeController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Controller</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">index</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    ctx.<span class="property">body</span> = <span class="string">&#x27;hi, egg&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">async</span> <span class="title function_">list</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">  ctx.<span class="property">body</span>=(&#123;</span><br><span class="line">      <span class="attr">code</span>:<span class="number">200</span>,</span><br><span class="line">      <span class="attr">masg</span>:<span class="string">&#x27;æŸ¥è¯¢æˆåŠŸ&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>:[</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;æå››&#x27;</span>,<span class="attr">age</span>:<span class="number">19</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">HomeController</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äºŒã€ç¼–å†™è·¯ç”±">äºŒã€ç¼–å†™è·¯ç”±</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Egg.Application</span>&#125; <span class="variable">app</span> - egg application</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; router, controller &#125; = app;</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, controller.<span class="property">home</span>.<span class="property">index</span>);</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&#x27;/list&#x27;</span>, controller.<span class="property">home</span>.<span class="property">list</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€é¡µé¢ä¸Šè¾“å…¥ï¼šhttp-localhost-7001-list">ä¸‰ã€é¡µé¢ä¸Šè¾“å…¥ï¼š<a href="http://localhost:7001/list">http://localhost:7001/list</a></h2><p><img src="https://img-blog.csdnimg.cn/direct/187ec0cee14b42a996648bf9baeb7ecd.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>]]></content>
    
    
    <summary type="html">ğŸ æœ¬æ–‡æ±‡æ€»Eggé¡¹ç›®é…ç½®è·¯ç”±ï¼Œå†™æ¥å£æ•°æ® ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="node" scheme="https://www.cameliia.top/categories/node/"/>
    
    
    <category term="Egg" scheme="https://www.cameliia.top/tags/Egg/"/>
    
  </entry>
  
  <entry>
    <title>Egg(å››)_Eggä½¿ç”¨MySqlæ•°æ®åº“</title>
    <link href="https://www.cameliia.top/posts/603.html"/>
    <id>https://www.cameliia.top/posts/603.html</id>
    <published>2024-01-02T08:00:00.000Z</published>
    <updated>2024-01-02T08:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h1>å‰è¨€</h1><p><strong>Eggä¸­é…åˆä½¿ç”¨mysqlæ¥å®ç°æ•°æ®çš„è·å–å’Œå†™å…¥ï¼Œå¹¶é€šè¿‡Eggå®šä¹‰çš„æ–¹å¼å‘é€åˆ°æ¥å£é‡Œé¢ã€‚</strong></p><h2 id="ä¸€ã€é¡¹ç›®ä¸­å®‰è£…mysql">ä¸€ã€é¡¹ç›®ä¸­å®‰è£…mysql</h2><h3 id="1ã€å®‰è£…egg-mysqlæ’ä»¶">1ã€å®‰è£…egg-mysqlæ’ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save egg-mysql</span><br></pre></td></tr></table></figure><h3 id="2ã€é…ç½®æ’ä»¶ï¼šæ‰“å¼€config-plugin-js">2ã€é…ç½®æ’ä»¶ï¼šæ‰“å¼€config/plugin.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mysqlé…ç½®</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mysql</span>: &#123;</span><br><span class="line">    <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">package</span>: <span class="string">&#x27;egg-mysql&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="3ã€é…ç½®æ’ä»¶ï¼šæ‰“å¼€config-config-default-js">3ã€é…ç½®æ’ä»¶ï¼šæ‰“å¼€config/config.default.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">mysql</span> = &#123;</span><br><span class="line">  <span class="comment">// å•æ•°æ®åº“ä¿¡æ¯é…ç½®</span></span><br><span class="line">  <span class="attr">client</span>: &#123;</span><br><span class="line">     <span class="comment">// host</span></span><br><span class="line">     <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">     <span class="comment">// ç«¯å£å·</span></span><br><span class="line">     <span class="attr">port</span>: <span class="string">&#x27;3306&#x27;</span>,</span><br><span class="line">     <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">     <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">     <span class="comment">// å¯†ç </span></span><br><span class="line">     <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">     <span class="comment">// æ•°æ®åº“å</span></span><br><span class="line">     <span class="attr">database</span>: <span class="string">&#x27;egg&#x27;</span>,</span><br><span class="line"> &#125;,</span><br><span class="line">  <span class="comment">// æ˜¯å¦åŠ è½½åˆ° app ä¸Šï¼Œé»˜è®¤å¼€å¯</span></span><br><span class="line">  <span class="attr">app</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// æ˜¯å¦åŠ è½½åˆ° agent ä¸Šï¼Œé»˜è®¤å…³é—­</span></span><br><span class="line">  <span class="attr">agent</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€Egg-js-æ“ä½œ-MySql-æ•°æ®åº“">äºŒã€Egg.js æ“ä½œ MySql æ•°æ®åº“</h2><h3 id="1ã€æ–°å»ºä¸€ä¸ªstuæ•°æ®åº“è¡¨">1ã€æ–°å»ºä¸€ä¸ªstuæ•°æ®åº“è¡¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `stu` (  </span><br><span class="line"> `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, </span><br><span class="line"> `name` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   </span><br><span class="line"> `age` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  </span><br><span class="line"> <span class="keyword">PRIMARY</span> KEY (`id`) </span><br><span class="line">) ENGINE<span class="operator">=</span>MyISAM <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure><h3 id="2ã€æ·»åŠ è·¯ç”±-router-js">2ã€æ·»åŠ è·¯ç”±  router.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/getStu&#x27;</span>, controller.<span class="property">stu</span>.<span class="property">getStu</span>);</span><br><span class="line"> router.<span class="title function_">post</span>(<span class="string">&#x27;/addStu&#x27;</span>, controller.<span class="property">stu</span>.<span class="property">addStu</span>);</span><br><span class="line"> router.<span class="title function_">post</span>(<span class="string">&#x27;/updateStu&#x27;</span>, controller.<span class="property">stu</span>.<span class="property">updateStu</span>);</span><br><span class="line"> router.<span class="title function_">post</span>(<span class="string">&#x27;/delStu&#x27;</span>, controller.<span class="property">stu</span>.<span class="property">delStu</span>);</span><br></pre></td></tr></table></figure><h3 id="3ã€æ·»åŠ å­¦ç”Ÿä¿¡æ¯">3ã€æ·»åŠ å­¦ç”Ÿä¿¡æ¯</h3><p>1ã€æ‰“å¼€controller ä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"> <span class="keyword">async</span> <span class="title function_">addStu</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">     <span class="keyword">const</span> &#123; name, age &#125; = ctx.<span class="property">request</span>.<span class="property">body</span>;</span><br><span class="line">     <span class="keyword">const</span> result = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">stu</span>.<span class="title function_">addStu</span>(name, age);</span><br><span class="line">     <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        ctx.<span class="property">body</span> = &#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">          <span class="attr">msg</span>: <span class="string">&#x27;æ·»åŠ æˆåŠŸ&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ctx.<span class="property">body</span> = &#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="number">201</span>,</span><br><span class="line">          <span class="attr">msg</span>: <span class="string">&#x27;æ·»åŠ å¤±è´¥&#x27;</span>,</span><br><span class="line">          <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>2ã€æ‰“å¼€serviceä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ·»åŠ å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">name</span> -åç§°</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">age</span> -å¹´é¾„</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> &#123;<span class="type">Object</span>&#125; å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">addStu</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> params = &#123;</span><br><span class="line">       name,</span><br><span class="line">       age,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">mysql</span>.<span class="title function_">insert</span>(<span class="string">&#x27;stu&#x27;</span>, params);</span><br><span class="line">    <span class="keyword">const</span> insertSuccess = result.<span class="property">affectedRows</span> === <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (insertSuccess) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨æ¥å£å¦‚ä¸‹å›¾</strong><br><img src="https://img-blog.csdnimg.cn/direct/f24f8aaf91394ae98dd72c95b2058d65.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>Â·æˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®åº“çš„è¡¨ä¸­æŸ¥çœ‹åˆ°<br><img src="https://img-blog.csdnimg.cn/direct/8d6d2fd5c11447e7b07bc70dbee5e71b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="4ã€æ ¹æ®IDæŸ¥å¯»å­¦ç”Ÿä¿¡æ¯">4ã€æ ¹æ®IDæŸ¥å¯»å­¦ç”Ÿä¿¡æ¯</h3><p>1ã€æ‰“å¼€controller ä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getStu</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">   <span class="keyword">const</span> &#123; id &#125; = ctx.<span class="property">query</span>;</span><br><span class="line">   <span class="keyword">const</span> result = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">stu</span>.<span class="title function_">getStu</span>(id);</span><br><span class="line">   ctx.<span class="property">body</span> = &#123;</span><br><span class="line">     <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">     <span class="attr">msg</span>: <span class="string">&#x27;æŸ¥è¯¢æˆåŠŸ&#x27;</span>,</span><br><span class="line">     <span class="attr">data</span>: result,</span><br><span class="line">   &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€æ‰“å¼€serviceä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">id</span> -å­¦ç”ŸID</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> &#123;<span class="type">Object</span>&#125; å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> <span class="keyword">async</span> <span class="title function_">getStu</span>(<span class="params">id</span>) &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">     <span class="keyword">const</span> params = &#123;</span><br><span class="line">        id</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">mysql</span>.<span class="title function_">get</span>(<span class="string">&#x27;stu&#x27;</span>, params);</span><br><span class="line">     <span class="keyword">return</span> result;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨æ¥å£å¦‚ä¸‹å›¾</strong><br><img src="https://img-blog.csdnimg.cn/direct/48b5a0630c324803a9858a094776d5ed.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="5ã€æ ¹æ®IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯">5ã€æ ¹æ®IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯</h3><p>1ã€æ‰“å¼€controller ä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"> <span class="keyword">async</span> <span class="title function_">updateStu</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">   <span class="keyword">const</span> params = ctx.<span class="property">request</span>.<span class="property">body</span>;</span><br><span class="line">   <span class="keyword">const</span> result = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">stu</span>.<span class="title function_">updateStu</span>(params);</span><br><span class="line">   <span class="keyword">if</span> (result) &#123;</span><br><span class="line">       ctx.<span class="property">body</span> = &#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;æ›´æ–°æˆåŠŸ&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: result,</span><br><span class="line">       &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       ctx.<span class="property">body</span> = &#123;</span><br><span class="line">         <span class="attr">status</span>: <span class="number">201</span>,</span><br><span class="line">         <span class="attr">msg</span>: <span class="string">&#x27;æ›´æ–°å¤±è´¥&#x27;</span>,</span><br><span class="line">         <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>2ã€æ‰“å¼€serviceä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ›´æ–°å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; params å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> &#123;<span class="type">Object</span>&#125; å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> <span class="keyword">async</span> <span class="title function_">updateStu</span>(<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">     <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">mysql</span>.<span class="title function_">update</span>(<span class="string">&#x27;stu&#x27;</span>, params); </span><br><span class="line">     <span class="keyword">const</span> updateSuccess = result.<span class="property">affectedRows</span> === <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">if</span> (updateSuccess) &#123;</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">     &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨æ¥å£å¦‚ä¸‹å›¾</strong><br><img src="https://img-blog.csdnimg.cn/direct/8c02efe0cfb7417a95f3a4d5604e58aa.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®åº“çš„è¡¨çœ‹åˆ°æ•°æ®å·²ç»æ›´æ–°å•¦<br><img src="https://img-blog.csdnimg.cn/direct/cbba90d3502749caa1328adeb805bc71.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="6ã€æ ¹æ®IDåˆ é™¤å­¦ç”Ÿä¿¡æ¯">6ã€æ ¹æ®IDåˆ é™¤å­¦ç”Ÿä¿¡æ¯</h3><p>1ã€æ‰“å¼€controller ä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">delStu</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">   <span class="keyword">const</span> &#123; id &#125; = ctx.<span class="property">request</span>.<span class="property">body</span>;</span><br><span class="line">   <span class="keyword">const</span> result = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">stu</span>.<span class="title function_">delStu</span>(id);</span><br><span class="line">   <span class="keyword">if</span> (result) &#123;</span><br><span class="line">      ctx.<span class="property">body</span> = &#123;</span><br><span class="line">         <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">         <span class="attr">msg</span>: <span class="string">&#x27;åˆ é™¤æˆåŠŸ&#x27;</span>,</span><br><span class="line">         <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">     &#125;;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ctx.<span class="property">body</span> = &#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="number">201</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;åˆ é™¤å¤±è´¥&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">     &#125;;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>2ã€æ‰“å¼€serviceä¸­çš„stu.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * åˆ é™¤å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; id  å­¦ç”ŸID</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> &#123;<span class="type">Object</span>&#125; å¯¹è±¡</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> <span class="keyword">async</span> <span class="title function_">delStu</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">app</span>.<span class="property">mysql</span>.<span class="title function_">delete</span>(<span class="string">&#x27;stu&#x27;</span>, &#123;</span><br><span class="line">          id,</span><br><span class="line">        &#125;);</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><strong>è°ƒç”¨æ¥å£å¦‚ä¸‹å›¾</strong><br><img src="https://img-blog.csdnimg.cn/direct/d68034cb244d4ea0b09fd6a24e41d293.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>]]></content>
    
    
    <summary type="html">ğŸ æœ¬æ–‡æ±‡æ€»Eggä½¿ç”¨MySqlæ•°æ®åº“ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="node" scheme="https://www.cameliia.top/categories/node/"/>
    
    
    <category term="Egg" scheme="https://www.cameliia.top/tags/Egg/"/>
    
  </entry>
  
  <entry>
    <title>Egg(äº”)_Egg+Mysqlå®ç°å›¾ç‰‡ä¸Šä¼ </title>
    <link href="https://www.cameliia.top/posts/604.html"/>
    <id>https://www.cameliia.top/posts/604.html</id>
    <published>2024-01-02T08:00:00.000Z</published>
    <updated>2024-01-02T08:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /># å‰è¨€<p><strong>Eggå®ç°å›¾ç‰‡ä¸Šä¼ </strong></p><blockquote><ol><li>é¦–å…ˆå‰ç«¯è°ƒç”¨ä¸Šä¼ æ¥å£ï¼Œå°†ä¸Šä¼ çš„èµ„æºç»è¿‡ FormData å®ä¾‹å°è£…ä¹‹åï¼Œä¼ ç»™æœåŠ¡ç«¯</li><li>åœ¨æœåŠ¡ç«¯æ¥æ”¶å‰ç«¯ä¼ è¿›æ¥çš„å›¾ç‰‡ä¿¡æ¯ï¼Œé€šè¿‡ fs.readFileSync æ–¹æ³•ï¼Œæ¥è¯»å–å›¾ç‰‡å†…å®¹ï¼Œå¹¶å­˜æ”¾åœ¨å˜é‡ä¸­</li><li>æ‰¾ä¸ªå­˜æ”¾å›¾ç‰‡çš„å…¬å…±ä½ç½®</li><li>é€šè¿‡ fs.writeFileSync æ–¹æ³•ï¼Œå°†å›¾ç‰‡å†…å®¹å†™å…¥å…¬å…±ä½ç½®</li><li>æœ€åè¿”å›å›¾ç‰‡åœ°å€ä¸Šä¼ åˆ°æ•°æ®åº“</li></ol></blockquote><hr><h2 id="ä¸€ã€æ•°æ®åº“å»ºè¡¨">ä¸€ã€æ•°æ®åº“å»ºè¡¨</h2><h3 id="1-æ•°æ®åº“å»ºè¡¨ï¼Œè¡¨ç»“æ„ä¸º">1.æ•°æ®åº“å»ºè¡¨ï¼Œè¡¨ç»“æ„ä¸º</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `img` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `imgurl` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_unicode_ci <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å›¾ç‰‡url&#x27;</span>,</span><br><span class="line">  `filename` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_unicode_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å›¾ç‰‡åç§°&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>MyISAM AUTO_INCREMENT<span class="operator">=</span><span class="number">210</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_unicode_ci;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/direct/00cad9c7e04a45b29067c72d95843bc5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="äºŒã€eggå®ç°å›¾ç‰‡ä¸Šä¼ ">äºŒã€eggå®ç°å›¾ç‰‡ä¸Šä¼ </h2><h3 id="1-å®‰è£…ä¾èµ–">1.å®‰è£…ä¾èµ–</h3><p><code>mkdirp</code> æ˜¯ä¸€æ¬¾åœ¨ node.js ä¸­åƒ mkdir -p ä¸€æ ·é€’å½’åˆ›å»ºç›®å½•åŠå…¶å­ç›®å½•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g mkdirp</span><br></pre></td></tr></table></figure><p><code>Moment.js</code> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript æ—¶é—´åº“ï¼Œå®ƒæ–¹ä¾¿äº†æ—¥å¸¸å¼€å‘ä¸­å¯¹æ—¶é—´çš„æ“ä½œï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install moment</span><br></pre></td></tr></table></figure><h3 id="2-æ‰“å¼€-config-config-defalut-js">2.æ‰“å¼€ config -&gt; config.defalut.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆå¼•å…¥path</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//æ–‡ä»¶å­˜æ”¾è·¯å¾„å’Œæ–‡ä»¶ç™½åå•</span></span><br><span class="line">  config.<span class="property">uploadDir</span> = <span class="string">&#x27;app/public/upload&#x27;</span></span><br><span class="line">  config.<span class="property">multipart</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;file&#x27;</span>,</span><br><span class="line">    <span class="attr">fileSize</span>: <span class="number">1048576000</span>,</span><br><span class="line">    <span class="attr">whitelist</span>: [ <span class="string">&#x27;.txt&#x27;</span>, <span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;.jpg&#x27;</span> ],</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="comment">// æ–‡ä»¶é™æ€è·¯å¾„</span></span><br><span class="line">config.<span class="property">static</span> = &#123;</span><br><span class="line">    <span class="attr">prefix</span>: <span class="string">&#x27;/app/public&#x27;</span>, <span class="comment">//è®¿é—®å‰ç¼€</span></span><br><span class="line">    <span class="attr">dir</span>: path.<span class="title function_">join</span>(appInfo.<span class="property">baseDir</span>, <span class="string">&#x27;app/public&#x27;</span>), </span><br><span class="line">    <span class="attr">dynamic</span>: <span class="literal">true</span>, </span><br><span class="line">    <span class="attr">preload</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">31536000</span>, </span><br><span class="line">    <span class="attr">buffer</span>: <span class="literal">true</span>, </span><br><span class="line"> &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-æ–°å»ºcontroller-upload-js">3.æ–°å»ºcontroller -&gt; upload.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> mkdirp = <span class="built_in">require</span>(<span class="string">&#x27;mkdirp&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">// const api = require(&#x27;../utils/utils&#x27;).api;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Controller</span> = <span class="built_in">require</span>(<span class="string">&#x27;egg&#x27;</span>).<span class="property">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UploadController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Controller</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">upload</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="comment">// éœ€è¦å‰å¾€ config/config.default.js è®¾ç½® config.multipart çš„ mode å±æ€§ä¸º file</span></span><br><span class="line">    <span class="keyword">const</span> file = ctx.<span class="property">request</span>.<span class="property">files</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">// å£°æ˜å­˜æ”¾èµ„æºçš„è·¯å¾„</span></span><br><span class="line">    <span class="keyword">let</span> uploadDir = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> id = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> api = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// ctx.request.files[0] è¡¨ç¤ºè·å–ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œè‹¥å‰ç«¯ä¸Šä¼ å¤šä¸ªæ–‡ä»¶åˆ™å¯ä»¥éå†è¿™ä¸ªæ•°ç»„å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">const</span> f = fs.<span class="title function_">readFileSync</span>(file.<span class="property">filepath</span>);</span><br><span class="line">      <span class="comment">// 1.è·å–å½“å‰æ—¥æœŸ</span></span><br><span class="line">      <span class="keyword">const</span> day = <span class="title function_">moment</span>(<span class="keyword">new</span> <span class="title class_">Date</span>()).<span class="title function_">format</span>(<span class="string">&#x27;YYYYMMDD&#x27;</span>);</span><br><span class="line">      <span class="comment">// 2.åˆ›å»ºå›¾ç‰‡ä¿å­˜çš„è·¯å¾„</span></span><br><span class="line">      <span class="keyword">const</span> dir = path.<span class="title function_">join</span>(<span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">uploadDir</span>, day);</span><br><span class="line">      <span class="keyword">const</span> date = <span class="title class_">Date</span>.<span class="title function_">now</span>(); <span class="comment">// æ¯«ç§’æ•°</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">mkdirp</span>(dir); <span class="comment">// ä¸å­˜åœ¨å°±åˆ›å»ºç›®å½•</span></span><br><span class="line">      <span class="comment">// è¿”å›å›¾ç‰‡ä¿å­˜çš„è·¯å¾„</span></span><br><span class="line">      uploadDir = path.<span class="title function_">join</span>(dir, date + path.<span class="title function_">extname</span>(file.<span class="property">filename</span>));</span><br><span class="line">       api=<span class="string">&quot;http://localhost:7001/&quot;</span></span><br><span class="line">      <span class="comment">// decodeURIæ˜¯ä¸ºäº†ä¸­æ–‡ä¹±ç </span></span><br><span class="line">      id = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">upload</span>.<span class="title function_">add</span>(&#123; <span class="attr">img_url</span>: api + uploadDir, <span class="attr">filename</span>: file.<span class="property">filename</span> &#125;);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>( id);</span><br><span class="line">      <span class="comment">// å†™å…¥æ–‡ä»¶å¤¹</span></span><br><span class="line">      fs.<span class="title function_">writeFileSync</span>(uploadDir, f);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error&#x27;</span>, e);</span><br><span class="line">      <span class="comment">// æ¸…é™¤ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">      ctx.<span class="title function_">cleanupRequestFiles</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ctx.<span class="property">body</span> = &#123;</span><br><span class="line">      <span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&#x27;ä¸Šä¼ æˆåŠŸ&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>: api + uploadDir,</span><br><span class="line">      id,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">UploadController</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-æ–°å»º-service-upload-js">4.æ–°å»º service -&gt; upload.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Service</span> = <span class="built_in">require</span>(<span class="string">&#x27;egg&#x27;</span>).<span class="property">Service</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UploadService</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Service</span> &#123;</span><br><span class="line">  <span class="comment">// è·å–å›¾ç‰‡</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">query</span>(<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; app &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> app.<span class="property">mysql</span>.<span class="title function_">get</span>(<span class="string">&#x27;img&#x27;</span>, params);</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¢åŠ å›¾ç‰‡</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">add</span>(<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; app &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> app.<span class="property">mysql</span>.<span class="title function_">insert</span>(<span class="string">&#x27;img&#x27;</span>, params);</span><br><span class="line">      <span class="keyword">return</span> result.<span class="property">insertId</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">UploadService</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-æœ€ååœ¨-router-js-ä¸­åŠ å…¥">5.æœ€ååœ¨ router.js ä¸­åŠ å…¥</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/api/upload/upload&#x27;</span>,controller.<span class="property">upload</span>.<span class="property">upload</span>; <span class="comment">// ä¸Šä¼ å›¾ç‰‡</span></span><br></pre></td></tr></table></figure><h3 id="6-å‘é€æ¥å£è¯·æ±‚æ•°æ®">6.å‘é€æ¥å£è¯·æ±‚æ•°æ®</h3><p><img src="https://img-blog.csdnimg.cn/direct/6e4c767068f94404ad83c5e63b9594b2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">æ•°æ®åº“æ’å…¥ä¸€æ¡æ•°æ®</p><p><img src="https://img-blog.csdnimg.cn/direct/e681bf2b6f7646228f914babdd5ea8ea.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æœ¬åœ°æŸ¥çœ‹å›¾ç‰‡<br><img src="https://img-blog.csdnimg.cn/direct/98016aa675da402f97962c0b74047ea9.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><blockquote><p>åœ¨ä½¿ç”¨eggçš„ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½çš„æ—¶å€™å‡ºç°çš„è¿™ä¸ªæŠ¥é”™ï¼š<code>Cannot read properties of undefined (reading â€˜0â€˜)</code>  è¯·æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://blog.csdn.net/m0_58352785/article/details/135271321?spm=1001.2014.3001.5501">ä¼ é€å£</a></p></blockquote>]]></content>
    
    
    <summary type="html">ğŸ æœ¬æ–‡æ±‡æ€»Egg+Mysqlå®ç°å›¾ç‰‡ä¸Šä¼ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="node" scheme="https://www.cameliia.top/categories/node/"/>
    
    
    <category term="Egg" scheme="https://www.cameliia.top/tags/Egg/"/>
    
  </entry>
  
  <entry>
    <title>Egg(å…­)_å®ç°åˆ—è¡¨çš„æ¨¡ç³ŠæŸ¥è¯¢</title>
    <link href="https://www.cameliia.top/posts/605.html"/>
    <id>https://www.cameliia.top/posts/605.html</id>
    <published>2024-01-02T08:00:00.000Z</published>
    <updated>2024-01-02T08:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h1>å‰è¨€</h1><p><strong>åˆ—è¡¨æ•°æ®ç³»åˆ—å¢åˆ æ”¹æŸ¥çš„æŸ¥è¯¢å®ç°</strong></p><h2 id="ä¸€ã€å®ç°æ­¥éª¤ï¼š">ä¸€ã€å®ç°æ­¥éª¤ï¼š</h2><h3 id="1ã€è·¯ç”±é…ç½®ï¼š">1ã€è·¯ç”±é…ç½®ï¼š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * è·¯ç”±é…ç½®</span><br><span class="line"> * @param app</span><br><span class="line"> */</span><br><span class="line">module.exports = app =&gt; &#123;</span><br><span class="line">   const &#123; router, controller &#125; = app;</span><br><span class="line">    //ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">    router.get(<span class="string">&#x27;/getUser, controller.user.getUser);</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2ã€controller-user-js-ä¸­-å†™å…¥æŸ¥è¯¢æ–¹æ³•-getUser">2ã€controller  / user.js`ä¸­ å†™å…¥æŸ¥è¯¢æ–¹æ³•  getUser</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  ç”¨æˆ·ä¿¡æ¯è·¯ç”±</span><br><span class="line"> * @param app</span><br><span class="line"> * @returns &#123;HomeController&#125;</span><br><span class="line"> */</span><br><span class="line">const Controller = require(<span class="string">&#x27;egg&#x27;</span>).Controller;</span><br><span class="line">class UserController extends Controller &#123;</span><br><span class="line">   async <span class="function"><span class="title">getUser</span></span>() &#123;</span><br><span class="line">    //æŸ¥è¯¢åº“é‡Œçš„userè¡¨</span><br><span class="line">    <span class="built_in">let</span> params = this.ctx.query //è·å–è·¯å¾„åé¢çš„å‚æ•°</span><br><span class="line">    console.log(<span class="string">&#x27;ç”¨æˆ·çš„å‚æ•°ï¼š&#x27;</span>);</span><br><span class="line">    console.log(params);</span><br><span class="line">    <span class="built_in">let</span> sql = <span class="string">&#x27;select * from user&#x27;</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">let</span> content = [];//å‚æ•°</span><br><span class="line">    <span class="built_in">let</span> isMore = <span class="literal">false</span>;//æ˜¯å¦æœ‰å¤šä¸ªæŸ¥è¯¢å‚æ•°</span><br><span class="line">    /**</span><br><span class="line">     * @æ¨¡ç³ŠæŸ¥è¯¢-é‡å¤§çš„æ—¶å€™æ•ˆç‡ä½</span><br><span class="line">     * <span class="keyword">select</span> * from user <span class="built_in">where</span> name like ? % å†…å®¹ %</span><br><span class="line">     * åœ¨userè¡¨ä¸­å…¨å±€æŸ¥æ‰¾nameå€¼ == å†…å®¹çš„</span><br><span class="line">     * % å†…å®¹ % å…¨å±€æŸ¥æ‰¾å†…å®¹</span><br><span class="line">     *   å†…å®¹ %  æŸ¥æ‰¾ä»¥ å†…å®¹ å¼€å¤´çš„æ•°æ®</span><br><span class="line">     * */</span><br><span class="line">    <span class="keyword">if</span>(params.name)&#123;</span><br><span class="line">      sql += <span class="string">&quot; where name like ?&quot;</span>;</span><br><span class="line">      content.push( <span class="string">&quot;%&quot;</span>+params.name+<span class="string">&quot;%&quot;</span> );</span><br><span class="line">      isMore = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(params.phone)&#123;</span><br><span class="line">      <span class="keyword">if</span>(isMore)&#123;//trueä»£è¡¨æœ‰å¤šä¸ªå‚æ•°</span><br><span class="line">        sql += <span class="string">&quot;and phone LIKE ?&quot;</span>;//andæ˜¯ä¸¤ä¸ªæ¡ä»¶éƒ½å¿…é¡»æ»¡è¶³ï¼Œoræ˜¯æˆ–çš„å…³ç³»</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        sql += <span class="string">&quot; WHERE phone LIKE ?&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      content.push( <span class="string">&quot;%&quot;</span>+params.phone+<span class="string">&quot;%&quot;</span> )</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    //å¼€å¯åˆ†é¡µ</span><br><span class="line">    <span class="keyword">if</span>(params.page || params.pageSize)&#123;</span><br><span class="line">      <span class="built_in">let</span> current = params.page;//å½“å‰é¡µç </span><br><span class="line">      <span class="built_in">let</span> pageSize = params.pageSize;//ä¸€é¡µå±•ç¤ºå¤šå°‘æ¡æ•°æ®</span><br><span class="line">      sql += <span class="string">&quot; limit ?,?&quot;</span>;</span><br><span class="line">      content.push((current-<span class="number">1</span>)*pageSize,parseInt(pageSize));</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="built_in">let</span> userList= await this.app.mysql.query(</span><br><span class="line">      sql,content</span><br><span class="line">    );</span><br><span class="line">    this.ctx.body = &#123;</span><br><span class="line">      code:200,</span><br><span class="line">      masg:<span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">      data:userList</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">module.exports = UserController;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€æ¥å£å¦‚å›¾æ‰€ç¤º">äºŒã€æ¥å£å¦‚å›¾æ‰€ç¤º</h2><h3 id="1ã€é¡µé¢è¾“å…¥ï¼šhttp-127-0-0-1-7001-getUser-page-1-pageSize-4">1ã€é¡µé¢è¾“å…¥ï¼š<a href="http://127.0.0.1:7001/getUser?page=1&amp;pageSize=4">http://127.0.0.1:7001/getUser?page=1&amp;pageSize=4</a></h3><p><img src="https://img-blog.csdnimg.cn/direct/04577c907b86471e896836e450d40020.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="2ã€é¡µé¢è¾“å…¥ï¼šhttp-127-0-0-1-7001-getUser-name-å¼ ä¸‰">2ã€é¡µé¢è¾“å…¥ï¼š<a href="http://127.0.0.1:7001/getUser?name=%E5%BC%A0%E4%B8%89">http://127.0.0.1:7001/getUser?name=å¼ ä¸‰</a></h3><p><img src="https://img-blog.csdnimg.cn/direct/a1cfde5c8e4f440090b7bbfbe2ef1b48.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="3ã€é¡µé¢è¾“å…¥ï¼šhttp-127-0-0-1-7001-getUser">3ã€é¡µé¢è¾“å…¥ï¼š<a href="http://127.0.0.1:7001/getUser">http://127.0.0.1:7001/getUser</a></h3><p><img src="https://img-blog.csdnimg.cn/direct/290c35d1784043b0a37703493f8a1372.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>]]></content>
    
    
    <summary type="html">ğŸ æœ¬æ–‡æ±‡æ€»Eggå®ç°åˆ—è¡¨çš„æ¨¡ç³ŠæŸ¥è¯¢ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="node" scheme="https://www.cameliia.top/categories/node/"/>
    
    
    <category term="Egg" scheme="https://www.cameliia.top/tags/Egg/"/>
    
  </entry>
  
  <entry>
    <title>Egg(ä¸€)_åˆ›å»ºä¸€ä¸ªEggé¡¹ç›®</title>
    <link href="https://www.cameliia.top/posts/600.html"/>
    <id>https://www.cameliia.top/posts/600.html</id>
    <published>2024-01-02T08:00:00.000Z</published>
    <updated>2024-01-02T08:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h1>Egg æ¡†æ¶</h1><blockquote><p>Egg.jsï¼Œä¸ºä¼ä¸šçº§æ¡†æ¶å’Œåº”ç”¨è€Œç”Ÿï¼Œæ˜¯é˜¿é‡Œå¼€æºçš„ä¼ä¸šçº§ Node.js æ¡†æ¶ã€‚</p></blockquote><h3 id="å®˜ç½‘å…¥å£ï¼šç‚¹æˆ‘">å®˜ç½‘å…¥å£ï¼š<a href="https://www.eggjs.org/zh-CN/intro/quickstart">ç‚¹æˆ‘</a></h3><h2 id="ä¸€ã€Eggä¸å…¶ä»–æ¡†æ¶çš„å¯¹æ¯”ï¼š">ä¸€ã€Eggä¸å…¶ä»–æ¡†æ¶çš„å¯¹æ¯”ï¼š</h2><p>ä¸koaçš„å¯¹æ¯”ï¼š</p><p>Koa ç”± Express å¹•åçš„åŸç­äººé©¬æ‰“é€ ï¼Œè®¾è®¡åˆè¡·æ˜¯æŠ›æ‰expressä¸­ä¸åˆæ—¶å®œçš„å›è°ƒä»¥åŠå¼•å…¥æ›´åŠ å¼ºå¤§çš„async/awaitæœºåˆ¶å’Œæ’ä»¶ã€ä¸­é—´ä»¶æœºåˆ¶ï¼Œç›®çš„æ˜¯ç”¨æ›´å°çš„ä½“ç§¯å’Œæ›´ä¼˜é›…çš„è¯­æ³•äº§ç”Ÿæ›´å¿«é€Ÿçš„webæœåŠ¡ç«¯ã€‚ ä½†å¯¹äºé¢å‘ä¼ä¸šçº§çš„åº”ç”¨æ¡†æ¶æ¥è¯´ï¼Œè¿™è¿˜è¿œè¿œä¸å¤Ÿï¼Œå¤šäººåä½œçš„å¼€å‘æ¨¡å¼åº”ä»¥çº¦å®šå¤§äºé…ç½®çš„å½¢å¼æ¥ç¡®ä¿å¼€å‘è¿‡ç¨‹ä¸­äº§ç”Ÿæ›´å°çš„æ²Ÿé€šæˆæœ¬ï¼Œæ›´é«˜æ•ˆçš„ç¼–ç æ•ˆç‡ã€‚è€Œè¿™ä¹Ÿæ˜¯eggæœ€æ ¸å¿ƒçš„ä¸œè¥¿ã€‚</p><p>eggå¸¦æœ‰ä¸€å¥—è‡ªèº«çš„çº¦å®šå’Œè§„èŒƒï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œç”¨eggäº§ç”Ÿçš„å·¥ç¨‹ç›®å½•ã€‚<br><img src="https://img-blog.csdnimg.cn/direct/876752dc2e7644f1a46a202df337f9f2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="äºŒã€å¦‚ä½•æ„å»ºä¸€ä¸ªEggå·¥ç¨‹">äºŒã€å¦‚ä½•æ„å»ºä¸€ä¸ªEggå·¥ç¨‹</h2><h3 id="1ã€å®‰è£…nodeç¯å¢ƒ">1ã€å®‰è£…nodeç¯å¢ƒ</h3><p>è¿è¡Œç¯å¢ƒï¼šå»ºè®®é€‰æ‹© LTS ç‰ˆæœ¬ï¼Œæœ€ä½è¦æ±‚ 8.xã€‚</p><h3 id="2ã€åˆ›å»ºæ–‡ä»¶å¤¹">2ã€åˆ›å»ºæ–‡ä»¶å¤¹</h3><p>å¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> egg-<span class="built_in">example</span> &amp;&amp; cd egg-<span class="built_in">example</span></span><br></pre></td></tr></table></figure><h3 id="3ã€åˆå§‹åŒ–Eggå·¥ç¨‹">3ã€åˆå§‹åŒ–Eggå·¥ç¨‹</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init egg <span class="attribute">--type</span>=simple</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/direct/b1996e8c1aaa45d8bbeaabc3c6de27e1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://img-blog.csdnimg.cn/direct/9839f4cd7c164e849c3ebcad1403eafd.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="4ã€æ‰§è¡Œä¾èµ–å®‰è£…">4ã€æ‰§è¡Œä¾èµ–å®‰è£…</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br></pre></td></tr></table></figure><h3 id="5ã€å¯åŠ¨é¡¹ç›®">5ã€å¯åŠ¨é¡¹ç›®</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="built_in">run</span> dev</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/direct/2e7a17f8446e4fb5bf09adf820bb2836.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://img-blog.csdnimg.cn/direct/11f45e7ed4f549dfaaa80d554e42df0c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>è‡³æ­¤ä¸€ä¸ªç®€å•çš„eggå·¥ç¨‹å°±åˆ›å»ºå®Œæ¯•äº†ã€‚</strong></p>]]></content>
    
    
    <summary type="html">ğŸ æœ¬æ–‡æ±‡æ€»åˆ›å»ºä¸€ä¸ªEggé¡¹ç›®ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="node" scheme="https://www.cameliia.top/categories/node/"/>
    
    
    <category term="Egg" scheme="https://www.cameliia.top/tags/Egg/"/>
    
  </entry>
  
  <entry>
    <title>Egg(ä¸‰)_è§£å†³è·¨åŸŸé—®é¢˜</title>
    <link href="https://www.cameliia.top/posts/602.html"/>
    <id>https://www.cameliia.top/posts/602.html</id>
    <published>2024-01-02T08:00:00.000Z</published>
    <updated>2024-01-02T08:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><h1>å‰è¨€</h1><h3 id="Egg-é¡¹ç›®ä¸­å…³é—­csrfï¼Œä½¿ç”¨-egg-corså¤„ç†è·¨åŸŸé—®é¢˜">Egg é¡¹ç›®ä¸­å…³é—­csrfï¼Œä½¿ç”¨ egg-corså¤„ç†è·¨åŸŸé—®é¢˜</h3><p><strong>æ–‡æ¡£ï¼š</strong><a href="https://www.npmjs.com/package/egg-cors">https://www.npmjs.com/package/egg-cors</a></p><hr><h2 id="ä¸€ã€å®‰è£…">ä¸€ã€å®‰è£…</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="selector-tag">i</span> egg-cors <span class="attr">--save</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€é…ç½®è·¨åŸŸæ’ä»¶-config-plugin-js">äºŒã€é…ç½®è·¨åŸŸæ’ä»¶ config/plugin.js</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·¨åŸŸé—®é¢˜</span></span><br><span class="line"><span class="keyword">exports</span>.cors = &#123;</span><br><span class="line">  enable: <span class="literal">true</span>,</span><br><span class="line">  <span class="keyword">package</span>: <span class="string">&#x27;egg-cors&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰-ã€config-config-default-js-ç›®å½•ä¸‹é…ç½®">ä¸‰ ã€config / config.default.js ç›®å½•ä¸‹é…ç½®</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">config.security = &#123;</span><br><span class="line">    <span class="comment">// å…³é—­ csrf</span></span><br><span class="line">    csrf: &#123;</span><br><span class="line">      enable: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">     <span class="comment">// è·¨åŸŸç™½åå•</span></span><br><span class="line">    domainWhiteList: [ <span class="symbol">&#x27;http</span>:<span class="comment">//localhost:3000&#x27; ],</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// å…è®¸è·¨åŸŸçš„æ–¹æ³•</span></span><br><span class="line">  config.cors = &#123;</span><br><span class="line">    origin: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">    allowMethods: <span class="symbol">&#x27;GET</span>, PUT, POST, DELETE, PATCH&#x27;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ æœ¬æ–‡æ±‡æ€»Eggè§£å†³è·¨åŸŸé—®é¢˜ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="node" scheme="https://www.cameliia.top/categories/node/"/>
    
    
    <category term="Egg" scheme="https://www.cameliia.top/tags/Egg/"/>
    
  </entry>
  
  <entry>
    <title>Vue3.0ç¬”è®°</title>
    <link href="https://www.cameliia.top/posts/307.html"/>
    <id>https://www.cameliia.top/posts/307.html</id>
    <published>2023-12-12T08:00:00.000Z</published>
    <updated>2022-03-12T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>1. Vue3ç®€ä»‹</h1><ul><li><p>2020å¹´9æœˆ18æ—¥ï¼Œ<code>Vue.js</code>å‘å¸ƒç‰ˆ<code>3.0</code>ç‰ˆæœ¬ï¼Œä»£å·ï¼š<code>One Piece</code>ï¼ˆn</p></li><li><p>ç»å†äº†ï¼š<a href="https://github.com/vuejs/core/commits/main">4800+æ¬¡æäº¤</a>ã€<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+ä¸ªRFC</a>ã€<a href="https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+">600+æ¬¡PR</a>ã€<a href="https://github.com/vuejs/core/graphs/contributors">300+è´¡çŒ®è€…</a></p></li><li><p>å®˜æ–¹å‘ç‰ˆåœ°å€ï¼š<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece Â· vuejs/core</a></p></li><li><p>æˆªæ­¢2023å¹´10æœˆï¼Œæœ€æ–°çš„å…¬å¼€ç‰ˆæœ¬ä¸ºï¼š<code>3.3.4</code></p><img src="https://picdemo.cameliia.top/images//1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2.png" alt="image.png" style="zoom:30%;" /> </li></ul><h2 id="1-1-ã€æ€§èƒ½çš„æå‡ã€‘">1.1. ã€æ€§èƒ½çš„æå‡ã€‘</h2><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘<code>41%</code>ã€‚</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿«<code>55%</code>, æ›´æ–°æ¸²æŸ“å¿«<code>133%</code>ã€‚</p></li><li><p>å†…å­˜å‡å°‘<code>54%</code>ã€‚</p></li></ul><h2 id="1-2-ã€-æºç çš„å‡çº§ã€‘">1.2.ã€ æºç çš„å‡çº§ã€‘</h2><ul><li><p>ä½¿ç”¨<code>Proxy</code>ä»£æ›¿<code>defineProperty</code>å®ç°å“åº”å¼ã€‚</p></li><li><p>é‡å†™è™šæ‹Ÿ<code>DOM</code>çš„å®ç°å’Œ<code>Tree-Shaking</code>ã€‚</p></li></ul><h2 id="1-3-ã€æ‹¥æŠ±TypeScriptã€‘">1.3. ã€æ‹¥æŠ±TypeScriptã€‘</h2><ul><li><code>Vue3</code>å¯ä»¥æ›´å¥½çš„æ”¯æŒ<code>TypeScript</code>ã€‚</li></ul><h2 id="1-4-ã€æ–°çš„ç‰¹æ€§ã€‘">1.4. ã€æ–°çš„ç‰¹æ€§ã€‘</h2><ol><li><p><code>Composition API</code>ï¼ˆç»„åˆ<code>API</code>ï¼‰ï¼š</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>ä¸<code>reactive</code></p></li><li><p><code>computed</code>ä¸<code>watch</code></p><p>â€¦</p></li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶ï¼š</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>â€¦</p></li></ul></li><li><p>å…¶ä»–æ”¹å˜ï¼š</p><ul><li><p>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p></li><li><p>ç§»é™¤<code>keyCode</code>æ”¯æŒä½œä¸º<code> v-on</code> çš„ä¿®é¥°ç¬¦</p><p>â€¦</p></li></ul></li></ol><h1>2. åˆ›å»ºVue3å·¥ç¨‹</h1><h2 id="2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘">2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘</h2><p>ç‚¹å‡»æŸ¥çœ‹<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>å¤‡æ³¨ï¼šç›®å‰<code>vue-cli</code>å·²å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èåŸºäº <code>Vite</code> åˆ›å»ºé¡¹ç›®ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span></span><br><span class="line">vue <span class="literal">--version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli </span></span><br><span class="line">npm install <span class="literal">-g</span> @vue/<span class="built_in">cli</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## æ‰§è¡Œåˆ›å»ºå‘½ä»¤</span></span><br><span class="line">vue create vue_test</span><br><span class="line"></span><br><span class="line"><span class="comment">##  éšåé€‰æ‹©3.x</span></span><br><span class="line"><span class="comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span><br><span class="line"><span class="comment">##  &gt; 3.x</span></span><br><span class="line"><span class="comment">##    2.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å¯åŠ¨</span></span><br><span class="line"><span class="built_in">cd</span> vue_test</span><br><span class="line">npm run serve</span><br></pre></td></tr></table></figure><hr><h2 id="2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è">2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)</h2><p><code>vite</code> æ˜¯æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://vitejs.cn/">https://vitejs.cn</a>ï¼Œ<code>vite</code>çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p><ul><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆ<code>HMR</code>ï¼‰ï¼Œèƒ½å®ç°æé€Ÿçš„æœåŠ¡å¯åŠ¨ã€‚</li><li>å¯¹ <code>TypeScript</code>ã€<code>JSX</code>ã€<code>CSS</code> ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li><li><code>webpack</code>æ„å»º ä¸ <code>vite</code>æ„å»ºå¯¹æ¯”å›¾å¦‚ä¸‹ï¼š<br><img src="https://picdemo.cameliia.top/images/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe.png" alt="webpackæ„å»º" title="webpackæ„å»º" style="zoom:20%;box-shadow:0 0 10px black" /><img src="https://picdemo.cameliia.top/images/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f.png" alt="viteæ„å»º" title="viteæ„å»º" style="zoom: 20%;box-shadow:0 0 10px black" /></li></ul><ul><li>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">å®˜æ–¹æ–‡æ¡£</a>ï¼‰</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 1.åˆ›å»ºå‘½ä»¤</span></span><br><span class="line">npm create vue@latest</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2.å…·ä½“é…ç½®</span></span><br><span class="line"><span class="comment">## é…ç½®é¡¹ç›®åç§°</span></span><br><span class="line">âˆš Project name: vue3_test</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ TypeScriptæ”¯æŒ</span></span><br><span class="line">âˆš Add TypeScript?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ JSXæ”¯æŒ</span></span><br><span class="line">âˆš Add JSX Support?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ è·¯ç”±ç¯å¢ƒ</span></span><br><span class="line">âˆš Add Vue Router <span class="keyword">for</span> Single Page Application development?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ piniaç¯å¢ƒ</span></span><br><span class="line">âˆš Add Pinia <span class="keyword">for</span> state management?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ å•å…ƒæµ‹è¯•</span></span><br><span class="line">âˆš Add Vitest <span class="keyword">for</span> Unit Testing?  No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•æ–¹æ¡ˆ</span></span><br><span class="line">âˆš Add an <span class="keyword">End</span><span class="literal">-to-End</span> Testing Solution? Â» No</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ ESLintè¯­æ³•æ£€æŸ¥</span></span><br><span class="line">âˆš Add ESLint <span class="keyword">for</span> code quality?  Yes</span><br><span class="line"><span class="comment">## æ˜¯å¦æ·»åŠ Prettiertä»£ç æ ¼å¼åŒ–</span></span><br><span class="line">âˆš Add Prettier <span class="keyword">for</span> code formatting?  No</span><br></pre></td></tr></table></figure><p>è‡ªå·±åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªAppç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h1&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27; //ç»„ä»¶å</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  .app &#123;</span><br><span class="line">    background-color: #ddd;</span><br><span class="line">    box-shadow: 0 0 10px;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>å®‰è£…å®˜æ–¹æ¨èçš„<code>vscode</code>æ’ä»¶ï¼š</p><img src="https://picdemo.cameliia.top/images/volar.png" alt="Snipaste_2023-10-08_20-46-34" style="zoom:50%;" /> <img src="https://picdemo.cameliia.top/images/image-20231218085906380.png" alt="image-20231218085906380" style="zoom:42%;" /> <p>æ€»ç»“ï¼š</p><ul><li><code>Vite</code> é¡¹ç›®ä¸­ï¼Œ<code>index.html</code> æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æœ€å¤–å±‚ã€‚</li><li>åŠ è½½<code>index.html</code>åï¼Œ<code>Vite</code> è§£æ <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> æŒ‡å‘çš„<code>JavaScript</code>ã€‚</li><li><code>Vue3</code>**ä¸­æ˜¯é€šè¿‡ **<code>createApp</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹ã€‚</li></ul><h2 id="2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘">2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘</h2><p><code>Vue3</code>å‘ä¸‹å…¼å®¹<code>Vue2</code>è¯­æ³•ï¼Œä¸”<code>Vue3</code>ä¸­çš„æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">        age:18,</span><br><span class="line">        tel:&#x27;13888888888&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      changeName()&#123;</span><br><span class="line">        this.name = &#x27;zhang-san&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      changeAge()&#123;</span><br><span class="line">        this.age += 1</span><br><span class="line">      &#125;,</span><br><span class="line">      showTel()&#123;</span><br><span class="line">        alert(this.tel)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1>3. Vue3æ ¸å¿ƒè¯­æ³•</h1><h2 id="3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘">3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘</h2><ul><li><code>Vue2</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Options</code>ï¼ˆé…ç½®ï¼‰é£æ ¼çš„ã€‚</li><li><code>Vue3</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Composition</code>ï¼ˆç»„åˆï¼‰é£æ ¼çš„ã€‚</li></ul><h3 id="Options-API-çš„å¼Šç«¯">Options API çš„å¼Šç«¯</h3><p><code>Options</code>ç±»å‹çš„ <code>API</code>ï¼Œæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ç­‰ï¼Œæ˜¯åˆ†æ•£åœ¨ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ä¸­çš„ï¼Œè‹¥æƒ³æ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«ä¿®æ”¹ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ï¼Œä¸ä¾¿äºç»´æŠ¤å’Œå¤ç”¨ã€‚</p><p><img src="https://picdemo.cameliia.top/images/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="https://picdemo.cameliia.top/images/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p><h3 id="Composition-API-çš„ä¼˜åŠ¿">Composition API çš„ä¼˜åŠ¿</h3><p>å¯ä»¥ç”¨å‡½æ•°çš„æ–¹å¼ï¼Œæ›´åŠ ä¼˜é›…çš„ç»„ç»‡ä»£ç ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><p><img src="https://picdemo.cameliia.top/images/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="https://picdemo.cameliia.top/images/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p><blockquote><p>è¯´æ˜ï¼šä»¥ä¸Šå››å¼ åŠ¨å›¾åŸåˆ›ä½œè€…ï¼šå¤§å¸…è€çŒ¿</p></blockquote><h2 id="3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘">3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘</h2><h3 id="setup-æ¦‚è¿°">setup æ¦‚è¿°</h3><p><code>setup</code>æ˜¯<code>Vue3</code>ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯ <code>Composition API</code> <strong>â€œè¡¨æ¼”çš„èˆå°</strong><em><strong>â€</strong></em>ï¼Œç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ç›‘è§†â€¦ç­‰ç­‰ï¼Œå‡é…ç½®åœ¨<code>setup</code>ä¸­ã€‚</p><p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li><code>setup</code>å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„å†…å®¹ï¼Œå¯ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li><code>setup</code>ä¸­è®¿é—®<code>this</code>æ˜¯<code>undefined</code>ã€‚</li><li><code>setup</code>å‡½æ•°ä¼šåœ¨<code>beforeCreate</code>ä¹‹å‰è°ƒç”¨ï¼Œå®ƒæ˜¯â€œé¢†å…ˆâ€æ‰€æœ‰é’©å­æ‰§è¡Œçš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">      // æ•°æ®ï¼ŒåŸæ¥å†™åœ¨dataä¸­ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€telæ•°æ®éƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">      let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">      let age = 18</span><br><span class="line">      let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">      // æ–¹æ³•ï¼ŒåŸæ¥å†™åœ¨methodsä¸­</span><br><span class="line">      function changeName()&#123;</span><br><span class="line">        name = &#x27;zhang-san&#x27; //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(name)</span><br><span class="line">      &#125;</span><br><span class="line">      function changeAge()&#123;</span><br><span class="line">        age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">        console.log(age)</span><br><span class="line">      &#125;</span><br><span class="line">      function showTel()&#123;</span><br><span class="line">        alert(tel)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å†…å®¹ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨</span><br><span class="line">      return &#123;name,age,tel,changeName,changeAge,showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="setup-çš„è¿”å›å€¼">setup çš„è¿”å›å€¼</h3><ul><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼šåˆ™å¯¹è±¡ä¸­çš„ï¼šå±æ€§ã€æ–¹æ³•ç­‰ï¼Œåœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨**ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰ã€‚**</li><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">()=&gt;</span> <span class="string">&#x27;ä½ å¥½å•Šï¼&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="setup-ä¸-Options-API-çš„å…³ç³»">setup ä¸ Options API çš„å…³ç³»</h3><ul><li><code>Vue2</code> çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦ï¼‰ä¸­<strong>å¯ä»¥è®¿é—®åˆ°</strong> <code>setup</code>ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨<code>setup</code>ä¸­<strong>ä¸èƒ½è®¿é—®åˆ°</strong><code>Vue2</code>çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦ï¼‰ã€‚</li><li>å¦‚æœä¸<code>Vue2</code>å†²çªï¼Œåˆ™<code>setup</code>ä¼˜å…ˆã€‚</li></ul><h3 id="setup-è¯­æ³•ç³–">setup è¯­æ³•ç³–</h3><p><code>setup</code>å‡½æ•°æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè¿™ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠ<code>setup</code>ç‹¬ç«‹å‡ºå»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;Person&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸‹é¢çš„å†™æ³•æ˜¯setupè¯­æ³•ç³– --&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  console.log(this) //undefined</span><br><span class="line">  </span><br><span class="line">  // æ•°æ®ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€teléƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰</span><br><span class="line">  let name = &#x27;å¼ ä¸‰&#x27;</span><br><span class="line">  let age = 18</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changName()&#123;</span><br><span class="line">    name = &#x27;æå››&#x27;//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function changAge()&#123;</span><br><span class="line">    console.log(age)</span><br><span class="line">    age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>æ‰©å±•ï¼šä¸Šè¿°ä»£ç ï¼Œè¿˜éœ€è¦ç¼–å†™ä¸€ä¸ªä¸å†™<code>setup</code>çš„<code>script</code>æ ‡ç­¾ï¼Œå»æŒ‡å®šç»„ä»¶åå­—ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>vite</code>ä¸­çš„æ’ä»¶ç®€åŒ–</p><ol><li>ç¬¬ä¸€æ­¥ï¼š<code>npm i vite-plugin-vue-setup-extend -D</code></li><li>ç¬¬äºŒæ­¥ï¼š<code>vite.config.ts</code></li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueSetupExtend</span> <span class="keyword">from</span> <span class="string">&#x27;vite-plugin-vue-setup-extend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [ <span class="title class_">VueSetupExtend</span>() ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¬¬ä¸‰æ­¥ï¼š<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li></ol><h2 id="3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘">3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li>**ä½œç”¨ï¼š**å®šä¹‰å“åº”å¼å˜é‡ã€‚</li><li><strong>è¯­æ³•ï¼š</strong><code>let xxx = ref(åˆå§‹å€¼)</code>ã€‚</li><li>**è¿”å›å€¼ï¼š**ä¸€ä¸ª<code>RefImpl</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°<code>refå¯¹è±¡</code>æˆ–<code>ref</code>ï¼Œ<code>ref</code>å¯¹è±¡çš„<code>value</code><strong>å±æ€§æ˜¯å“åº”å¼çš„</strong>ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><ul><li><code>JS</code>ä¸­æ“ä½œæ•°æ®éœ€è¦ï¼š<code>xxx.value</code>ï¼Œä½†æ¨¡æ¿ä¸­ä¸éœ€è¦<code>.value</code>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</li><li>å¯¹äº<code>let name = ref('å¼ ä¸‰')</code>æ¥è¯´ï¼Œ<code>name</code>ä¸æ˜¯å“åº”å¼çš„ï¼Œ<code>name.value</code>æ˜¯å“åº”å¼çš„ã€‚</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">  // nameå’Œageæ˜¯ä¸€ä¸ªRefImplçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼Œå®ƒä»¬çš„valueå±æ€§æ˜¯å“åº”å¼çš„ã€‚</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  // telå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å“åº”å¼çš„</span><br><span class="line">  let tel = &#x27;13888888888&#x27;</span><br><span class="line"></span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    name.value = &#x27;æå››&#x27;</span><br><span class="line">    console.log(name.value)</span><br><span class="line"></span><br><span class="line">    // æ³¨æ„ï¼šnameä¸æ˜¯å“åº”å¼çš„ï¼Œname.valueæ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å¦‚ä¸‹ä»£ç å¹¶ä¸ä¼šå¼•èµ·é¡µé¢çš„æ›´æ–°ã€‚</span><br><span class="line">    // name = ref(&#x27;zhang-san&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value</span><br><span class="line">    age.value += 1 </span><br><span class="line">    console.log(age.value)</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel()&#123;</span><br><span class="line">    alert(tel)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘">3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š<strong>å®šä¹‰ä¸€ä¸ª</strong>å“åº”å¼å¯¹è±¡</strong>ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>ï¼Œå¦åˆ™æŠ¥é”™ï¼‰</li><li><strong>è¯­æ³•ï¼š</strong><code>let å“åº”å¼å¯¹è±¡= reactive(æºå¯¹è±¡)</code>ã€‚</li><li>**è¿”å›å€¼ï¼š**ä¸€ä¸ª<code>Proxy</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ï¼šå“åº”å¼å¯¹è±¡ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><code>reactive</code>å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡â€çš„ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = reactive(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = reactive([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = reactive(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘">3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li>å…¶å®<code>ref</code>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼š<strong>åŸºæœ¬ç±»å‹</strong>ã€<strong>å¯¹è±¡ç±»å‹</strong>ã€‚</li><li>è‹¥<code>ref</code>æ¥æ”¶çš„æ˜¯å¯¹è±¡ç±»å‹ï¼Œå†…éƒ¨å…¶å®ä¹Ÿæ˜¯è°ƒç”¨äº†<code>reactive</code>å‡½æ•°ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// æ•°æ®</span><br><span class="line">let car = ref(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)</span><br><span class="line">let games = ref([</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,</span><br><span class="line">  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;</span><br><span class="line">])</span><br><span class="line">let obj = ref(&#123;</span><br><span class="line">  a:&#123;</span><br><span class="line">    b:&#123;</span><br><span class="line">      c:&#123;</span><br><span class="line">        d:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(car)</span><br><span class="line"></span><br><span class="line">function changeCarPrice() &#123;</span><br><span class="line">  car.value.price += 10</span><br><span class="line">&#125;</span><br><span class="line">function changeFirstGame() &#123;</span><br><span class="line">  games.value[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function test()&#123;</span><br><span class="line">  obj.value.a.b.c.d = 999</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-6-ã€ref-å¯¹æ¯”-reactiveã€‘">3.6. ã€ref å¯¹æ¯” reactiveã€‘</h2><p>å®è§‚è§’åº¦çœ‹ï¼š</p><blockquote><ol><li><p><code>ref</code>ç”¨æ¥å®šä¹‰ï¼š<strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼›</p></li><li><p><code>reactive</code>ç”¨æ¥å®šä¹‰ï¼š<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ã€‚</p></li></ol></blockquote><ul><li>åŒºåˆ«ï¼š</li></ul><blockquote><ol><li><p><code>ref</code>åˆ›å»ºçš„å˜é‡å¿…é¡»ä½¿ç”¨<code>.value</code>ï¼ˆå¯ä»¥ä½¿ç”¨<code>volar</code>æ’ä»¶è‡ªåŠ¨æ·»åŠ <code>.value</code>ï¼‰ã€‚</p><img src="../../social/images/è‡ªåŠ¨è¡¥å……value.png" alt="è‡ªåŠ¨è¡¥å……value" style="zoom:50%;border-radius:20px" /> </li><li><p><code>reactive</code>é‡æ–°åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¼š<strong>å¤±å»</strong>å“åº”å¼ï¼ˆå¯ä»¥ä½¿ç”¨<code>Object.assign</code>å»æ•´ä½“æ›¿æ¢ï¼‰ã€‚</p></li></ol></blockquote><ul><li>ä½¿ç”¨åŸåˆ™ï¼š</li></ul><blockquote><ol><li>è‹¥éœ€è¦ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨<code>ref</code>ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå±‚çº§ä¸æ·±ï¼Œ<code>ref</code>ã€<code>reactive</code>éƒ½å¯ä»¥ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¸”å±‚çº§è¾ƒæ·±ï¼Œæ¨èä½¿ç”¨<code>reactive</code>ã€‚</li></ol></blockquote><h2 id="3-7-ã€toRefs-ä¸-toRefã€‘">3.7. ã€toRefs ä¸ toRefã€‘</h2><ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè½¬æ¢ä¸º<code>ref</code>å¯¹è±¡ã€‚</li><li>å¤‡æ³¨ï¼š<code>toRefs</code>ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†<code>toRefs</code>å¯ä»¥æ‰¹é‡è½¬æ¢ã€‚</li><li>è¯­æ³•å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ€§åˆ«ï¼š&#123;&#123;person.gender&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeGender&quot;&gt;ä¿®æ”¹æ€§åˆ«&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,reactive,toRefs,toRef&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;name:&#x27;å¼ ä¸‰&#x27;, age:18, gender:&#x27;ç”·&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefså°†personå¯¹è±¡ä¸­çš„nä¸ªå±æ€§æ‰¹é‡å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let &#123;name,gender&#125; =  toRefs(person)</span><br><span class="line"></span><br><span class="line">  // é€šè¿‡toRefå°†personå¯¹è±¡ä¸­çš„genderå±æ€§å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›</span><br><span class="line">  let age = toRef(person,&#x27;age&#x27;)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    name.value += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    age.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeGender()&#123;</span><br><span class="line">    gender.value = &#x27;å¥³&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-8-ã€computedã€‘">3.8. ã€computedã€‘</h2><p>ä½œç”¨ï¼šæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°æ•°æ®ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>computed</code>ä½œç”¨ä¸€è‡´ï¼‰ã€‚</p><img src="https://picdemo.cameliia.top/images/computed.gif" style="zoom:20%;" />  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    åï¼š&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;å…¨åæ”¹ä¸ºï¼šli-si&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;ref,computed&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let firstName = ref(&#x27;zhang&#x27;)</span><br><span class="line">  let lastName = ref(&#x27;san&#x27;)</span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”åªè¯»å–ï¼Œä¸ä¿®æ”¹</span><br><span class="line">  /* let fullName = computed(()=&gt;&#123;</span><br><span class="line">    return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // è®¡ç®—å±æ€§â€”â€”æ—¢è¯»å–åˆä¿®æ”¹</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    // è¯»å–</span><br><span class="line">    get()&#123;</span><br><span class="line">      return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">    &#125;,</span><br><span class="line">    // ä¿®æ”¹</span><br><span class="line">    set(val)&#123;</span><br><span class="line">      console.log(&#x27;æœ‰äººä¿®æ”¹äº†fullName&#x27;,val)</span><br><span class="line">      firstName.value = val.split(&#x27;-&#x27;)[0]</span><br><span class="line">      lastName.value = val.split(&#x27;-&#x27;)[1]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  function changeFullName()&#123;</span><br><span class="line">    fullName.value = &#x27;li-si&#x27;</span><br><span class="line">  &#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-9-ã€watchã€‘">3.9.ã€watchã€‘</h2><ul><li>ä½œç”¨ï¼šç›‘è§†æ•°æ®çš„å˜åŒ–ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>watch</code>ä½œç”¨ä¸€è‡´ï¼‰</li><li>ç‰¹ç‚¹ï¼š<code>Vue3</code>ä¸­çš„<code>watch</code>åªèƒ½ç›‘è§†ä»¥ä¸‹<strong>å››ç§æ•°æ®</strong>ï¼š</li></ul><blockquote><ol><li><code>ref</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li><code>reactive</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li>å‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼ˆ<code>getter</code>å‡½æ•°ï¼‰ã€‚</li><li>ä¸€ä¸ªåŒ…å«ä¸Šè¿°å†…å®¹çš„æ•°ç»„ã€‚</li></ol></blockquote><p>æˆ‘ä»¬åœ¨<code>Vue3</code>ä¸­ä½¿ç”¨<code>watch</code>çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><h3 id="æƒ…å†µä¸€">* æƒ…å†µä¸€</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åå³å¯ï¼Œç›‘è§†çš„æ˜¯å…¶<code>value</code>å€¼çš„æ”¹å˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®</span><br><span class="line">  const stopWatch = watch(sum,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;sumå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">    if(newValue &gt;= 10)&#123;</span><br><span class="line">      stopWatch()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäºŒ">* æƒ…å†µäºŒ</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„ã€åœ°å€å€¼ã€‘ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ï¼Œè¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p><ul><li><p>è‹¥ä¿®æ”¹çš„æ˜¯<code>ref</code>å®šä¹‰çš„å¯¹è±¡ä¸­çš„å±æ€§ï¼Œ<code>newValue</code> å’Œ <code>oldValue</code> éƒ½æ˜¯æ–°å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>è‹¥ä¿®æ”¹æ•´ä¸ª<code>ref</code>å®šä¹‰çš„å¯¹è±¡ï¼Œ<code>newValue</code> æ˜¯æ–°å€¼ï¼Œ <code>oldValue</code> æ˜¯æ—§å€¼ï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäºŒï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = ref(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.value.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.value.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    person.value = &#123;name:&#x27;æå››&#x27;,age:90&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  /* </span><br><span class="line">    ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„åœ°å€å€¼ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†</span><br><span class="line">    watchçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ï¼šè¢«ç›‘è§†çš„æ•°æ®</span><br><span class="line">    watchçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼šç›‘è§†çš„å›è°ƒ</span><br><span class="line">    watchçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ï¼šé…ç½®å¯¹è±¡ï¼ˆdeepã€immediateç­‰ç­‰.....ï¼‰ </span><br><span class="line">  */</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µä¸‰">*  æƒ…å†µä¸‰</h3><p>ç›‘è§†<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤å¼€å¯äº†æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;ä¿®æ”¹obj.a.b.c&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18</span><br><span class="line">  &#125;)</span><br><span class="line">  let obj = reactive(&#123;</span><br><span class="line">    a:&#123;</span><br><span class="line">      b:&#123;</span><br><span class="line">        c:666</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson()&#123;</span><br><span class="line">    Object.assign(person,&#123;name:&#x27;æå››&#x27;,age:80&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  function test()&#123;</span><br><span class="line">    obj.a.b.c = 888</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤æ˜¯å¼€å¯æ·±åº¦ç›‘è§†çš„</span><br><span class="line">  watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">  watch(obj,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;Objå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µå››">* æƒ…å†µå››</h3><p>ç›‘è§†<code>ref</code>æˆ–<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„<strong>æŸä¸ªå±æ€§</strong>ï¼Œæ³¨æ„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>è‹¥è¯¥å±æ€§å€¼<strong>ä¸æ˜¯</strong>ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œéœ€è¦å†™æˆå‡½æ•°å½¢å¼ã€‚</li><li>è‹¥è¯¥å±æ€§å€¼æ˜¯<strong>ä¾ç„¶</strong>æ˜¯ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œå¯ç›´æ¥ç¼–ï¼Œä¹Ÿå¯å†™æˆå‡½æ•°ï¼Œå»ºè®®å†™æˆå‡½æ•°ã€‚</li></ol><p>ç»“è®ºï¼šç›‘è§†çš„è¦æ˜¯å¯¹è±¡é‡Œçš„å±æ€§ï¼Œé‚£ä¹ˆæœ€å¥½å†™å‡½æ•°å¼ï¼Œæ³¨æ„ç‚¹ï¼šè‹¥æ˜¯å¯¹è±¡ç›‘è§†çš„æ˜¯åœ°å€å€¼ï¼Œéœ€è¦å…³æ³¨å¯¹è±¡å†…éƒ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µå››ï¼šç›‘è§†ã€refã€‘æˆ–ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„æŸä¸ªå±æ€§&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯åŸºæœ¬ç±»å‹çš„ï¼Œè¦å†™æˆå‡½æ•°å¼</span><br><span class="line">  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.nameå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯å¯¹è±¡ç±»å‹çš„ï¼Œå¯ä»¥ç›´æ¥å†™ï¼Œä¹Ÿèƒ½å†™å‡½æ•°ï¼Œæ›´æ¨èå†™å‡½æ•°</span><br><span class="line">  watch(()=&gt;person.car,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäº”">* æƒ…å†µäº”</h3><p>ç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name:&#x27;å¼ ä¸‰&#x27;,</span><br><span class="line">    age:18,</span><br><span class="line">    car:&#123;</span><br><span class="line">      c1:&#x27;å¥”é©°&#x27;,</span><br><span class="line">      c2:&#x27;å®é©¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeName()&#123;</span><br><span class="line">    person.name += &#x27;~&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge()&#123;</span><br><span class="line">    person.age += 1</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC1()&#123;</span><br><span class="line">    person.car.c1 = &#x27;å¥¥è¿ª&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeC2()&#123;</span><br><span class="line">    person.car.c2 = &#x27;å¤§ä¼—&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar()&#123;</span><br><span class="line">    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç›‘è§†ï¼Œæƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</span><br><span class="line">  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-10-ã€watchEffectã€‘">3.10. ã€watchEffectã€‘</h2><ul><li><p>å®˜ç½‘ï¼šç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼åœ°è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–æ›´æ”¹æ—¶é‡æ–°æ‰§è¡Œè¯¥å‡½æ•°ã€‚</p></li><li><p><code>watch</code>å¯¹æ¯”<code>watchEffect</code></p><blockquote><ol><li><p>éƒ½èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¸åŒçš„æ˜¯ç›‘å¬æ•°æ®å˜åŒ–çš„æ–¹å¼ä¸åŒ</p></li><li><p><code>watch</code>ï¼šè¦æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®</p></li><li><p><code>watchEffect</code>ï¼šä¸ç”¨æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®ï¼ˆå‡½æ•°ä¸­ç”¨åˆ°å“ªäº›å±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªäº›å±æ€§ï¼‰ã€‚</p></li></ol></blockquote></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;éœ€æ±‚ï¼šæ°´æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œåˆ™è”ç³»æœåŠ¡å™¨&lt;/h1&gt;</span><br><span class="line">    &lt;h2 id=&quot;demo&quot;&gt;æ°´æ¸©ï¼š&#123;&#123;temp&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;æ°´ä½ï¼š&#123;&#123;height&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;æ°´æ¸©+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;æ°´ä½+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,watch,watchEffect&#125; from &#x27;vue&#x27;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let temp = ref(0)</span><br><span class="line">  let height = ref(0)</span><br><span class="line"></span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changePrice()&#123;</span><br><span class="line">    temp.value += 10</span><br><span class="line">  &#125;</span><br><span class="line">  function changeSum()&#123;</span><br><span class="line">    height.value += 1</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // ç”¨watchå®ç°ï¼Œéœ€è¦æ˜ç¡®çš„æŒ‡å‡ºè¦ç›‘è§†ï¼štempã€height</span><br><span class="line">  watch([temp,height],(value)=&gt;&#123;</span><br><span class="line">    // ä»valueä¸­è·å–æœ€æ–°çš„tempå€¼ã€heightå€¼</span><br><span class="line">    const [newTemp,newHeight] = value</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(newTemp &gt;= 50 || newHeight &gt;= 20)&#123;</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // ç”¨watchEffectå®ç°ï¼Œä¸ç”¨</span><br><span class="line">  const stopWtach = watchEffect(()=&gt;&#123;</span><br><span class="line">    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨</span><br><span class="line">    if(temp.value &gt;= 50 || height.value &gt;= 20)&#123;</span><br><span class="line">      console.log(document.getElementById(&#x27;demo&#x27;)?.innerText)</span><br><span class="line">      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    // æ°´æ¸©è¾¾åˆ°100ï¼Œæˆ–æ°´ä½è¾¾åˆ°50ï¼Œå–æ¶ˆç›‘è§†</span><br><span class="line">    if(temp.value === 100 || height.value === 50)&#123;</span><br><span class="line">      console.log(&#x27;æ¸…ç†äº†&#x27;)</span><br><span class="line">      stopWtach()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘">3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘</h2><p>ä½œç”¨ï¼šç”¨äºæ³¨å†Œæ¨¡æ¿å¼•ç”¨ã€‚</p><blockquote><ul><li><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯<code>DOM</code>èŠ‚ç‚¹ã€‚</p></li><li><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</p></li></ul></blockquote><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1 ref=&quot;title1&quot;&gt;å°šç¡…è°·&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;å‰ç«¯&lt;/h2&gt;</span><br><span class="line">    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;ç‚¹æˆ‘æ‰“å°å†…å®¹&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let title1 = ref()</span><br><span class="line">  let title2 = ref()</span><br><span class="line">  let title3 = ref()</span><br><span class="line"></span><br><span class="line">  function showLog()&#123;</span><br><span class="line">    // é€šè¿‡idè·å–å…ƒç´ </span><br><span class="line">    const t1 = document.getElementById(&#x27;title1&#x27;)</span><br><span class="line">    // æ‰“å°å†…å®¹</span><br><span class="line">    console.log((t1 as HTMLElement).innerText)</span><br><span class="line">    console.log((&lt;HTMLElement&gt;t1).innerText)</span><br><span class="line">    console.log(t1?.innerText)</span><br><span class="line">    </span><br><span class="line">/************************************/</span><br><span class="line"></span><br><span class="line">    // é€šè¿‡refè·å–å…ƒç´ </span><br><span class="line">    console.log(title1.value)</span><br><span class="line">    console.log(title2.value)</span><br><span class="line">    console.log(title3.value)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- çˆ¶ç»„ä»¶App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person ref=&quot;ren&quot;/&gt;</span><br><span class="line">  &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  let ren = ref()</span><br><span class="line"></span><br><span class="line">  function test()&#123;</span><br><span class="line">    console.log(ren.value.name)</span><br><span class="line">    console.log(ren.value.age)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- å­ç»„ä»¶Person.vueä¸­è¦ä½¿ç”¨defineExposeæš´éœ²å†…å®¹ --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123;ref,defineExpose&#125; from &#x27;vue&#x27;</span><br><span class="line">// æ•°æ®</span><br><span class="line">  let name = ref(&#x27;å¼ ä¸‰&#x27;)</span><br><span class="line">  let age = ref(18)</span><br><span class="line">  /****************************/</span><br><span class="line">  /****************************/</span><br><span class="line">  // ä½¿ç”¨defineExposeå°†ç»„ä»¶ä¸­çš„æ•°æ®äº¤ç»™å¤–éƒ¨</span><br><span class="line">  defineExpose(&#123;name,age&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="3-12-ã€propsã€‘">3.12. ã€propsã€‘</h2><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">// å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œé™åˆ¶æ¯ä¸ªPersonå¯¹è±¡çš„æ ¼å¼</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">PersonInter</span> &#123;</span><br><span class="line"> <span class="attr">id</span>:string,</span><br><span class="line"> <span class="attr">name</span>:string,</span><br><span class="line">    <span class="attr">age</span>:number</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹Persons</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;</span><br></pre></td></tr></table></figure><p><code>App.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;template&gt;</span><br><span class="line">&lt;Person :list=&quot;persons&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;</span><br><span class="line">  import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">    import &#123;type Persons&#125; from &#x27;./types&#x27;</span><br><span class="line">  </span><br><span class="line">    let persons = reactive&lt;Persons&gt;([</span><br><span class="line">     &#123;id:&#x27;e98219e12&#x27;,name:&#x27;å¼ ä¸‰&#x27;,age:18&#125;,</span><br><span class="line">      &#123;id:&#x27;e98219e13&#x27;,name:&#x27;æå››&#x27;,age:19&#125;,</span><br><span class="line">       &#123;id:&#x27;e98219e14&#x27;,name:&#x27;ç‹äº”&#x27;,age:20&#125;</span><br><span class="line">     ])</span><br><span class="line">   &lt;/script&gt;</span><br><span class="line">  </span><br></pre></td></tr></table></figure><p><code>Person.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line"> &lt;ul&gt;</span><br><span class="line">     &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;type PersonInter&#125; from &#x27;@/types&#x27;</span><br><span class="line">  </span><br><span class="line">  // ç¬¬ä¸€ç§å†™æ³•ï¼šä»…æ¥æ”¶</span><br><span class="line">// const props = defineProps([&#x27;list&#x27;])</span><br><span class="line">  </span><br><span class="line">  // ç¬¬äºŒç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹</span><br><span class="line">// defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line">  </span><br><span class="line">  // ç¬¬ä¸‰ç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹+æŒ‡å®šé»˜è®¤å€¼+é™åˆ¶å¿…è¦æ€§</span><br><span class="line">let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">     list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;å°çŒªä½©å¥‡&#x27;,age:18&#125;]</span><br><span class="line">  &#125;)</span><br><span class="line">   console.log(props)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure></blockquote><h2 id="3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘">3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘</h2><ul><li><p>æ¦‚å¿µï¼š<code>Vue</code>ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­<code>Vue</code>ä¼šåœ¨åˆé€‚çš„æ—¶æœºï¼Œè°ƒç”¨ç‰¹å®šçš„å‡½æ•°ï¼Œä»è€Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ï¼Œè¿™äº›ç‰¹å®šçš„å‡½æ•°ç»Ÿç§°ä¸ºï¼šç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p>è§„å¾‹ï¼š</p><blockquote><p>ç”Ÿå‘½å‘¨æœŸæ•´ä½“åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯</strong>ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸¤ä¸ªé’©å­ï¼Œä¸€å‰ä¸€åã€‚</p></blockquote></li><li><p><code>Vue2</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>beforeCreate</code>ã€<code>created</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>beforeMount</code>ã€<code>mounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>beforeUpdate</code>ã€<code>updated</code></p><p>é”€æ¯é˜¶æ®µï¼š<code>beforeDestroy</code>ã€<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>setup</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>onBeforeMount</code>ã€<code>onMounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>onBeforeUpdate</code>ã€<code>onUpdated</code></p><p>å¸è½½é˜¶æ®µï¼š<code>onBeforeUnmount</code>ã€<code>onUnmounted</code></p></blockquote></li><li><p>å¸¸ç”¨çš„é’©å­ï¼š<code>onMounted</code>(æŒ‚è½½å®Œæ¯•)ã€<code>onUpdated</code>(æ›´æ–°å®Œæ¯•)ã€<code>onBeforeUnmount</code>(å¸è½½ä¹‹å‰)</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue3å†™æ³• --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">  import &#123; </span><br><span class="line">    ref, </span><br><span class="line">    onBeforeMount, </span><br><span class="line">    onMounted, </span><br><span class="line">    onBeforeUpdate, </span><br><span class="line">    onUpdated, </span><br><span class="line">    onBeforeUnmount, </span><br><span class="line">    onUnmounted </span><br><span class="line">  &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let sum = ref(0)</span><br><span class="line">  // æ–¹æ³•</span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value += 1</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&#x27;setup&#x27;)</span><br><span class="line">  // ç”Ÿå‘½å‘¨æœŸé’©å­</span><br><span class="line">  onBeforeMount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onMounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æŒ‚è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUpdate(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUpdated(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;æ›´æ–°å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUnmount(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½ä¹‹å‰&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  onUnmounted(()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;å¸è½½å®Œæ¯•&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-14-ã€è‡ªå®šä¹‰hookã€‘">3.14. ã€è‡ªå®šä¹‰hookã€‘</h2><ul><li><p>ä»€ä¹ˆæ˜¯<code>hook</code>ï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ<code>setup</code>å‡½æ•°ä¸­ä½¿ç”¨çš„<code>Composition API</code>è¿›è¡Œäº†å°è£…ï¼Œç±»ä¼¼äº<code>vue2.x</code>ä¸­çš„<code>mixin</code>ã€‚</p></li><li><p>è‡ªå®šä¹‰<code>hook</code>çš„ä¼˜åŠ¿ï¼šå¤ç”¨ä»£ç , è®©<code>setup</code>ä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li><p><code>useSum.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">increment</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;sum,increment,decrement&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios,&#123;<span class="title class_">AxiosError</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// å‘è¯·æ±‚</span></span><br><span class="line">      <span class="keyword">let</span> &#123;data&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line">      <span class="comment">// ç»´æŠ¤æ•°æ®</span></span><br><span class="line">      dogList.<span class="title function_">push</span>(data.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">      <span class="keyword">const</span> err = &lt;<span class="title class_">AxiosError</span>&gt;error</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‚è½½é’©å­</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">getDog</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span></span><br><span class="line">  <span class="keyword">return</span> &#123;dogList,getDog&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­å…·ä½“ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;ç‚¹æˆ‘+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;decrement&quot;&gt;ç‚¹æˆ‘-1&lt;/button&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;img v-for=&quot;(u,index) in dogList.urlList&quot; :key=&quot;index&quot; :src=&quot;(u as string)&quot;&gt; </span><br><span class="line">  &lt;span v-show=&quot;dogList.isLoading&quot;&gt;åŠ è½½ä¸­......&lt;/span&gt;&lt;br&gt;</span><br><span class="line">  &lt;button @click=&quot;getDog&quot;&gt;å†æ¥ä¸€åªç‹—&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">  import &#123;defineComponent&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name:&#x27;App&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  import useSum from &#x27;./hooks/useSum&#x27;</span><br><span class="line">  import useDog from &#x27;./hooks/useDog&#x27;</span><br><span class="line"></span><br><span class="line">  let &#123;sum,increment,decrement&#125; = useSum()</span><br><span class="line">  let &#123;dogList,getDog&#125; = useDog()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h1>4. è·¯ç”±</h1><h2 id="4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘">4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘</h2><img src="../../social/images/image-20231018144351536.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> <h2 id="4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘">4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘</h2><ul><li><p><code>Vue3</code>ä¸­è¦ä½¿ç”¨<code>vue-router</code>çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯<code>4</code>ç‰ˆæœ¬ã€‚</p></li><li><p>è·¯ç”±é…ç½®æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter,createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/News.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line"><span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span></span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>ä»£ç å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2 class=&quot;title&quot;&gt;Vueè·¯ç”±æµ‹è¯•&lt;/h2&gt;</span><br><span class="line">    &lt;!-- å¯¼èˆªåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;é¦–é¡µ&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;æ–°é—»&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;å…³äº&lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- å±•ç¤ºåŒº --&gt;</span><br><span class="line">    &lt;div class=&quot;main-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">  import &#123;RouterLink,RouterView&#125; from &#x27;vue-router&#x27;  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘">4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘</h2><blockquote><ol><li><p>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code> æˆ– <code>views</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</p></li><li><p>é€šè¿‡ç‚¹å‡»å¯¼èˆªï¼Œè§†è§‰æ•ˆæœä¸Šâ€œæ¶ˆå¤±â€ äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«<strong>å¸è½½</strong>æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»<strong>æŒ‚è½½</strong>ã€‚</p></li></ol></blockquote><h2 id="4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘">4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘</h2><ol><li><p><code>history</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼š<code>URL</code>æ›´åŠ ç¾è§‚ï¼Œä¸å¸¦æœ‰<code>#</code>ï¼Œæ›´æ¥è¿‘ä¼ ç»Ÿçš„ç½‘ç«™<code>URL</code>ã€‚</p><p>ç¼ºç‚¹ï¼šåæœŸé¡¹ç›®ä¸Šçº¿ï¼Œéœ€è¦æœåŠ¡ç«¯é…åˆå¤„ç†è·¯å¾„é—®é¢˜ï¼Œå¦åˆ™åˆ·æ–°ä¼šæœ‰<code>404</code>é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(), <span class="comment">//historyæ¨¡å¼</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li><li><p><code>hash</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ›´å¥½ï¼Œå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨ç«¯å¤„ç†è·¯å¾„ã€‚</p><p>ç¼ºç‚¹ï¼š<code>URL</code>å¸¦æœ‰<code>#</code>ä¸å¤ªç¾è§‚ï¼Œä¸”åœ¨<code>SEO</code>ä¼˜åŒ–æ–¹é¢ç›¸å¯¹è¾ƒå·®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHashHistory</span>(), <span class="comment">//hashæ¨¡å¼</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote></li></ol><h2 id="4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘">4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç¬¬ä¸€ç§ï¼štoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;ä¸»é¡µ&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç¬¬äºŒç§ï¼štoçš„å¯¹è±¡å†™æ³• --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;&gt;Home&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-6-ã€å‘½åè·¯ç”±ã€‘">4.6. ã€å‘½åè·¯ç”±ã€‘</h2><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±è·³è½¬åŠä¼ å‚ï¼ˆåé¢å°±è®²ï¼‰ã€‚</p><p>ç»™è·¯ç”±è§„åˆ™å‘½åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è·³è½¬è·¯ç”±ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--ç®€åŒ–å‰ï¼šéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ç®€åŒ–åï¼šç›´æ¥é€šè¿‡åå­—è·³è½¬ï¼ˆtoçš„å¯¹è±¡å†™æ³•é…åˆnameå±æ€§ï¼‰ --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;&gt;è·³è½¬&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h2 id="4-7-ã€åµŒå¥—è·¯ç”±ã€‘">4.7. ã€åµŒå¥—è·¯ç”±ã€‘</h2><ol><li><p>ç¼–å†™<code>News</code>çš„å­è·¯ç”±ï¼š<code>Detail.vue</code></p></li><li><p>é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨<code>children</code>é…ç½®é¡¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>:<span class="title function_">createWebHistory</span>(),</span><br><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;zhuye&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xinwen&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">News</span>,</span><br><span class="line"><span class="attr">children</span>:[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;guanyu&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li><li><p>è·³è½¬è·¯ç”±ï¼ˆè®°å¾—è¦åŠ å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;</span><br><span class="line">&lt;!-- æˆ– --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;xxxx&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li><li><p>è®°å¾—å»<code>Home</code>ç»„ä»¶ä¸­é¢„ç•™ä¸€ä¸ª<code>&lt;router-view&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;nav class=&quot;news-list&quot;&gt;</span><br><span class="line">      &lt;RouterLink v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot; :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123;news.name&#125;&#125;</span><br><span class="line">      &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;div class=&quot;news-detail&quot;&gt;</span><br><span class="line">      &lt;RouterView/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-8-ã€è·¯ç”±ä¼ å‚ã€‘">4.8. ã€è·¯ç”±ä¼ å‚ã€‘</h2><h3 id="queryå‚æ•°">queryå‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=æ¬¢è¿ä½ &quot;&gt;</span><br><span class="line">è·³è½¬</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    //name:&#x27;xiang&#x27;, //ç”¨nameä¹Ÿå¯ä»¥è·³è½¬</span><br><span class="line">    path:&#x27;/news/detail&#x27;,</span><br><span class="line">    query:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°queryå‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br></pre></td></tr></table></figure></li></ol><h3 id="paramså‚æ•°">paramså‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink :to=&quot;`/news/detail/001/æ–°é—»001/å†…å®¹001`&quot;&gt;&#123;&#123;news.title&#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;</span><br><span class="line">&lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    name:&#x27;xiang&#x27;, //ç”¨nameè·³è½¬</span><br><span class="line">    params:&#123;</span><br><span class="line">      id:news.id,</span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.title</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="comment">// æ‰“å°paramså‚æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">params</span>)</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨1ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨<code>to</code>çš„å¯¹è±¡å†™æ³•ï¼Œå¿…é¡»ä½¿ç”¨<code>name</code>é…ç½®é¡¹ï¼Œä¸èƒ½ç”¨<code>path</code>ã€‚</p><p>å¤‡æ³¨2ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œéœ€è¦æå‰åœ¨è§„åˆ™ä¸­å ä½ã€‚</p></blockquote><h2 id="4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘">4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘</h2><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°ï¼ˆå¯ä»¥å°†è·¯ç”±å‚æ•°ä½œä¸º<code>props</code>ä¼ ç»™ç»„ä»¶ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line"><span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title/:content&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¯¹è±¡å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠå¯¹è±¡ä¸­çš„æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:&#123;a:1,b:2,c:3&#125;, </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// propsçš„å¸ƒå°”å€¼å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠæ”¶åˆ°äº†æ¯ä¸€ç»„paramså‚æ•°ï¼Œä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="comment">// props:true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// propsçš„å‡½æ•°å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠè¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> route.<span class="property">query</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-10-ã€-replaceå±æ€§ã€‘">4.10. ã€ replaceå±æ€§ã€‘</h2><ol><li><p>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼ã€‚</p></li><li><p>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code>ï¼š</p><ul><li><code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li><li><code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚</li></ul></li><li><p>å¼€å¯<code>replace</code>æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘">4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘</h2><p>è·¯ç”±ç»„ä»¶çš„ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>$route</code>å’Œ<code>$router</code>å˜æˆäº†ä¸¤ä¸ª<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useRoute,useRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">query</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(route.<span class="property">parmas</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">push</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(router.<span class="property">replace</span>)</span><br></pre></td></tr></table></figure><h2 id="4-12-ã€é‡å®šå‘ã€‘">4.12. ã€é‡å®šå‘ã€‘</h2><ol><li><p>ä½œç”¨ï¼šå°†ç‰¹å®šçš„è·¯å¾„ï¼Œé‡æ–°å®šå‘åˆ°å·²æœ‰è·¯ç”±ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1>5. pinia</h1><h2 id="5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘">5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘</h2><img src="../../social/images/pinia_example.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> <h2 id="5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘">5.2ã€æ­å»º pinia ç¯å¢ƒã€‘</h2><p>ç¬¬ä¸€æ­¥ï¼š<code>npm install pinia</code></p><p>ç¬¬äºŒæ­¥ï¼šæ“ä½œ<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* å¼•å…¥createPiniaï¼Œç”¨äºåˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ›å»ºpinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä½¿ç”¨æ’ä»¶ */</span>&#123;&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¼€å‘è€…å·¥å…·ä¸­å·²ç»æœ‰äº†<code>pinia</code>é€‰é¡¹</p><img src="https://cdn.nlark.com/yuque/0/2023/png/35780599/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" style="zoom:80%;border:1px solid black;border-radius:10px" /><h2 id="5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘">5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘</h2><ol><li><p><code>Store</code>æ˜¯ä¸€ä¸ªä¿å­˜ï¼š<strong>çŠ¶æ€</strong>ã€<strong>ä¸šåŠ¡é€»è¾‘</strong> çš„å®ä½“ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥<strong>è¯»å–</strong>ã€<strong>å†™å…¥</strong>å®ƒã€‚</p></li><li><p>å®ƒæœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š<code>state</code>ã€<code>getter</code>ã€<code>action</code>ï¼Œç›¸å½“äºç»„ä»¶ä¸­çš„ï¼š <code>data</code>ã€ <code>computed</code> å’Œ <code>methods</code>ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/count.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/talk.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;&#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>:[</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada01&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;ä½ ä»Šå¤©æœ‰ç‚¹æ€ªï¼Œå“ªé‡Œæ€ªï¼Ÿæ€ªå¥½çœ‹çš„ï¼&#x27;</span>&#125;,</span><br><span class="line">     &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada02&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;è‰è“ã€è“è“ã€è”“è¶Šè“ï¼Œä½ æƒ³æˆ‘äº†æ²¡ï¼Ÿ&#x27;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">id</span>:<span class="string">&#x27;yuysada03&#x27;</span>,<span class="attr">content</span>:<span class="string">&#x27;å¿ƒé‡Œç»™ä½ ç•™äº†ä¸€å—åœ°ï¼Œæˆ‘çš„æ­»å¿ƒå¡Œåœ°&#x27;</span>&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­ä½¿ç”¨<code>state</code>ä¸­çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sumStore.sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  // å¼•å…¥å¯¹åº”çš„useXxxxxStore</span><br><span class="line">  import &#123;useSumStore&#125; from &#x27;@/store/sum&#x27;</span><br><span class="line">  </span><br><span class="line">  // è°ƒç”¨useXxxxxStoreå¾—åˆ°å¯¹åº”çš„store</span><br><span class="line">  const sumStore = useSumStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;</span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import axios from &#x27;axios&#x27;</span><br><span class="line">  import &#123;useTalkStore&#125; from &#x27;@/store/talk&#x27;</span><br><span class="line"></span><br><span class="line">  const talkStore = useTalkStore()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼">5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)</h2><ol><li><p>ç¬¬ä¸€ç§ä¿®æ”¹æ–¹å¼ï¼Œç›´æ¥ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒç§ä¿®æ”¹æ–¹å¼ï¼šæ‰¹é‡ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>:<span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹å¼ï¼šå€ŸåŠ©<code>action</code>ä¿®æ”¹ï¼ˆ<code>action</code>ä¸­å¯ä»¥ç¼–å†™ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//åŠ </span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value:number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//æ“ä½œcountStoreä¸­çš„sum</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//å‡</span></span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">value:number</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">sum</span> &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> -= value</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è°ƒç”¨<code>action</code>å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨countStore</span></span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å¯¹åº”action</span></span><br><span class="line">countStore.<span class="title function_">incrementOdd</span>(n.<span class="property">value</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-5-ã€storeToRefsã€‘">5.5.ã€storeToRefsã€‘</h2><ul><li>å€ŸåŠ©<code>storeToRefs</code>å°†<code>store</code>ä¸­çš„æ•°æ®è½¬ä¸º<code>ref</code>å¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li>æ³¨æ„ï¼š<code>pinia</code>æä¾›çš„<code>storeToRefs</code>åªä¼šå°†æ•°æ®åšè½¬æ¢ï¼Œè€Œ<code>Vue</code>çš„<code>toRefs</code>ä¼šè½¬æ¢<code>store</code>ä¸­æ•°æ®ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;count&quot;&gt;</span><br><span class="line">&lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">  import &#123; useCountStore &#125; from &#x27;@/store/count&#x27;</span><br><span class="line">  /* å¼•å…¥storeToRefs */</span><br><span class="line">  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line"></span><br><span class="line">/* å¾—åˆ°countStore */</span><br><span class="line">  const countStore = useCountStore()</span><br><span class="line">  /* ä½¿ç”¨storeToRefsè½¬æ¢countStoreï¼Œéšåè§£æ„ */</span><br><span class="line">  const &#123;sum&#125; = storeToRefs(countStore)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-6-ã€gettersã€‘">5.6.ã€gettersã€‘</h2><ol><li><p>æ¦‚å¿µï¼šå½“<code>state</code>ä¸­çš„æ•°æ®ï¼Œéœ€è¦ç»è¿‡å¤„ç†åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>getters</code>é…ç½®ã€‚</p></li><li><p>è¿½åŠ <code>getters</code>é…ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span></span><br><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">// åŠ¨ä½œ</span></span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// çŠ¶æ€</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>:<span class="string">&#x27;atguigu&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// è®¡ç®—</span></span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="attr">bigSum</span>:(state):<span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> *<span class="number">10</span>,</span><br><span class="line">    <span class="title function_">upperSchool</span>():string&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>. school.<span class="title function_">toUpperCase</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;increment,decrement&#125; = countStore</span><br><span class="line"><span class="keyword">let</span> &#123;sum,school,bigSum,upperSchool&#125; = <span class="title function_">storeToRefs</span>(countStore)</span><br></pre></td></tr></table></figure></li></ol><h2 id="5-7-ã€-subscribeã€‘">5.7.ã€$subscribeã€‘</h2><p>é€šè¿‡ store çš„ <code>$subscribe()</code> æ–¹æ³•ä¾¦å¬ <code>state</code> åŠå…¶å˜åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">talkStore.$subscribe(<span class="function">(<span class="params">mutate,state</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;LoveTalk&#x27;</span>,mutate,state)</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(talkList.<span class="property">value</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘">5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;talk&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// talkListå°±æ˜¯state</span></span><br><span class="line">  <span class="keyword">const</span> talkList = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;talkList&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getATalkå‡½æ•°ç›¸å½“äºaction</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getATalk</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// å‘è¯·æ±‚ï¼Œä¸‹é¢è¿™è¡Œçš„å†™æ³•æ˜¯ï¼šè¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å</span></span><br><span class="line">    <span class="keyword">let</span> &#123;<span class="attr">data</span>:&#123;<span class="attr">content</span>:title&#125;&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)</span><br><span class="line">    <span class="comment">// æŠŠè¯·æ±‚å›æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;<span class="attr">id</span>:<span class="title function_">nanoid</span>(),title&#125;</span><br><span class="line">    <span class="comment">// æ”¾åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    talkList.<span class="title function_">unshift</span>(obj)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;talkList,getATalk&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1>6. ç»„ä»¶é€šä¿¡</h1><p><strong><code>Vue3</code>ç»„ä»¶é€šä¿¡å’Œ<code>Vue2</code>çš„åŒºåˆ«ï¼š</strong></p><ul><li>ç§»å‡ºäº‹ä»¶æ€»çº¿ï¼Œä½¿ç”¨<code>mitt</code>ä»£æ›¿ã€‚</li></ul><ul><li><code>vuex</code>æ¢æˆäº†<code>pinia</code>ã€‚</li><li>æŠŠ<code>.sync</code>ä¼˜åŒ–åˆ°äº†<code>v-model</code>é‡Œé¢äº†ã€‚</li><li>æŠŠ<code>$listeners</code>æ‰€æœ‰çš„ä¸œè¥¿ï¼Œåˆå¹¶åˆ°<code>$attrs</code>ä¸­äº†ã€‚</li><li><code>$children</code>è¢«ç æ‰äº†ã€‚</li></ul><p><strong>å¸¸è§æ­é…å½¢å¼ï¼š</strong></p><img src="../../social/images/image-20231119185900990.png" alt="image-20231119185900990" style="zoom:60%;" /> <h2 id="6-1-ã€propsã€‘">6.1. ã€propsã€‘</h2><p>æ¦‚è¿°ï¼š<code>props</code>æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œå¸¸ç”¨ä¸ ï¼š<strong>çˆ¶ â†” å­</strong>ã€‚</p><ul><li>è‹¥ <strong>çˆ¶ä¼ å­</strong>ï¼šå±æ€§å€¼æ˜¯<strong>éå‡½æ•°</strong>ã€‚</li><li>è‹¥ <strong>å­ä¼ çˆ¶</strong>ï¼šå±æ€§å€¼æ˜¯<strong>å‡½æ•°</strong>ã€‚</li></ul><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶ï¼Œ&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;å„¿å­ç»™çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">// æ•°æ®</span><br><span class="line">const car = ref(&#x27;å¥”é©°&#x27;)</span><br><span class="line">const toy = ref()</span><br><span class="line">// æ–¹æ³•</span><br><span class="line">function getToy(value:string)&#123;</span><br><span class="line">toy.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;æˆ‘çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;çˆ¶ç»™æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;getToy(toy)&quot;&gt;ç©å…·ç»™çˆ¶äº²&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const toy = ref(&#x27;å¥¥ç‰¹æ›¼&#x27;)</span><br><span class="line"></span><br><span class="line">defineProps([&#x27;car&#x27;,&#x27;getToy&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘">6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘</h2><ol><li>æ¦‚è¿°ï¼šè‡ªå®šä¹‰äº‹ä»¶å¸¸ç”¨äºï¼š<strong>å­ =&gt; çˆ¶ã€‚</strong></li><li>æ³¨æ„åŒºåˆ†å¥½ï¼šåŸç”Ÿäº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ã€‚</li></ol><ul><li>åŸç”Ÿäº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ç‰¹å®šçš„ï¼ˆ<code>click</code>ã€<code>mosueenter</code>ç­‰ç­‰ï¼‰</li><li>äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯åŒ…å«äº‹ä»¶ç›¸å…³ä¿¡æ¯çš„å¯¹è±¡ï¼ˆ<code>pageX</code>ã€<code>pageY</code>ã€<code>target</code>ã€<code>keyCode</code>ï¼‰</li></ul></li><li>è‡ªå®šä¹‰äº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ä»»æ„åç§°</li><li><strong style="color:red">äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯è°ƒç”¨<code>emit</code>æ—¶æ‰€æä¾›çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ï¼ï¼</strong ></li></ul></li></ul><ol start="3"><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;toy = $event&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ³¨æ„åŒºåˆ†åŸç”Ÿäº‹ä»¶ä¸è‡ªå®šä¹‰äº‹ä»¶ä¸­çš„$event--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toy = $event&quot;</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­ç»„ä»¶ä¸­ï¼Œè§¦å‘äº‹ä»¶ï¼š</span></span><br><span class="line"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;send-toy&#x27;</span>, å…·ä½“æ•°æ®)</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-3-ã€mittã€‘">6.3. ã€mittã€‘</h2><p>æ¦‚è¿°ï¼šä¸æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆ<code>pubsub</code>ï¼‰åŠŸèƒ½ç±»ä¼¼ï¼Œå¯ä»¥å®ç°ä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p><p>å®‰è£…<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure><p>æ–°å»ºæ–‡ä»¶ï¼š<code>src\utils\emitter.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥mitt </span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºemitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  // ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abcäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyzäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // æ¸…ç†äº‹ä»¶</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¹¶æš´éœ²mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„ç»„ä»¶ä¸­ï¼šç»‘å®šäº‹ä»¶ã€åŒæ—¶åœ¨é”€æ¯å‰è§£ç»‘äº‹ä»¶ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;send-toy&#x27;</span>,<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send-toyäº‹ä»¶è¢«è§¦å‘&#x27;</span>,value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="comment">// è§£ç»‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&#x27;send-toy&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ã€ç¬¬ä¸‰æ­¥ã€‘ï¼šæä¾›æ•°æ®çš„ç»„ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è§¦å‘äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&#x27;send-toy&#x27;</span>,toy.<span class="property">value</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„è¿™ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼Œæ€»çº¿ä¾èµ–ç€è¿™ä¸ªå†…ç½®å…³ç³»</strong></p><h2 id="6-4-ã€v-modelã€‘">6.4.ã€v-modelã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç° <strong>çˆ¶â†”å­</strong> ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚</p></li><li><p>å‰åºçŸ¥è¯† â€”â€” <code>v-model</code>çš„æœ¬è´¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- v-modelçš„æœ¬è´¨æ˜¯ä¸‹é¢è¿™è¡Œä»£ç  --&gt;</span><br><span class="line">&lt;input </span><br><span class="line">  type=&quot;text&quot; </span><br><span class="line">  :value=&quot;userName&quot; </span><br><span class="line">  @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li><li><p>ç»„ä»¶æ ‡ç­¾ä¸Šçš„<code>v-model</code>çš„æœ¬è´¨ï¼š<code>:moldeValue</code> ï¼‹ <code>update:modelValue</code>äº‹ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;</span><br><span class="line">&lt;AtguiguInput v-model=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šv-modelçš„æœ¬è´¨ --&gt;</span><br><span class="line">&lt;AtguiguInput :modelValue=&quot;userName&quot; @update:model-value=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;!--å°†æ¥æ”¶çš„valueå€¼èµ‹ç»™inputå…ƒç´ çš„valueå±æ€§ï¼Œç›®çš„æ˜¯ï¼šä¸ºäº†å‘ˆç°æ•°æ® --&gt;</span><br><span class="line">&lt;!--ç»™inputå…ƒç´ ç»‘å®šåŸç”Ÿinputäº‹ä»¶ï¼Œè§¦å‘inputäº‹ä»¶æ—¶ï¼Œè¿›è€Œè§¦å‘update:model-valueäº‹ä»¶--&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;modelValue&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:model-value&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;modelValue&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:model-value&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥æ›´æ¢<code>value</code>ï¼Œä¾‹å¦‚æ”¹æˆ<code>abc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä¹Ÿå¯ä»¥æ›´æ¢valueï¼Œä¾‹å¦‚æ”¹æˆabc--&gt;</span><br><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¸Šé¢ä»£ç çš„æœ¬è´¨å¦‚ä¸‹ --&gt;</span><br><span class="line">&lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot;/&gt;</span><br></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">       type=&quot;text&quot; </span><br><span class="line">       :value=&quot;abc&quot; </span><br><span class="line">       @input=&quot;emit(&#x27;update:abc&#x27;,$event.target.value)&quot;</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">  // æ¥æ”¶props</span><br><span class="line">  defineProps([&#x27;abc&#x27;])</span><br><span class="line">  // å£°æ˜äº‹ä»¶</span><br><span class="line">  const emit = defineEmits([&#x27;update:abc&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœ<code>value</code>å¯ä»¥æ›´æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šå¤šæ¬¡ä½¿ç”¨<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-5-ã€-attrs-ã€‘">6.5.ã€$attrs ã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š<code>$attrs</code>ç”¨äºå®ç°<strong>å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶</strong>ï¼Œå‘<strong>å½“å‰ç»„ä»¶çš„å­ç»„ä»¶</strong>é€šä¿¡ï¼ˆ<strong>ç¥–â†’å­™</strong>ï¼‰ã€‚</p></li><li><p>å…·ä½“è¯´æ˜ï¼š<code>$attrs</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çˆ¶ç»„ä»¶ä¼ å…¥çš„æ ‡ç­¾å±æ€§ã€‚</p><blockquote><p>æ³¨æ„ï¼š<code>$attrs</code>ä¼šè‡ªåŠ¨æ’é™¤<code>props</code>ä¸­å£°æ˜çš„å±æ€§(å¯ä»¥è®¤ä¸ºå£°æ˜è¿‡çš„ <code>props</code> è¢«å­ç»„ä»¶è‡ªå·±â€œæ¶ˆè´¹â€äº†)</p></blockquote></li></ol><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;&#123;x:100,y:200&#125;&quot; :updateA=&quot;updateA&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let a = ref(1)</span><br><span class="line">let b = ref(2)</span><br><span class="line">let c = ref(3)</span><br><span class="line">let d = ref(4)</span><br><span class="line"></span><br><span class="line">function updateA(value)&#123;</span><br><span class="line">a.value = value</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import GrandChild from &#x27;./GrandChild.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­™ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">&lt;h3&gt;å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">&lt;h4&gt;aï¼š&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;bï¼š&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;cï¼š&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;dï¼š&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;xï¼š&#123;&#123; x &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;h4&gt;yï¼š&#123;&#123; y &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;button @click=&quot;updateA(666)&quot;&gt;ç‚¹æˆ‘æ›´æ–°A&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">defineProps([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;updateA&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-6-ã€-refsã€-parentã€‘">6.6. ã€$refsã€$parentã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š</p><ul><li><code>$refs</code>ç”¨äº ï¼š<strong>çˆ¶â†’å­ã€‚</strong></li><li><code>$parent</code>ç”¨äºï¼š<strong>å­â†’çˆ¶ã€‚</strong></li></ul></li><li><p>åŸç†å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰è¢«<code>ref</code>å±æ€§æ ‡è¯†çš„<code>DOM</code>å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ã€‚</td></tr><tr><td><code>$parent</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼Œå½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</td></tr></tbody></table></li></ol><h2 id="6-7-ã€provideã€injectã€‘">6.7. ã€provideã€injectã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç°<strong>ç¥–å­™ç»„ä»¶</strong>ç›´æ¥é€šä¿¡</p></li><li><p>å…·ä½“ä½¿ç”¨ï¼š</p><ul><li>åœ¨ç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡<code>provide</code>é…ç½®å‘åä»£ç»„ä»¶æä¾›æ•°æ®</li><li>åœ¨åä»£ç»„ä»¶ä¸­é€šè¿‡<code>inject</code>é…ç½®æ¥å£°æ˜æ¥æ”¶æ•°æ®</li></ul></li><li><p>å…·ä½“ç¼–ç ï¼š</p><p>ã€ç¬¬ä¸€æ­¥ã€‘çˆ¶ç»„ä»¶ä¸­ï¼Œä½¿ç”¨<code>provide</code>æä¾›æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;money += 1&quot;&gt;èµ„äº§+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;car.price += 1&quot;&gt;æ±½è½¦ä»·æ ¼+1&lt;/button&gt;</span><br><span class="line">    &lt;Child/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">  import &#123; ref,reactive,provide &#125; from &quot;vue&quot;;</span><br><span class="line">  // æ•°æ®</span><br><span class="line">  let money = ref(100)</span><br><span class="line">  let car = reactive(&#123;</span><br><span class="line">    brand:&#x27;å¥”é©°&#x27;,</span><br><span class="line">    price:100</span><br><span class="line">  &#125;)</span><br><span class="line">  // ç”¨äºæ›´æ–°moneyçš„æ–¹æ³•</span><br><span class="line">  function updateMoney(value:number)&#123;</span><br><span class="line">    money.value += value</span><br><span class="line">  &#125;</span><br><span class="line">  // æä¾›æ•°æ®</span><br><span class="line">  provide(&#x27;moneyContext&#x27;,&#123;money,updateMoney&#125;)</span><br><span class="line">  provide(&#x27;car&#x27;,car)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶ä¸­ä¸ç”¨ç¼–å†™ä»»ä½•ä¸œè¥¿ï¼Œæ˜¯ä¸å—åˆ°ä»»ä½•æ‰“æ‰°çš„</p></blockquote><p>ã€ç¬¬äºŒæ­¥ã€‘å­™ç»„ä»¶ä¸­ä½¿ç”¨<code>inject</code>é…ç½®é¡¹æ¥å—æ•°æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   &lt;template&gt;</span><br><span class="line">     &lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">       &lt;h3&gt;æˆ‘æ˜¯å­™ç»„ä»¶&lt;/h3&gt;</span><br><span class="line">       &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">       &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">       &lt;button @click=&quot;updateMoney(6)&quot;&gt;ç‚¹æˆ‘&lt;/button&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">   </span><br><span class="line">   &lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">     import &#123; inject &#125; from &#x27;vue&#x27;;</span><br><span class="line">     // æ³¨å…¥æ•°æ®</span><br><span class="line">    let &#123;money,updateMoney&#125; = inject(&#x27;moneyContext&#x27;,&#123;money:0,updateMoney:(x:number)=&gt;&#123;&#125;&#125;)</span><br><span class="line">     let car = inject(&#x27;car&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-8-ã€piniaã€‘">6.8. ã€piniaã€‘</h2><p>å‚è€ƒä¹‹å‰<code>pinia</code>éƒ¨åˆ†çš„è®²è§£</p><h2 id="6-9-ã€slotã€‘">6.9. ã€slotã€‘</h2><h3 id="1-é»˜è®¤æ’æ§½">1. é»˜è®¤æ’æ§½</h3><p><img src="http://49.232.112.44/images/default_slot.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;!-- é»˜è®¤æ’æ§½ --&gt;</span><br><span class="line">            &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="2-å…·åæ’æ§½">2. å…·åæ’æ§½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;</span><br><span class="line">          &lt;template v-slot:s1&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template #s2&gt;</span><br><span class="line">            &lt;a href=&quot;&quot;&gt;æ›´å¤š&lt;/a&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">        &lt;template&gt;</span><br><span class="line">          &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">            &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="3-ä½œç”¨åŸŸæ’æ§½">3. ä½œç”¨åŸŸæ’æ§½</h3><ol><li><p>ç†è§£ï¼š<span style="color:red">æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚</span>ï¼ˆæ–°é—»æ•°æ®åœ¨<code>News</code>ç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±<code>App</code>ç»„ä»¶å†³å®šï¼‰</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;Game v-slot=&quot;params&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line"></span><br><span class="line">å­ç»„ä»¶ä¸­ï¼š</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">          &lt;h2&gt;ä»Šæ—¥æ¸¸æˆæ¦œå•&lt;/h2&gt;</span><br><span class="line">          &lt;slot :games=&quot;games&quot; a=&quot;å“ˆå“ˆ&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;</span><br><span class="line">        import &#123;reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">        let games = reactive([</span><br><span class="line">          &#123;id:&#x27;asgdytsa01&#x27;,name:&#x27;è‹±é›„è”ç›Ÿ&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa02&#x27;,name:&#x27;ç‹è€…è£è€€&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa03&#x27;,name:&#x27;çº¢è‰²è­¦æˆ’&#x27;&#125;,</span><br><span class="line">          &#123;id:&#x27;asgdytsa04&#x27;,name:&#x27;æ–—ç½—å¤§é™†&#x27;&#125;</span><br><span class="line">        ])</span><br><span class="line">      &lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ol><h1>7. å…¶å®ƒ API</h1><h2 id="7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘">7.1.ã€shallowRef ä¸ shallowReactive ã€‘</h2><h3 id="shallowRef"><code>shallowRef</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œä½†åªå¯¹é¡¶å±‚å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šåªè·Ÿè¸ªå¼•ç”¨å€¼çš„å˜åŒ–ï¼Œä¸å…³å¿ƒå€¼å†…éƒ¨çš„å±æ€§å˜åŒ–ã€‚</p></li></ol><h3 id="shallowReactive"><code>shallowReactive</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæµ…å±‚å“åº”å¼å¯¹è±¡ï¼Œåªä¼šä½¿å¯¹è±¡çš„æœ€é¡¶å±‚å±æ€§å˜æˆå“åº”å¼çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§åˆ™ä¸ä¼šå˜æˆå“åº”å¼çš„</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šå¯¹è±¡çš„é¡¶å±‚å±æ€§æ˜¯å“åº”å¼çš„ï¼Œä½†åµŒå¥—å¯¹è±¡çš„å±æ€§ä¸æ˜¯ã€‚</p></li></ol><h3 id="æ€»ç»“">æ€»ç»“</h3><blockquote><p>é€šè¿‡ä½¿ç”¨ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> å’Œ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> æ¥ç»•å¼€æ·±åº¦å“åº”ã€‚æµ…å±‚å¼ <code>API</code> åˆ›å»ºçš„çŠ¶æ€åªåœ¨å…¶é¡¶å±‚æ˜¯å“åº”å¼çš„ï¼Œå¯¹æ‰€æœ‰æ·±å±‚çš„å¯¹è±¡ä¸ä¼šåšä»»ä½•å¤„ç†ï¼Œé¿å…äº†å¯¹æ¯ä¸€ä¸ªå†…éƒ¨å±æ€§åšå“åº”å¼æ‰€å¸¦æ¥çš„æ€§èƒ½æˆæœ¬ï¼Œè¿™ä½¿å¾—å±æ€§çš„è®¿é—®å˜å¾—æ›´å¿«ï¼Œå¯æå‡æ€§èƒ½ã€‚</p></blockquote><h2 id="7-2-ã€readonly-ä¸-shallowReadonlyã€‘">7.2.ã€readonly ä¸ shallowReadonlyã€‘</h2><h3 id="readonly"><strong><code>readonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ·±åªè¯»å‰¯æœ¬ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å°†å˜ä¸ºåªè¯»ã€‚</li><li>ä»»ä½•å°è¯•ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œè¿˜ä¼šåœ¨æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šï¼‰ã€‚</li></ul></li><li><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>åˆ›å»ºä¸å¯å˜çš„çŠ¶æ€å¿«ç…§ã€‚</li><li>ä¿æŠ¤å…¨å±€çŠ¶æ€æˆ–é…ç½®ä¸è¢«ä¿®æ”¹ã€‚</li></ul></li></ol><h3 id="shallowReadonly"><strong><code>shallowReadonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šä¸ <code>readonly</code> ç±»ä¼¼ï¼Œä½†åªä½œç”¨äºå¯¹è±¡çš„é¡¶å±‚å±æ€§ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li><p>åªå°†å¯¹è±¡çš„é¡¶å±‚å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§ä»ç„¶æ˜¯å¯å˜çš„ã€‚</p></li><li><p>é€‚ç”¨äºåªéœ€ä¿æŠ¤å¯¹è±¡é¡¶å±‚å±æ€§çš„åœºæ™¯ã€‚</p></li></ul></li></ol><h2 id="7-3-ã€toRaw-ä¸-markRawã€‘">7.3.ã€toRaw ä¸ markRawã€‘</h2><h3 id="toRaw"><code>toRaw</code></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºè·å–ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„åŸå§‹å¯¹è±¡ï¼Œ <code>toRaw</code> è¿”å›çš„å¯¹è±¡ä¸å†æ˜¯å“åº”å¼çš„ï¼Œä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</p><blockquote><p>å®˜ç½‘æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºä¸´æ—¶è¯»å–è€Œä¸å¼•èµ·ä»£ç†è®¿é—®/è·Ÿè¸ªå¼€é”€ï¼Œæˆ–æ˜¯å†™å…¥è€Œä¸è§¦å‘æ›´æ”¹çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸å»ºè®®ä¿å­˜å¯¹åŸå§‹å¯¹è±¡çš„æŒä¹…å¼•ç”¨ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p></blockquote><blockquote><p>ä½•æ—¶ä½¿ç”¨ï¼Ÿ â€”â€” åœ¨éœ€è¦å°†å“åº”å¼å¯¹è±¡ä¼ é€’ç»™é <code>Vue</code> çš„åº“æˆ–å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ <code>toRaw</code> å¯ä»¥ç¡®ä¿å®ƒä»¬æ”¶åˆ°çš„æ˜¯æ™®é€šå¯¹è±¡</p></blockquote></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// å“åº”å¼å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="comment">// åŸå§‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citysd = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(person))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(rawPerson))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys2))</span><br></pre></td></tr></table></figure></li></ol><h3 id="markRaw"><code>markRaw</code></h3><ol><li><p>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶<strong>æ°¸è¿œä¸ä¼š</strong>å˜æˆå“åº”å¼çš„ã€‚</p><blockquote><p>ä¾‹å¦‚ä½¿ç”¨<code>mockjs</code>æ—¶ï¼Œä¸ºäº†é˜²æ­¢è¯¯æŠŠ<code>mockjs</code>å˜ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>markRaw</code> å»æ ‡è®°<code>mockjs</code></p></blockquote></li><li><p>ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda01&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;åŒ—äº¬&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda02&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda03&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;å¤©æ´¥&#x27;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">id</span>:<span class="string">&#x27;asdda04&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;é‡åº†&#x27;</span>&#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys)</span><br></pre></td></tr></table></figure></li></ol><h2 id="7-4-ã€customRefã€‘">7.4.ã€customRefã€‘</h2><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„<code>ref</code>ï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œé€»è¾‘æ§åˆ¶ã€‚</p><p>å®ç°é˜²æŠ–æ•ˆæœï¼ˆ<code>useSumRef.ts</code>ï¼‰ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;customRef &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params">initValue:<span class="built_in">string</span>,delay:<span class="built_in">number</span></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">timer</span>:<span class="built_in">number</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="title function_">track</span>() <span class="comment">// å‘Šè¯‰Vueæ•°æ®msgå¾ˆé‡è¦ï¼Œè¦å¯¹msgæŒç»­å…³æ³¨ï¼Œä¸€æ—¦å˜åŒ–å°±æ›´æ–°</span></span><br><span class="line">        <span class="keyword">return</span> initValue</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          initValue = value</span><br><span class="line">          <span class="title function_">trigger</span>() <span class="comment">//é€šçŸ¥Vueæ•°æ®msgå˜åŒ–äº†</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;) </span><br><span class="line">  <span class="keyword">return</span> &#123;msg&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><h1>8. Vue3æ–°ç»„ä»¶</h1><h2 id="8-1-ã€Teleportã€‘">8.1. ã€Teleportã€‘</h2><ul><li>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong>ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&#x27;body&#x27;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯å¼¹çª—ä¸­çš„ä¸€äº›å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="8-2-ã€Suspenseã€‘">8.2. ã€Suspenseã€‘</h2><ul><li>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li><li>ä½¿ç”¨æ­¥éª¤ï¼š<ul><li>å¼‚æ­¥å¼•å…¥ç»„ä»¶</li><li>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent,<span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">        &lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;</span><br><span class="line">        &lt;Suspense&gt;</span><br><span class="line">          &lt;template v-slot:default&gt;</span><br><span class="line">            &lt;Child/&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template v-slot:fallback&gt;</span><br><span class="line">            &lt;h3&gt;åŠ è½½ä¸­.......&lt;/h3&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘">8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘</h2><ul><li><code>app.component</code></li><li><code>app.config</code></li><li><code>app.directive</code></li><li><code>app.mount</code></li><li><code>app.unmount</code></li><li><code>app.use</code></li></ul><h2 id="8-4-ã€å…¶ä»–ã€‘">8.4.ã€å…¶ä»–ã€‘</h2><ul><li><p>è¿‡æ¸¡ç±»å <code>v-enter</code> ä¿®æ”¹ä¸º <code>v-enter-from</code>ã€è¿‡æ¸¡ç±»å <code>v-leave</code> ä¿®æ”¹ä¸º <code>v-leave-from</code>ã€‚</p></li><li><p><code>keyCode</code> ä½œä¸º <code>v-on</code> ä¿®é¥°ç¬¦çš„æ”¯æŒã€‚</p></li><li><p><code>v-model</code> æŒ‡ä»¤åœ¨ç»„ä»¶ä¸Šçš„ä½¿ç”¨å·²ç»è¢«é‡æ–°è®¾è®¡ï¼Œæ›¿æ¢æ‰äº† <code>v-bind.syncã€‚</code></p></li><li><p><code>v-if</code> å’Œ <code>v-for</code> åœ¨åŒä¸€ä¸ªå…ƒç´ èº«ä¸Šä½¿ç”¨æ—¶çš„ä¼˜å…ˆçº§å‘ç”Ÿäº†å˜åŒ–ã€‚</p></li><li><p>ç§»é™¤äº†<code>$on</code>ã€<code>$off</code> å’Œ <code>$once</code> å®ä¾‹æ–¹æ³•ã€‚</p></li><li><p>ç§»é™¤äº†è¿‡æ»¤å™¨ <code>filter</code>ã€‚</p></li><li><p>ç§»é™¤äº†<code>$children</code> å®ä¾‹ <code>propert</code>ã€‚</p><p>â€¦</p></li></ul>]]></content>
    
    
    <summary type="html">ğŸ—æœ¬æ–‡æ±‡æ€»Vue3.0ç¬”è®°åŸºç¡€æ•™ç¨‹ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Vue3" scheme="https://www.cameliia.top/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>NodejsåŸºç¡€æ•™ç¨‹</title>
    <link href="https://www.cameliia.top/posts/302.html"/>
    <id>https://www.cameliia.top/posts/302.html</id>
    <published>2023-03-20T10:19:03.000Z</published>
    <updated>2023-03-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Nodejs</h1><h2 id="ä»‹ç»">ä»‹ç»</h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚</p><p>å®˜æ–¹ç½‘å€ <a href="https://nodejs.org/en/">https://nodejs.org/en/</a>ï¼Œä¸­æ–‡ç«™ <a href="http://nodejs.cn/">http://nodejs.cn/</a></p><h2 id="ä½œç”¨">ä½œç”¨</h2><ul><li>è§£æè¿è¡Œ JS ä»£ç </li><li>æ“ä½œç³»ç»Ÿèµ„æºï¼Œå¦‚å†…å­˜ã€ç¡¬ç›˜ã€ç½‘ç»œ</li></ul><h2 id="åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</h2><ul><li>APP æ¥å£æœåŠ¡</li><li>ç½‘é¡µèŠå¤©å®¤</li><li>åŠ¨æ€ç½‘ç«™, ä¸ªäººåšå®¢, è®ºå›, å•†åŸç­‰</li><li>åç«¯çš„WebæœåŠ¡ï¼Œä¾‹å¦‚æœåŠ¡å™¨ç«¯çš„è¯·æ±‚ï¼ˆçˆ¬è™«ï¼‰ï¼Œä»£ç†è¯·æ±‚ï¼ˆè·¨åŸŸï¼‰</li><li>å‰ç«¯é¡¹ç›®æ‰“åŒ…(webpack, gulp)</li></ul><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><h3 id="ä¸‹è½½å®‰è£…">ä¸‹è½½å®‰è£…</h3><p>å·¥å…·ä¸€å®šè¦åˆ°å®˜æ–¹ä¸‹è½½ï¼Œå†å²ç‰ˆæœ¬ä¸‹è½½ <a href="https://npm.taobao.org/mirrors/node/">https://npm.taobao.org/mirrors/node/</a></p><p>![img](file://D:/project/git/h5200622-code/day09/%E8%AF%BE%E5%A0%82/1-NodeJS/%E8%AF%BE%E4%BB%B6/nodejs/assets/20190329115938531.png?lastModify=1599473396)</p><p>Nodejs çš„ç‰ˆæœ¬å·å¥‡æ•°ä¸ºå¼€å‘ç‰ˆæœ¬ï¼Œå¶æ•°ä¸ºå‘å¸ƒç‰ˆæœ¬ï¼Œ<span style="color:red">æˆ‘ä»¬é€‰æ‹©å¶æ•°å·çš„ LTS ç‰ˆæœ¬ï¼ˆé•¿æœŸç»´æŠ¤ç‰ˆæœ¬ long term serviceï¼‰</span></p><p>![1572676490692](file://D:/project/git/h5200622-code/day09/%E8%AF%BE%E5%A0%82/1-NodeJS/%E8%AF%BE%E4%BB%B6/nodejs/assets/1572676490692.png?lastModify=1599473415)</p><p>åŒå‡»æ‰“å¼€å®‰è£…æ–‡ä»¶ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ğŸ˜ï¼Œé»˜è®¤çš„å®‰è£…è·¯å¾„æ˜¯ <code>C:\Program Files\nodejs</code></p><p>å®‰è£…å®Œæˆåï¼Œåœ¨ CMD å‘½ä»¤è¡Œçª—å£ä¸‹è¿è¡Œ <code>node -v</code>ï¼Œå¦‚æ˜¾ç¤ºç‰ˆæœ¬å·åˆ™è¯æ˜å®‰è£…æˆåŠŸï¼Œåä¹‹å®‰è£…å¤±è´¥ï¼Œé‡æ–°å®‰è£…ã€‚</p><p>![1572678177784](file://D:/project/git/h5200622-code/day09/%E8%AF%BE%E5%A0%82/1-NodeJS/%E8%AF%BE%E4%BB%B6/nodejs/assets/1572678177784.png?lastModify=1599473424)</p><h3 id="åˆä½“éªŒ">åˆä½“éªŒ</h3><h4 id="äº¤äº’æ¨¡å¼">äº¤äº’æ¨¡å¼</h4><p>åœ¨å‘½ä»¤è¡Œä¸‹è¾“å…¥å‘½ä»¤ <code>node</code>ï¼Œè¿™æ—¶è¿›å…¥ nodejs çš„äº¤äº’æ¨¡å¼</p><p>![1572678681282](file://D:/project/git/h5200622-code/day09/%E8%AF%BE%E5%A0%82/1-NodeJS/%E8%AF%BE%E4%BB%B6/nodejs/assets/1572678681282.png?lastModify=1599473439)</p><h4 id="æ–‡ä»¶æ‰§è¡Œ">æ–‡ä»¶æ‰§è¡Œ</h4><p>åˆ›å»ºæ–‡ä»¶ hello.js ï¼Œå¹¶å†™å…¥ä»£ç  console.log(â€˜hello worldâ€™)ï¼Œå‘½ä»¤è¡Œè¿è¡Œ <code>node hello.js</code></p><p>å¿«é€Ÿå¯åŠ¨å‘½ä»¤è¡Œçš„æ–¹æ³•</p><ul><li>åœ¨æ–‡ä»¶å¤¹ä¸Šæ–¹çš„è·¯å¾„ä¸­ï¼Œç›´æ¥è¾“å…¥ cmd å³å¯</li><li>ä½¿ç”¨ webstorm å’Œ vscode è‡ªå¸¦çš„å‘½ä»¤è¡Œçª—å£</li></ul><p>![1572680753835](file://D:/project/git/h5200622-code/day09/%E8%AF%BE%E5%A0%82/1-NodeJS/%E8%AF%BE%E4%BB%B6/nodejs/assets/1572680753835.png?lastModify=1599473449)</p><h4 id="VScode-æ’ä»¶è¿è¡Œ">VScode æ’ä»¶è¿è¡Œ</h4><p>å®‰è£…æ’ä»¶ ã€code Runnerã€, æ–‡ä»¶å³é”® -&gt; run code</p><p>![1593782861500](file://D:/project/git/h5200622-code/day09/%E8%AF%BE%E5%A0%82/1-NodeJS/%E8%AF%BE%E4%BB%B6/nodejs/assets/1593782861500.png?lastModify=1599473460)</p><h4 id="æ³¨æ„">æ³¨æ„</h4><p><span style="color:red">åœ¨ nodejs ç¯å¢ƒä¸‹ï¼Œä¸èƒ½ä½¿ç”¨ BOM å’Œ DOM ï¼Œä¹Ÿæ²¡æœ‰å…¨å±€å¯¹è±¡ windowå’Œdocuï¼Œå…¨å±€å¯¹è±¡çš„åå­—å« global</span></p><h3 id="Buffer-ç¼“å†²å™¨">Buffer(ç¼“å†²å™¨)</h3><h4 id="ä»‹ç»-2">ä»‹ç»</h4><p>Buffer æ˜¯ä¸€ä¸ªå’Œæ•°ç»„ç±»ä¼¼çš„å¯¹è±¡ï¼Œä¸åŒæ˜¯ Buffer æ˜¯ä¸“é—¨ç”¨æ¥ä¿å­˜äºŒè¿›åˆ¶æ•°æ®çš„</p><h4 id="ç‰¹ç‚¹">ç‰¹ç‚¹</h4><ul><li>å¤§å°å›ºå®šï¼šåœ¨åˆ›å»ºæ—¶å°±ç¡®å®šäº†ï¼Œä¸”æ— æ³•è°ƒæ•´</li><li>æ€§èƒ½è¾ƒå¥½ï¼šç›´æ¥å¯¹è®¡ç®—æœºçš„å†…å­˜è¿›è¡Œæ“ä½œ</li><li>æ¯ä¸ªå…ƒç´ å¤§å°ä¸º 1 å­—èŠ‚ï¼ˆbyteï¼‰</li></ul><h4 id="æ“ä½œ">æ“ä½œ</h4><h5 id="åˆ›å»º-Buffer">åˆ›å»º Buffer</h5><ul><li>ç›´æ¥åˆ›å»º Buffer.alloc</li><li>ä¸å®‰å…¨åˆ›å»º Buffer.allocUnsafe</li><li>é€šè¿‡æ•°ç»„å’Œå­—ç¬¦ä¸²åˆ›å»º Buffer.from</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10å­—èŠ‚çš„Buffer</span></span><br><span class="line"><span class="keyword">let</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> buf2 = <span class="title class_">Buffer</span>.<span class="title function_">allocUnsafe</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> buf3 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;iloveyou&quot;</span>);</span><br></pre></td></tr></table></figure><h5 id="Buffer-è¯»å–å’Œå†™å…¥">Buffer è¯»å–å’Œå†™å…¥</h5><p>å¯ä»¥ç›´æ¥é€šè¿‡ <code>[]</code> çš„æ–¹å¼å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨ toString æ–¹æ³•å°† Buffer è¾“å‡ºä¸ºå­—ç¬¦ä¸²</p><ul><li>==[ ]== å¯¹ buffer è¿›è¡Œè¯»å–å’Œè®¾ç½®</li><li>==toString== å°† Buffer è½¬åŒ–ä¸ºå­—ç¬¦ä¸²</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Bufferå†…å®¹çš„è¯»å–å’Œè®¾ç½®</span></span><br><span class="line"><span class="keyword">let</span> res = buf3[<span class="number">1</span>]; <span class="comment">// ç»“æœä¸º10è¿›åˆ¶çš„æ•°å­—</span></span><br><span class="line"><span class="comment">// è·å–å­—ç¬¦ä¸²å½¢å¼</span></span><br><span class="line"><span class="keyword">let</span> res2 = buf3.<span class="title function_">toString</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å†…å®¹</span></span><br><span class="line">buf3[<span class="number">0</span>] = <span class="number">120</span>;</span><br></pre></td></tr></table></figure><h5 id="å…³äºæº¢å‡º">å…³äºæº¢å‡º</h5><p>æº¢å‡ºçš„é«˜ä½æ•°æ®ä¼šèˆå¼ƒ</p><h5 id="å…³äºä¸­æ–‡">å…³äºä¸­æ–‡</h5><p>ä¸€ä¸ª UTF-8 çš„ä¸­æ–‡å­—ç¬¦==å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯å  3 ä¸ªå­—èŠ‚==</p><h5 id="å…³äºå•ä½æ¢ç®—">å…³äºå•ä½æ¢ç®—</h5><p>1Bit å¯¹åº”çš„æ˜¯ 1 ä¸ªäºŒè¿›åˆ¶ä½</p><p>8 Bit = 1 å­—èŠ‚ï¼ˆByteï¼‰</p><p>1024Byte = 1KB</p><p>1024KB = 1MB</p><p>1024MB = 1GB</p><p>1024GB = 1TB</p><p>å¹³æ—¶æ‰€è¯´çš„ç½‘é€Ÿ 10M 20M 100M è¿™é‡ŒæŒ‡çš„æ˜¯ Bit ï¼Œæ‰€ä»¥ç†è®ºä¸‹è½½é€Ÿåº¦ é™¤ä»¥ 8 æ‰æ˜¯æ­£å¸¸çš„ç†è§£çš„ä¸‹è½½é€Ÿåº¦</p><h3 id="æ–‡ä»¶ç³»ç»Ÿ-fs">æ–‡ä»¶ç³»ç»Ÿ fs</h3><p>fs å…¨ç§°ä¸º file systemï¼Œæ˜¯ NodeJS ä¸­çš„å†…ç½®æ¨¡å—ï¼Œå¯ä»¥å¯¹è®¡ç®—æœºä¸­çš„æ–‡ä»¶è¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰æ“ä½œã€‚</p><h5 id="æ–‡ä»¶å†™å…¥">æ–‡ä»¶å†™å…¥</h5><ul><li>ç®€å•å†™å…¥<ul><li>==ï¼ˆå¼•å…¥æ¨¡å—ï¼‰const fs = require(â€œfsâ€);==</li><li>fs.writeFile(filePath, data, [,options], callback);</li><li>fs.writeFileSync(file, data);</li><li>options é€‰é¡¹<ul><li><code>encoding</code> <strong>é»˜è®¤å€¼:</strong> <code>'utf8'</code></li><li><code>mode</code><strong>é»˜è®¤å€¼:</strong> <code>0o666</code></li><li><code>flag</code> <strong>é»˜è®¤å€¼:</strong> <code>'w'</code></li></ul></li></ul></li><li>æµå¼å†™å…¥<ul><li>fs.createWriteStream(path[, options])<ul><li>path</li><li>options<ul><li>==flags==   <strong>é»˜è®¤å€¼:</strong> <code>'w'</code></li><li><code>encoding </code><strong>é»˜è®¤å€¼:</strong> <code>'utf8'</code></li><li><code>mode</code>   <strong>é»˜è®¤å€¼:</strong> <code>0o666</code></li></ul></li><li>äº‹ä»¶ç›‘å¬ open  close  eg:  ws.on(â€˜openâ€™, function(){});</li></ul></li></ul></li></ul><h5 id="æ–‡ä»¶è¯»å–">æ–‡ä»¶è¯»å–</h5><ul><li><p>ç®€å•è¯»å–</p><ul><li>fs.readFile(file, function(err, data){})</li><li>fs.readFileSync(file)</li></ul></li><li><p>æµå¼è¯»å–</p><ul><li>fs.createReadStream();</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶,dataæ˜¯ç¡®å®šå¥½çš„ï¼Œä¸èƒ½æ›´æ”¹</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&quot;data&quot;</span>,<span class="function">(<span class="params">chunk</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(chunk.<span class="title function_">toString</span>());</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å…³äºå°æ–‡ä»¶çš„è¯»å–-------readFile</span></span><br><span class="line"><span class="comment">// å…³äºå¤§æ–‡ä»¶çš„è¯»å–-------createReadStream</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;index-å‰¯æœ¬.html&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ç§æ–¹æ³•</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&quot;data&quot;</span>,<span class="function"><span class="params">chunk</span>=&gt;</span>&#123;</span><br><span class="line">    ws.<span class="title function_">write</span>(chunk);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ç¬¬äºŒç§æ–¹æ³•</span></span><br><span class="line">rs.<span class="title function_">pipe</span>(ws);</span><br></pre></td></tr></table></figure></li></ul><h5 id="æ–‡ä»¶åˆ é™¤">æ–‡ä»¶åˆ é™¤</h5><ul><li>fs.unlink(â€˜./test.logâ€™, function(err){});</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fs.unlink(è·¯å¾„,fun)</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.<span class="title function_">unlink</span>(<span class="string">&quot;bak.ini&quot;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤æ–‡ä»¶&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>fs.unlinkSync(â€˜./move.txtâ€™);</li></ul><h5 id="ç§»åŠ¨æ–‡ä»¶-é‡å‘½å">ç§»åŠ¨æ–‡ä»¶ + é‡å‘½å</h5><ul><li>fs.rename(â€˜./1.logâ€™, â€˜2.logâ€™, function(err){})</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fs.rename(oldname,newname,fun);</span></span><br><span class="line"><span class="comment">// æ”¹åå‘½ä»¤åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ä¼šæŠ¥é”™ ï¼ˆno such file or directoryï¼‰</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&quot;index,html&quot;</span>,<span class="string">&quot;home.html&quot;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ”¹åæˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»åŠ¨æ–‡ä»¶</span></span><br><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&quot;index.html&quot;</span>,<span class="string">&quot;./file/home.html&quot;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç§»åŠ¨æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>fs.renameSync(â€˜1.logâ€™,â€˜2.logâ€™)</li></ul><h5 id="æ–‡ä»¶å¤¹æ“ä½œ">æ–‡ä»¶å¤¹æ“ä½œ</h5><ul><li>mkdir  åˆ›å»ºæ–‡ä»¶å¤¹<ul><li>path</li><li>options<ul><li>recursive æ˜¯å¦é€’å½’è°ƒç”¨</li><li>mode  æƒé™ é»˜è®¤ä¸º 0o777</li></ul></li><li>callback</li></ul></li><li>rmdir åˆ é™¤æ–‡ä»¶å¤¹</li><li>readdir  è¯»å–æ–‡ä»¶å¤¹</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fs.mkdir(path,[,option],callback)</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.<span class="title function_">mkdir</span>(<span class="string">&quot;./project&quot;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ›å»ºæ–‡ä»¶å¤¹æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ–‡ä»¶å¤¹,å¦‚æœæ–‡ä»¶å¤¹éç©ºï¼Œä½¿ç”¨recursiveæ¥ä¸€æ­¥æ¸…ç©º</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&quot;./project&quot;</span>,&#123;<span class="attr">recursive</span>:<span class="literal">true</span>&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">     <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åˆ é™¤æ–‡ä»¶å¤¹æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯»å–æ–‡ä»¶å¤¹</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(<span class="string">&quot;d:/&quot;</span>,<span class="function">(<span class="params">err,files</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(files);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="å…³äºè·¯å¾„">å…³äºè·¯å¾„</h5><ul><li>ç›¸å¯¹è·¯å¾„<ul><li>./index.html</li><li>â€¦/images/logo.png</li><li>index.html</li></ul></li><li>ç»å¯¹è·¯å¾„<ul><li>D:/www/share/day10/index.html (windows)</li><li>/home/root/index.html</li></ul></li></ul><p>fsæ¨¡å—ä¸­ï¼Œå‚æ•°è·¯å¾„å¦‚æœä¸º<strong>ç›¸å¯¹è·¯å¾„</strong>çš„è¯ï¼Œå‚ç…§ç‰©æ˜¯==æ‰§è¡Œå‘½ä»¤æ—¶æ‰€åœ¨çš„å·¥ä½œç›®å½•==</p><p>__dirname å…¨å±€å˜é‡ï¼Œå§‹ç»ˆä¿å­˜çš„æ˜¯==å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„==</p><h5 id="æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€-fs-stat">æŸ¥çœ‹æ–‡ä»¶çš„çŠ¶æ€( fs.stat() )</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line">fs.<span class="title function_">stat</span>(__dirname+<span class="string">&quot;index.html&quot;</span>,<span class="function">(<span class="params">err,stats</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stats);</span><br><span class="line">   <span class="comment">// æ£€æŸ¥ç›®æ ‡èµ„æºæ˜¯å¦ä¸ºæ–‡ä»¶å¤¹</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stats.<span class="title function_">isDirectory</span>());</span><br><span class="line">   <span class="comment">// æ£€æŸ¥ç›®æ ‡èµ„æºæ˜¯å¦ä¸ºæ–‡ä»¶</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stats.<span class="title function_">isFile</span>());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="é™„å½•">é™„å½•</h2><h3 id="unicode-å­—ç¬¦é›†">unicode å­—ç¬¦é›†</h3><ul><li><p><a href="https://www.tamasoft.co.jp/en/general-info/unicode.html">https://www.tamasoft.co.jp/en/general-info/unicode.html</a></p></li><li><p><a href="https://www.cnblogs.com/whiteyun/archive/2010/07/06/1772218.html">https://www.cnblogs.com/whiteyun/archive/2010/07/06/1772218.html</a></p></li></ul>]]></content>
    
    
    <summary type="html">ğŸŒ®æœ¬æ–‡æ±‡æ€»NodejsåŸºç¡€æ•™ç¨‹ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Nodejs" scheme="https://www.cameliia.top/tags/Nodejs/"/>
    
  </entry>
  
  <entry>
    <title>Reactå…¨å®¶æ¡¶</title>
    <link href="https://www.cameliia.top/posts/400.html"/>
    <id>https://www.cameliia.top/posts/400.html</id>
    <published>2023-03-20T10:19:03.000Z</published>
    <updated>2023-03-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Reactå…¨å®¶æ¡¶(æŠ€æœ¯æ ˆ)</h1><p>è‹±æ–‡å®˜ç½‘:<a href="https://reactjs.org">https://reactjs.org</a></p><h3 id="ä¸€ã€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h3><h4 id="1-ä»‹ç»æè¿°">1.ä»‹ç»æè¿°</h4><p>â€‹    â‘  ç”¨äºåŠ¨æ€æ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“(åªå…³æ³¨äºè§†å›¾)</p><p>â€‹    â‘¡ç”±Facebookå¼€æº</p><h4 id="2-ç‰¹ç‚¹">2.ç‰¹ç‚¹</h4><ul><li>å£°æ˜å¼ç¼–ç </li><li>ç»„ä»¶åŒ–ç¼–ç </li><li>React Native ç¼–å†™åŸç”Ÿåº”ç”¨</li><li>é«˜æ•ˆï¼ˆä¼˜ç§€çš„Diffingç®—æ³•ï¼‰</li></ul><h4 id="3-é«˜æ•ˆåŸå› ">3.é«˜æ•ˆåŸå› </h4><p>ä½¿ç”¨è™šæ‹Ÿ(virtual)DOM, ä¸æ€»æ˜¯ç›´æ¥æ“ä½œé¡µé¢çœŸå®DOM</p><p>DOM Diffingç®—æ³•, æœ€å°åŒ–é¡µé¢é‡ç»˜</p><h3 id="äºŒã€åŸºæœ¬ä½¿ç”¨">äºŒã€åŸºæœ¬ä½¿ç”¨</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ï¼Œç”¨äºè®©reactæ¸²æŸ“ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¸‹é¢ä¸€å®šè¦å°†javascriptæ”¹ä¸ºbabelï¼Œå«ä¹‰æ˜¯ï¼šè®©babelç¿»è¯‘scriptæ ‡ç­¾ä¸­çš„ä»£ç ã€‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//1.åˆ›å»ºè™šæ‹ŸDOM</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> <span class="comment">//æ­¤å¤„ä¸€å®šä¸è¦å†™å¼•å·ï¼Œå› ä¸ºVDOMä¸æ˜¯å­—ç¬¦ä¸²ï¼ï¼ï¼</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//2.åˆ©ç”¨ReactDOM.render(è™šæ‹ŸDOM,å®¹å™¨) æ–¹æ³•å°†è™šæ‹ŸDOMæ’å…¥æŒ‡å®šå®¹å™¨</span></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-åˆ›å»ºè™šæ‹ŸDOMçš„ä¸¤ç§æ–¹å¼">1.åˆ›å»ºè™šæ‹ŸDOMçš„ä¸¤ç§æ–¹å¼</h4><p>==â‘ ==</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>â‘¡ï¼ˆä¸æ¨èï¼‰</p><p>-----------------------React.createElement(æ ‡ç­¾å,{æ ‡ç­¾å±æ€§},æ ‡ç­¾ä½“å†…å®¹)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">VDOM</span> = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>,&#123;<span class="attr">id</span>:<span class="string">&#x27;title&#x27;</span>&#125;,<span class="string">&#x27;Hello,React&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="2-è™šæ‹ŸDOMä¸çœŸå®DOM">2.è™šæ‹ŸDOMä¸çœŸå®DOM</h4><ul><li>è™šæ‹ŸDOMçš„æœ¬è´¨å°±æ˜¯Objectç±»å‹çš„ä¸€èˆ¬å¯¹è±¡ã€‚</li><li>è™šæ‹ŸDOMæ¯”è¾ƒâ€œè½»â€ï¼ŒçœŸå®DOMæ¯”è¾ƒâ€œé‡â€ï¼Œå› ä¸ºè™šæ‹ŸDOMæ˜¯ç»™reactç”¨çš„,æ— éœ€é‚£ä¹ˆå¤šçš„å±æ€§ã€‚</li><li>æˆ‘ä»¬ç¼–ç æ—¶åŸºæœ¬åªéœ€è¦æ“ä½œreactçš„è™šæ‹ŸDOMç›¸å…³æ•°æ®ï¼Œè™šæ‹ŸDOMå¯¹è±¡æœ€ç»ˆéƒ½ä¼šè¢«Reactè½¬æ¢ä¸ºçœŸå®çš„DOMã€‚</li></ul><h4 id="span-style-color-red-3-jsxçš„è¯­æ³•è§„åˆ™-span"><span style='color:red'>3.jsxçš„è¯­æ³•è§„åˆ™</span></h4><ul><li><pre><code>    **&lt;span style='color:red'&gt;åˆ›å»ºè™šæ‹ŸDOMæ—¶ï¼Œä¸è¦ç”¨å¼•å·&lt;/span&gt;ã€‚**</code></pre></li><li><pre><code>   **æ ‡ç­¾ä¸­æƒ³æ··å…¥jsè¡¨è¾¾å¼ï¼Œéœ€è¦ç”¨&lt;span style='color:red'&gt; &#123;&#125;&lt;/span&gt;åŒ…è£¹ã€‚**</code></pre></li><li><pre><code>        **&lt;span style='color:red'&gt;æ ¹æ ‡ç­¾&lt;/span&gt;å¿…é¡»åªæœ‰&lt;span style='color:red'&gt;ä¸€ä¸ª&lt;/span&gt;**</code></pre></li><li><pre><code>        **æ ‡ç­¾å¿…é¡»&lt;span style='color:red'&gt;é—­åˆ&lt;/span&gt;**</code></pre></li><li><pre><code>        **&lt;span style='color:red'&gt;æ ·å¼çš„ç±»å&lt;/span&gt;ï¼Œä¸è¦ç”¨classï¼Œå¿…é¡»ç”¨&lt;span style='color:red'&gt;className&lt;/span&gt;**</code></pre></li><li><pre><code>         **&lt;span style='color:red'&gt;å†…è”çš„æ ·å¼&lt;/span&gt;è¦ç”¨ &lt;span style='color:red'&gt;style=&#123;&#123;&#125;&#125;&lt;/span&gt;å½¢å¼å»å†™**</code></pre></li><li><pre><code>         **æ ‡ç­¾å¯ä»¥éšæ„çš„ç¼–å†™ï¼š**</code></pre></li></ul><p>â€‹                  <strong>(1).è‹¥æ ‡ç­¾é¦–å­—æ¯æ˜¯ã€å°å†™ã€‘çš„ï¼Œåˆ™reactä¼šå°è¯•å°†å½“å‰çš„jsxæ ‡ç­¾å¯¹åº”æˆä¸€ä¸ªhtmlæ ‡ç­¾</strong></p><p>â€‹                          <strong>è‹¥å¯¹åº”æˆäº†ï¼Œç›´æ¥æ¸²æŸ“ï¼Œå±•ç¤ºã€‚</strong></p><p>â€‹                          <strong>è‹¥æ— æ³•å¯¹åº”ï¼Œç›´æ¥æŠ¥é”™ï¼</strong></p><p>â€‹                  <strong>(2).è‹¥æ ‡ç­¾é¦–å­—æ¯æ˜¯ã€å¤§å†™ã€‘çš„ï¼Œåˆ™reactä¼šæŸ¥æ‰¾Hahaç»„ä»¶çš„å®šä¹‰çš„ä½ç½®</strong></p><p>â€‹                          <strong>è‹¥æ‰¾è§äº†ï¼Œç›´æ¥æ¸²æŸ“Hahaç»„ä»¶</strong></p><p>â€‹                          <strong>è‹¥æœªæ‰¾è§ï¼ŒæŠ¥é”™(Haha is not defined)</strong></p><h4 id="4-åŒºåˆ†jsè¯­å¥ä¸jsè¡¨è¾¾å¼">4.åŒºåˆ†jsè¯­å¥ä¸jsè¡¨è¾¾å¼</h4><p>â€‹       â‘ è¡¨è¾¾å¼ï¼šä¸€ä¸ªè¡¨è¾¾å¼ä¼šäº§ç”Ÿä¸€ä¸ªå€¼ï¼Œå¯ä»¥æ”¾åœ¨ä»»ä½•ä¸€ä¸ªéœ€è¦å€¼çš„åœ°æ–¹ä¸‹é¢è¿™äº›éƒ½æ˜¯è¡¨è¾¾å¼ï¼š<br>â€‹(1). a<br>â€‹(2). a+b<br>â€‹(3). demo(1)<br>â€‹(4). arr.map()<br>â€‹(5). function test () {}<br>â€‹        â‘¡è¯­å¥(ä»£ç )ï¼šä¸‹é¢è¿™äº›éƒ½æ˜¯è¯­å¥(ä»£ç )ï¼š<br>â€‹(1).if(){}<br>â€‹(2).for(){}<br>â€‹(3).switch(){case:xxxx}</p><h4 id="å¤‡æ³¨ï¼š">å¤‡æ³¨ï¼š</h4><p>==â‘ æ•°ç»„ï¼ˆArrayï¼‰.map( )æ–¹æ³•==ï¼š</p><p>â€‹                   ç”¨æ¥ç”Ÿæˆ / åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚<br>â€‹                           å…¶ç»“æœæ˜¯ è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´  è°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åçš„è¿”å›å€¼ã€‚<br>â€‹                           map ä¸ä¿®æ”¹åŸæ•°ç»„æœ¬èº«</p><p>â€‹                   æ‰€ä»¥mapæ–¹æ³•å¿…é¡»æœ‰è¿”å›å€¼ï¼Œå¦‚æœæ²¡æœ‰returnï¼Œé‚£ä¹ˆæ–°æ•°ç»„çš„æ¯ä¸€é¡¹éƒ½ä¸ºundefinedï¼Œæ•°ç»„çš„ä¸ªæ•°ä¸åŸæ•°ç»„ä¸€æ ·</p><p><span style='color:red; font-size:18px; font-weight:700'> â‘¡reactå¯ä»¥è‡ªåŠ¨éå†æ•°ç»„ï¼Œä½†æ˜¯ä¸å¯ä»¥éå†å¯¹è±¡</span></p><h3 id="ä¸‰ã€æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–">ä¸‰ã€æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–</h3><h4 id="1-æ¨¡å—ä¸æ¨¡å—åŒ–">1.æ¨¡å—ä¸æ¨¡å—åŒ–</h4><ul><li><p>ç†è§£ï¼šå‘å¤–æä¾›ç‰¹å®šåŠŸèƒ½çš„jsç¨‹åº, ä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªjsæ–‡ä»¶</p></li><li><p>ä¸ºä»€ä¹ˆè¦æ‹†æˆæ¨¡å—ï¼šéšç€ä¸šåŠ¡é€»è¾‘å¢åŠ ï¼Œä»£ç è¶Šæ¥è¶Šå¤šä¸”å¤æ‚ã€‚</p></li><li><p>ä½œç”¨ï¼šå¤ç”¨js, ç®€åŒ–jsçš„ç¼–å†™, æé«˜jsè¿è¡Œæ•ˆç‡</p><p>==å½“åº”ç”¨çš„jséƒ½ä»¥æ¨¡å—æ¥ç¼–å†™çš„, è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„åº”ç”¨==</p></li></ul><h4 id="2-ç»„ä»¶ä¸ç»„ä»¶åŒ–">2.ç»„ä»¶ä¸ç»„ä»¶åŒ–</h4><ul><li><p>ç†è§£ï¼šç”¨æ¥å®ç°å±€éƒ¨åŠŸèƒ½æ•ˆæœçš„ä»£ç å’Œèµ„æºçš„é›†åˆ(html/css/js/imageç­‰ç­‰)</p></li><li><p>ä¸ºä»€ä¹ˆè¦ç”¨ç»„ä»¶ï¼š ä¸€ä¸ªç•Œé¢çš„åŠŸèƒ½æ›´å¤æ‚</p></li><li><p>ä½œç”¨ï¼šå¤ç”¨ç¼–ç , ç®€åŒ–é¡¹ç›®ç¼–ç , æé«˜è¿è¡Œæ•ˆç‡</p><p>==å½“åº”ç”¨æ˜¯ä»¥å¤šç»„ä»¶çš„æ–¹å¼å®ç°, è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨==</p></li></ul><h4 id="3-ç»„ä»¶">3.ç»„ä»¶</h4><p><span style='color:red'><strong>â‘ å‡½æ•°å¼ç»„ä»¶</strong></span></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt; </span><br><span class="line"><span class="comment">//1.å®šä¹‰ç»„ä»¶(å‡½æ•°å¼ç»„ä»¶)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>)&#123;<span class="comment">//å‡½æ•°å¼ç»„ä»¶ å‡½æ•°åå­—å¼€å¤´å¤§å†™</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//æ­¤å¤„çš„thisæ˜¯undefinedï¼Œå› ä¸ºç»è¿‡babelçš„ç¼–è¯‘åï¼Œå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ã€‚</span></span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ç”¨å‡½æ•°å®šä¹‰çš„ç»„ä»¶ï¼ˆé€‚ç”¨äºã€ç®€å•ç»„ä»¶ã€‘çš„å®šä¹‰ï¼‰<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢ </span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  æ‰§è¡Œäº†ReactDOM.renderåï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</span></span><br><span class="line"><span class="comment">  1.Reactå‘ç°äº†&lt;MyComponent/&gt;æ ‡ç­¾ï¼Œå»å¯»æ‰¾MyComponentç»„ä»¶å®šä¹‰çš„ä½ç½®ï¼Œå‘ç°MyComponentæ˜¯ç”¨å‡½æ•°å®šä¹‰çš„ã€‚</span></span><br><span class="line"><span class="comment">  2.Reactè°ƒç”¨MyComponentå¹¶è·å–MyComponentè¿”å›çš„è™šæ‹ŸDOMï¼Œéšåè½¬ä¸ºçœŸå®DOMï¼Œéšåæ¸²æŸ“åˆ°é¡µé¢ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><span style='color:red'><strong>â‘¡ç±»å¼ç»„ä»¶</strong></span></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt; </span><br><span class="line"><span class="comment">//å®šä¹‰ç»„ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//renderæ˜¯æ”¾åœ¨å“ªé‡Œçš„ï¼Ÿ â€”â€”â€”â€”â€”â€” MyComponentçš„åŸå‹å¯¹è±¡ä¸Šï¼Œæ˜¯ç»™MyComponentçš„å®ä¾‹å¯¹è±¡ç”¨çš„ã€‚</span></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//MyComponentçš„å®ä¾‹å¯¹è±¡ &lt;==&gt; MyComponentç»„ä»¶å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ç”¨ç±»å®šä¹‰çš„ç»„ä»¶ï¼ˆé€‚ç”¨äºã€å¤æ‚ç»„ä»¶ã€‘çš„å®šä¹‰ï¼‰<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  æ‰§è¡Œäº†ReactDOM.renderåï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</span></span><br><span class="line"><span class="comment">  1.Reactå‘ç°äº†&lt;MyComponent/&gt;æ ‡ç­¾ï¼Œå»å¯»æ‰¾MyComponentç»„ä»¶å®šä¹‰çš„ä½ç½®ï¼Œå‘ç°MyComponentæ˜¯ç”¨ç±»å®šä¹‰çš„ã€‚</span></span><br><span class="line"><span class="comment">  2.React newäº†ä¸€ä¸ªMyComponentå®ä¾‹å¯¹è±¡--m</span></span><br><span class="line"><span class="comment">  3.é€šè¿‡mè°ƒç”¨åˆ°äº†MyComponentåŸå‹ä¸Šçš„renderæ–¹æ³•ï¼Œå¹¶è·å–åˆ°äº†è¿”å›çš„è™šæ‹ŸDOMï¼Œéšåè½¬ä¸ºçœŸå®DOMï¼Œæ”¾åœ¨é¡µé¢ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="4-ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§">4.ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§æ ¸å¿ƒå±æ€§</h4><p>â‘ stateï¼š</p><p>stateæ˜¯ç»„ä»¶å¯¹è±¡æœ€é‡è¦çš„å±æ€§, å€¼æ˜¯å¯¹è±¡(å¯ä»¥åŒ…å«å¤šä¸ªkey-valueçš„ç»„åˆ)</p><p>state(çŠ¶æ€æœº)é€šè¿‡æ›´æ–°ç»„ä»¶çš„stateæ¥æ›´æ–°å¯¹åº”çš„é¡µé¢æ˜¾ç¤º(é‡æ–°æ¸²æŸ“ç»„ä»¶)ã€‚</p><p>åŸºæœ¬ä½¿ç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt; </span><br><span class="line"><span class="comment">//1.å®šä¹‰ç»„ä»¶----ç±»å¼ç»„ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Weather</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//æ„é€ å™¨è°ƒç”¨å‡ æ¬¡ï¼Ÿ-------- çœ‹ä½ ç»„ä»¶ç”¨å‡ æ¬¡</span></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line"><span class="variable language_">super</span>(props)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">isHot</span>:<span class="literal">true</span>,<span class="attr">wind</span>:<span class="string">&#x27;å¾®é£&#x27;</span>&#125; <span class="comment">//åˆå§‹åŒ–çŠ¶æ€,isHotç”¨äºæ ‡è¯†å¤©æ°”çƒ­ä¸çƒ­</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">changeWeather</span> = <span class="variable language_">this</span>.<span class="property">changeWeather</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>) <span class="comment">//è§£å†³thisæŒ‡å‘é—®é¢˜</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//changeWeatherè°ƒç”¨å‡ æ¬¡ï¼Ÿ-------- çœ‹ä½ ç‚¹å‡ æ¬¡</span></span><br><span class="line"><span class="title function_">changeWeather</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//è‹¥æ„é€ å™¨ä¸­ä¸åšå¤„ç†ï¼Œé‚£ä¹ˆä¸‹é¢çš„thisæ˜¯undefinedï¼Œå› ä¸ºchangeWeatherä¸æ˜¯é€šè¿‡å®ä¾‹è°ƒç”¨çš„ï¼Œè€Œæ˜¯ä½œä¸ºç‚¹å‡»çš„å›è°ƒå»ä½¿ç”¨ï¼Œä¸”ç±»ä¸­çš„æ–¹æ³•è‡ªåŠ¨å¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ã€‚</span></span><br><span class="line"><span class="comment">//console.log(&#x27;changeWeatherçš„thisæ˜¯&#x27;,this); </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸¥é‡æ³¨æ„ï¼šçŠ¶æ€(state)ä¸­çš„å€¼æ˜¯ä¸èƒ½ç›´æ¥ä¿®æ”¹çš„ï¼ï¼ï¼ï¼ä¸‹é¢è¿™ä¸€è¡Œå°±æ˜¯ç›´æ¥ä¿®æ”¹</span></span><br><span class="line"><span class="comment">//this.state.isHot = true</span></span><br><span class="line">                    </span><br><span class="line"><span class="comment">//è·å–åŸæ¥çš„stateä¸­çš„isHotå€¼</span></span><br><span class="line"><span class="keyword">const</span> &#123;isHot&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="comment">//æ›´æ–°çŠ¶æ€</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">isHot</span>:!isHot&#125;) <span class="comment">//æ­¤å¤„æ›´æ–°çŠ¶æ€æ˜¯ä¸€ä¸ªåˆå¹¶çš„åŠ¨ä½œï¼Œä¸æ˜¯æ›¿æ¢</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//renderè°ƒå‡ æ¬¡ï¼Ÿ--------- 1+næ¬¡ï¼ˆnæ˜¯æ›´æ–°çŠ¶æ€çš„æ¬¡æ•°ï¼‰</span></span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">                    <span class="comment">//Reactä¸­çš„ç»‘å®šå•å‡»äº‹ä»¶æ˜¯onClickå…¶ä¸­Cå¤§å†™</span></span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeWeather&#125;</span>&gt;</span>ä»Šå¤©å¤©æ°”å¾ˆ&#123;this.state.isHot ? &#x27;ç‚çƒ­&#x27; : &#x27;å‡‰çˆ½&#x27;&#125;ï¼Œ&#123;this.state.wind&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.æ¸²æŸ“ç»„ä»¶</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Weather</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>==ç®€å†™æ¨¡å¼==</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt; </span><br><span class="line"><span class="comment">//1.å®šä¹‰ç»„ä»¶----ç±»å¼ç»„ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Weather</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">state = &#123;<span class="attr">isHot</span>:<span class="literal">true</span>,<span class="attr">wind</span>:<span class="string">&#x27;å¾®é£23&#x27;</span>&#125; <span class="comment">//åˆå§‹åŒ–çŠ¶æ€</span></span><br><span class="line"><span class="comment">//äº‹ä»¶çš„å›è°ƒéƒ½éœ€è¦å†™æˆèµ‹å€¼è¯­å¥+ç®­å¤´å‡½æ•°çš„å½¢å¼</span></span><br><span class="line">changeWeather = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;changeWeather&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123;isHot&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span><br><span class="line">&#125;</span><br><span class="line">render ()&#123;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeWeather&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">ä»Šå¤©å¤©æ°”å¾ˆ&#123;this.state.isHot ? &#x27;ç‚çƒ­&#x27; : &#x27;å‡‰çˆ½&#x27;&#125;ï¼Œ&#123;this.state.wind&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.æ¸²æŸ“ç»„ä»¶</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Weather</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="æ³¨æ„">æ³¨æ„:</h5><p>â€‹                          <span style='color:red'> ç»„ä»¶ä¸­renderæ–¹æ³•ä¸­çš„thisä¸ºç»„ä»¶å®ä¾‹å¯¹è±¡</span></p><p>â€‹                           <span style='color:red'>  ç»„ä»¶è‡ªå®šä¹‰çš„æ–¹æ³•ä¸­thisä¸ºundefinedï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</span><br>â€‹                                     <span style='color:red'>a)å¼ºåˆ¶ç»‘å®šthis: é€šè¿‡å‡½æ•°å¯¹è±¡çš„bind()</span><br>â€‹                                     <span style='color:red'>b)ç®­å¤´å‡½æ•°:é€šè¿‡ç®­å¤´å‡½æ•°çš„thisç”±å¤–å±‚ä½œç”¨åŸŸçš„thiså†³å®šè¿™ä¸€ç‰¹æ€§</span></p><p>â€‹                             <span style='color:red'>çŠ¶æ€æ•°æ®ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹æˆ–æ›´æ–° éœ€è¦é€šè¿‡setState({})</span></p><p>â‘¡propsï¼š</p><p>â€‹     æ¯ä¸ªç»„ä»¶å¯¹è±¡éƒ½ä¼šæœ‰props(propertiesçš„ç®€å†™)å±æ€§ï¼Œå€¼æ˜¯å¯¹è±¡(åŒ…æ‹¬å‡½æ•°å¼ç»„ä»¶)</p><p>â€‹     ç»„ä»¶æ ‡ç­¾çš„æ‰€æœ‰å±æ€§éƒ½ä¿å­˜åœ¨propsä¸­</p><p>â€‹     ==é€šè¿‡æ ‡ç­¾å±æ€§ä»ç»„ä»¶å¤–å‘ç»„ä»¶å†…ä¼ é€’å˜åŒ–çš„æ•°æ®==</p><p>åŸºæœ¬ä½¿ç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt; </span><br><span class="line"><span class="comment">//å®šä¹‰ç»„ä»¶(ç±»)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>å§“åï¼š&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>æ€§åˆ«ï¼š&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>å¹´é¾„ï¼š&#123;age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ¸²æŸ“ç»„ä»¶</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;tom&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;å¥³&quot;</span> <span class="attr">age</span>=<span class="string">&quot;18&quot;</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line"><span class="keyword">const</span> p1 = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;ç¨‹è€å¸ˆ&#x27;</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;ç”·&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸‹é¢çš„...p1ï¼Œå¹¶ä¸æ˜¯åŸç”Ÿjsé‡Œçš„&#123;...p1&#125;,babel+reactç¯å¢ƒå°±å¯ä»¥è®©å±•å¼€è¿ç®—ç¬¦å±•å¼€ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä»…ä»…é€‚ç”¨äºä¼ é€’æ ‡ç­¾å±æ€§ï¼ï¼</span></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> &#123;<span class="attr">...p1</span>&#125;/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test2&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å¯¹propsä¸­çš„å±æ€§å€¼è¿›è¡Œç±»å‹é™åˆ¶å’Œå¿…è¦æ€§é™åˆ¶:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥prop-typesï¼Œç”¨äºåˆ¶å®šå¯¹propsé™åˆ¶çš„å…·ä½“è§„åˆ™ </span></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;../js/prop-types.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//å®šä¹‰ç»„ä»¶(ç±»)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//å¯¹ä¼ ç»™Personç»„ä»¶çš„propsè¿›è¡Œç±»å‹çš„é™åˆ¶</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">static</span> propTypes = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">name</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>, <span class="comment">//é™åˆ¶nameå¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">sex</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,<span class="comment">//é™åˆ¶sexå¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œä¸”æ˜¯å¿…è¦å±æ€§</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">age</span>:<span class="title class_">PropTypes</span>.<span class="property">number</span>,<span class="comment">//é™åˆ¶ageå¿…é¡»ä¸ºæ•°å€¼ç±»å‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">address</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>, <span class="comment">//é™åˆ¶addresså¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//å¯¹ä¼ ç»™Personç»„ä»¶çš„propsè¿›è¡Œé»˜è®¤å€¼çš„è®¾ç½®</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">static</span> defaultProps = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">address</span>:<span class="string">&#x27;ä¸­å›½&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>å‡½æ•°ç»„ä»¶çš„propså±æ€§ï¼ˆäº†è§£ï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt; </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">props</span>)&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;name,age,sex,address&#125; = props</span><br><span class="line"><span class="comment">//å¯¹ä¼ ç»™Personç»„ä»¶çš„propsè¿›è¡Œç±»å‹çš„é™åˆ¶</span></span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>å§“åï¼š&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>æ€§åˆ«ï¼š&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>å¹´é¾„ï¼š&#123;age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>åœ°å€ï¼š&#123;address&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Person</span>.<span class="property">propTypes</span> = &#123;</span><br><span class="line"><span class="attr">name</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>, <span class="comment">//é™åˆ¶nameå¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line"><span class="attr">sex</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>,<span class="comment">//é™åˆ¶sexå¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œä¸”æ˜¯å¿…è¦å±æ€§</span></span><br><span class="line"><span class="attr">age</span>:<span class="title class_">PropTypes</span>.<span class="property">number</span>,<span class="comment">//é™åˆ¶ageå¿…é¡»ä¸ºæ•°å€¼ç±»å‹</span></span><br><span class="line"><span class="attr">address</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>, <span class="comment">//é™åˆ¶addresså¿…é¡»ä¸ºå­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯¹ä¼ ç»™Personç»„ä»¶çš„propsè¿›è¡Œé»˜è®¤å€¼çš„è®¾ç½®</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property">defaultProps</span> = &#123;</span><br><span class="line"><span class="attr">address</span>:<span class="string">&#x27;ä¸­å›½&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="å¤‡æ³¨ï¼š-2">å¤‡æ³¨ï¼š</h4><p>â€‹     â‘ script type=â€œtext/babelâ€ ç»è¿‡==babel==ç¼–è¯‘çš„ å¼€å¯ä¸¥æ ¼æ¨¡å¼ ==æ™®é€šå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘ç”±windowå˜ä¸ºundefined==</p><p>â€‹     â‘¡ ES6==ç±»(class)==ä¸­æ‰€æœ‰æ–¹æ³•è‡ªåŠ¨å¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ ==æ™®é€šå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘ç”±windowå˜ä¸ºundefined==</p><p>â€‹     â‘¢æ‰©å±•è¿ç®—ç¬¦(â€¦)æ— æ³•å±•å¼€ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å¯ä»¥é€šè¿‡ const newObject ={â€¦object} è¿›è¡Œå¯¹è±¡å¤åˆ¶</p>]]></content>
    
    
    <summary type="html">ğŸ¥™æœ¬æ–‡æ±‡æ€»Reactå…¨å®¶æ¡¶ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="React" scheme="https://www.cameliia.top/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>PromiseåŸºç¡€æ•™ç¨‹</title>
    <link href="https://www.cameliia.top/posts/303.html"/>
    <id>https://www.cameliia.top/posts/303.html</id>
    <published>2023-03-20T10:19:03.000Z</published>
    <updated>2023-03-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Promise</h1><h2 id="1-Promiseçš„ä»‹ç»">1. Promiseçš„ä»‹ç»</h2><ul><li><p>å®ƒæ˜¯ä¸€é—¨æ–°çš„æŠ€æœ¯ï¼ˆES6ä¸­å¼•å…¥ï¼‰ï¼Œæ˜¯JSä¸­è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ–°è§£å†³æ–¹æ³•ï¼Œè§£å†³äº†å°±æ–¹æ¡ˆä¸­çš„å›è°ƒåœ°ç‹±é—®é¢˜ã€‚</p></li><li><p>åœ¨promiseçš„è¯­æ³•ä¸Šæ¥çœ‹ï¼Œ<strong>å®ƒæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°</strong>ï¼›promiseå¯¹è±¡ç”¨æ¥å°è£…ä¸€ä¸ªå¼‚æ­¥æ“ä½œå¹¶å¯ä»¥è·å–æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœå€¼ã€‚</p></li><li><p>çŠ¶æ€æ”¹å˜ä¸Šåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼šä¸”ä¸€ä¸ªpromiseå¯¹è±¡çš„çŠ¶æ€åªèƒ½æ”¹å˜ä¸€æ¬¡</p><p>â€‹pending ----&gt; resolved</p><p>â€‹pending ----&gt; rejected</p></li><li><p>promiseçš„åŸºæœ¬æµç¨‹ï¼šå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200915182146260.png" alt="image-20200915182146260"></p></li></ul><h2 id="2-Promiseçš„åŸºæœ¬ä½¿ç”¨">2. Promiseçš„åŸºæœ¬ä½¿ç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºpromiseå¯¹è±¡ï¼Œåˆšåˆ›å»ºçš„å¯¹è±¡çŠ¶æ€ä¸ºpendingï¼ŒæŒ‡å®šæ‰§è¡Œå™¨å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// åœ¨æ‰§è¡Œå™¨å‡½æ•°ä¸­å¯åŠ¨å¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line">    fs.<span class="title function_">readFile</span>(<span class="string">&quot;./index.html&quot;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœçŠ¶æ€ä¸ºå¤±è´¥ï¼Œå°±è°ƒç”¨reject()</span></span><br><span class="line">        <span class="keyword">if</span> (err) <span class="title function_">reject</span>(err);</span><br><span class="line">        <span class="comment">// å¦‚æœçŠ¶æ€ä¸ºæˆåŠŸï¼Œå°±è°ƒç”¨resolve()</span></span><br><span class="line">        <span class="title function_">resolve</span>(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜åï¼Œå°±è°ƒç”¨thenæ–¹æ³•</span></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;,<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¤±è´¥&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-Promiseä¸­çš„API">3. Promiseä¸­çš„API</h2><h3 id="1-å®ä¾‹å¯¹è±¡çš„æ–¹æ³•">1. å®ä¾‹å¯¹è±¡çš„æ–¹æ³•</h3><ul><li><p>Promiseæ„é€ å‡½æ•°ï¼Œnew Promiseï¼ˆexcutor{ }ï¼‰ï¼Œæ‰§è¡Œå™¨å‡½æ•°ï¼ˆåŒæ­¥ï¼‰</p></li><li><p>Promise.prototype.then(onResolved, onRejected) ------ æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œå¤±è´¥çš„å›è°ƒå‡½æ•°ï¼ˆå¼‚æ­¥ï¼‰</p></li><li><p>Promise.prototype.catch(onRejectedï¼‰ï¼Œä¸“é—¨ç”¨æ¥è§£å†³å¤±è´¥çš„å›è°ƒå‡½æ•°ï¼ˆå¼‚æ­¥ï¼‰</p><p>.then()æ–¹æ³•ä¸­å¯ä»¥åªä¼ å…¥æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œå¤±è´¥çš„å›è°ƒéƒ½äº¤ç»™catchæ¥è§£å†³</p></li></ul><h3 id="2-å‡½æ•°å¯¹è±¡çš„æ–¹æ³•">2.   å‡½æ•°å¯¹è±¡çš„æ–¹æ³•</h3><ul><li>Promise.resolve() æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›Promiseå¯¹è±¡<ol><li>å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯éPromiseç±»å‹çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿”å›çš„è¿™ä¸ªpromiseå¯¹è±¡çš„çŠ¶æ€æ˜¯resolveï¼Œå€¼å°±æ˜¯ä¼ å…¥çš„å‚æ•°çš„å€¼</li><li>å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œé‚£ä¹ˆä¼ å…¥çš„promiseå¯¹è±¡çš„çŠ¶æ€å°±å†³å®šäº†è¿”å›çš„è¿™ä¸ªpromiseå¯¹è±¡çš„çŠ¶æ€ï¼Œå€¼å°±æ˜¯é‡Œé¢çš„promiseå¯¹è±¡ä¸­çš„å€¼</li><li>ä½œç”¨ï¼šå¿«é€Ÿå¯¹æ•°æ®è¿›è¡ŒåŒ…è£¹ï¼Œè¿›è¡Œpromiseçš„è½¬æ¢ï¼Œæ–¹ä¾¿åé¢çš„æ“ä½œã€‚</li></ol></li><li>Promise.reject()æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå§‹ç»ˆæ˜¯è¿”å›ä¸€ä¸ªå¤±è´¥çš„promiseå¯¹è±¡<br>1. æ— è®ºä¼ å…¥çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œç»“æœéƒ½æ˜¯ä¸€ä¸ªå¤±è´¥çŠ¶æ€çš„Promiseå¯¹è±¡ï¼Œä¸”å¤±è´¥çš„å€¼å°±æ˜¯ä¼ å…¥çš„å‚æ•°çš„å€¼ã€‚</li><li>Promise.all()ï¼Œæ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªå€¼éƒ½æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¿”å›çš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡<ol><li>å¦‚æœæ•°ç»„ä¸­æ‰€æœ‰å¯¹è±¡çš„çŠ¶æ€éƒ½ä¸ºæˆåŠŸï¼Œé‚£ä¹ˆè¿”å›çš„promiseå¯¹è±¡çš„çŠ¶æ€ä¸ºæˆåŠŸï¼ŒæˆåŠŸçš„å€¼å’Œæ•°ç»„ä¸­çš„é¡ºåºä¸€ä¸€å¯¹åº”ï¼›å¦‚æœæœ‰ä¸€ä¸ªä¸ºå¤±è´¥ï¼Œé‚£ä¹ˆè¿”å›çš„promiseå¯¹è±¡çš„çŠ¶æ€å°±ä¸ºå¤±è´¥ï¼Œä¸”å¤±è´¥çš„å€¼å°±æ˜¯é‚£ä¹ˆå¤±è´¥çš„å¯¹è±¡çš„å€¼ï¼Œå¦‚æœå‡ ä¸ªå€¼éƒ½å¤±è´¥äº†ï¼Œé‚£ä¹ˆè°å…ˆå¤±è´¥è°å°±å†³å®šç»“æœã€‚</li></ol></li><li>Promise.race() æ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªå€¼éƒ½æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¿”å›çš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ ï¼Œç»“æœç”±æœ€å…ˆæ”¹å˜çŠ¶æ€çš„é‚£ä¸ªpromiseå†³å®šã€‚</li></ul><h2 id="4-async-await-ï¼ˆå›è°ƒåœ°ç‹±çš„ç»ˆæè§£å†³æ–¹æ¡ˆï¼‰">4. async / await ï¼ˆå›è°ƒåœ°ç‹±çš„ç»ˆæè§£å†³æ–¹æ¡ˆï¼‰</h2><p>asyncå‡½æ•°æ˜¯Generatorå‡½æ•°çš„è¯­æ³•ç³–ã€‚ä½†æ˜¯ç›¸æ¯”Generatorè€Œè¨€ï¼Œasyncä¸éœ€è¦è°ƒç”¨nextæ–¹æ³•æ‰èƒ½æ‰§è¡Œï¼Œå®ƒè‡ªå¸¦æ‰§è¡Œå™¨ï¼ˆawaitï¼‰ã€‚</p><ul><li><p>è¯­ä¹‰</p><p>asyncè¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawaitè¡¨ç¤ºç´§è·Ÿåœ¨åçš„è¡¨è¾¾å¼éœ€è¦<strong>ç­‰å¾…ç»“æœ</strong></p></li><li><p>awaitçš„è¿”å›å€¼</p><p>awaitåé¢ï¼Œå¯ä»¥è·ŸPromiseå¯¹è±¡ï¼ˆå¼‚æ­¥ï¼‰æˆ–åŸå§‹ç±»å‹çš„å€¼ï¼ˆNumberï¼ŒStringï¼ŒBooleanï¼‰ï¼ˆåŒæ­¥ï¼‰; å¦‚æœå®ƒçš„è¿”å›å€¼æ˜¯Promiseå¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨thenæŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œï¼›å¦‚æœæ˜¯éPromiseå¯¹è±¡ï¼Œå°±è¿”å›ç›¸åº”çš„å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> <span class="number">123</span>; <span class="comment">// ç›¸å½“äºreturn 123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(<span class="function"><span class="params">v</span>=&gt;</span><span class="variable language_">console</span>.<span class="title function_">log</span>(v)); <span class="comment">// 123</span></span><br><span class="line"><span class="comment">//************************************</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœawaitåé¢çš„Promiseæ˜¯rejectçŠ¶æ€ï¼Œæ•´ä¸ªasyncå‡½æ•°ä¼šä¸­æ–­æ‰§è¡Œã€‚è¿™æ—¶éœ€è¦catchæ¥æ¥æ”¶rejectçš„å‚æ•°</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">v</span>)=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(v)&#125;)</span><br><span class="line">   .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(e)&#125;) <span class="comment">//å‡ºé”™äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ********************************************</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœä¸å¸Œæœ›ç¬¬ä¸€å¼‚æ­¥æ“ä½œå¤±è´¥å»å½±å“ç¬¬äºŒä¸ªå¼‚æ­¥æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨try...catch..æ¥å¤„ç†</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;å‡ºé”™äº†&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&quot;æˆåŠŸæ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>().<span class="title function_">then</span>(<span class="function"><span class="params">v</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(v)&#125;) <span class="comment">// æˆåŠŸæ‰§è¡Œäº†</span></span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(e)&#125;);</span><br></pre></td></tr></table></figure></li><li><p>asyncå‡½æ•°å†…éƒ¨å¦‚æœæœ‰returnçš„å€¼ï¼Œä¼šæˆä¸ºthenæ–¹æ³•çš„å‚æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello async&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(<span class="function"><span class="params">v</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(v)&#125;); <span class="comment">// hello async</span></span><br></pre></td></tr></table></figure></li><li><p>asyncåé¢çš„Promiseå¯¹è±¡çš„çŠ¶æ€å˜åŒ–</p><p>ç”±äºasyncå‡½æ•°è¿”å›çš„éƒ½æ˜¯Promiseå¯¹è±¡ï¼Œå› æ­¤ï¼Œå¿…é¡»ç­‰åˆ°asyncå†…éƒ¨æ‰€æœ‰çš„awaitå‘½ä»¤åé¢çš„Promiseå¯¹è±¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€å˜åŒ–ï¼›é™¤éé‡åˆ°returnè¯­å¥æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“asyncå‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œéƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œthenæ–¹æ³•çš„å›è°ƒå‡½æ•°ï¼‰ã€‚</p></li></ul><h2 id="5-promiseä¸­çš„å‡ ä¸ªå…³é”®é—®é¢˜">5. promiseä¸­çš„å‡ ä¸ªå…³é”®é—®é¢˜</h2><ol><li><p>å¦‚ä½•æ”¹å˜promiseçš„çŠ¶æ€</p><ul><li>resolve å‡½æ•°pending ----&gt; resolve</li><li>reject å‡½æ•°       pending ----&gt; reject</li><li>æŠ›å‡ºå¼‚å¸¸ throw   pending ----&gt; reject</li></ul><ol start="2"><li>ä¸€ä¸ªpromiseæŒ‡å®šå¤šä¸ªå›è°ƒå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯è°ƒç”¨å¤šä¸ªthenæˆ–catchæ–¹æ³•ï¼‰ï¼Œéƒ½ä¼šè°ƒç”¨å—ï¼Ÿ</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;æˆåŠŸ&quot;</span>)</span><br><span class="line">&#125;);</span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">alert</span>(value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>åªè¦promiseçš„çŠ¶æ€æ”¹å˜äº†ï¼Œé‚£ä¹ˆ<strong>å¯¹åº”çš„å›è°ƒéƒ½ä¼šè¿è¡Œ</strong></li></ul><ol start="3"><li>æ”¹å˜promiseçš„çŠ¶æ€å’ŒæŒ‡å®šå›è°ƒå‡½æ•°é‚£ä¸ªå…ˆæ‰§è¡Œ? (éƒ½æœ‰å¯èƒ½)</li></ol><p>è¿™ä¸¤ä¸ªçš„æ‰§è¡Œé¡ºåºä¸»è¦æ˜¯ç”±æ‰§è¡Œå™¨å‡½æ•°å†…éƒ¨å°è£…çš„ä»»åŠ¡å†³å®šçš„ï¼Œå¦‚æœå°è£…çš„æ˜¯åŒæ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆpromiseå¯¹è±¡çš„çŠ¶æ€å…ˆæ”¹å˜ï¼ŒæŒ‡å®šå›è°ƒåæ‰§è¡Œï¼›å¦‚æœå°è£…çš„æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆæƒ…å†µå°±åè¿‡æ¥äº†ï¼›</p><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯æŒ‡å®šå›è°ƒåœ¨å‰ï¼ˆthenè°ƒç”¨ï¼‰ï¼Œæ”¹å˜çŠ¶æ€åœ¨åï¼ˆresolveï¼Œrejectï¼‰ï¼›</p><ol start="4"><li>promise.then()çš„è¿”å›çš„æ–°promiseå¯¹è±¡çš„ç»“æœç”±ä»€ä¹ˆå†³å®šï¼Ÿ</li></ol><p>ç”±thenæŒ‡å®šçš„å›è°ƒå‡½æ•°æ‰§è¡Œçš„ç»“æœå†³å®š</p><ul><li>æŠ›å‡ºå¼‚å¸¸ï¼Œæ–°promiseçš„çŠ¶æ€å˜ä¸ºrejectedï¼Œreasonä¸ºæŠ›å‡ºçš„å¼‚å¸¸</li><li>è¿”å›çš„æ˜¯épromiseçš„ä»»æ„æ•°æ®ï¼Œæ–°promiseçš„çŠ¶æ€å˜ä¸ºresolvedï¼Œvalueä¸ºè¿”å›çš„å€¼</li><li>è¿”å›çš„æ˜¯å¦ä¸€ä¸ªæ–°çš„promiseï¼Œè¿™ä¸ªpromiseçš„çŠ¶æ€å°±ä¼šæˆä¸ºthenè¿”å›çš„é‚£ä¸ªpromiseå¯¹è±¡çš„çŠ¶æ€</li></ul><ol start="5"><li>ä½¿ç”¨thenæ–¹æ³•çš„é“¾å¼è°ƒç”¨æ¥ä¸²è”å¤šä¸ªæ“ä½œä»»åŠ¡ï¼Œå½“ä½¿ç”¨äº†thençš„é“¾å¼è°ƒç”¨ï¼Œå¯ä»¥åœ¨æœ€åå†è¿›è¡Œå¤±è´¥çš„å›è°ƒï¼Œè¿™æ—¶åˆ©ç”¨äº†promiseçš„å¼‚å¸¸ç©¿é€åŸç†ï¼›æƒ³è¦ä¸­æ–­é“¾å¼è°ƒç”¨æ—¶ï¼Œå°±åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€ä¸ªpendingçŠ¶æ€çš„promiseå¯¹è±¡ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;Ok&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value,<span class="number">1111</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value,<span class="number">2222</span>);</span><br><span class="line">    <span class="comment">// å¦‚æœä¸æƒ³æ‰§è¡Œåˆ°3333ï¼Œå°±è¿”å›ä¸€ä¸ªpendingçŠ¶æ€çš„promiseå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// return new Promise(()=&gt;&#123;&#125;);</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value,<span class="number">3333</span>);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">reason</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason,<span class="number">4444</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¾“å‡ºç»“æœä¸º:</span></span><br><span class="line"><span class="comment"> ok 1111</span></span><br><span class="line"><span class="comment"> undefined 222   ç»“æœä¸ºundefinedæ˜¯å› ä¸ºå‰ä¸€ä¸ªthenæ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤ä¸ºundefined</span></span><br><span class="line"><span class="comment"> undefined 333 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h2 id="6-JSå¼‚æ­¥ä¹‹çº¢é˜Ÿåˆ—å’Œå¾®é˜Ÿåˆ—">6. JSå¼‚æ­¥ä¹‹çº¢é˜Ÿåˆ—å’Œå¾®é˜Ÿåˆ—</h2><h3 id="1-åŸç†å›¾">1. åŸç†å›¾</h3><p><img src="https://img-blog.csdnimg.cn/20191111155015676.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MDAxMzgxNw==,size_16,color_FFFFFF,t_70" alt="img"></p><h3 id="2-JSä¸­ç”¨æ¥å­˜å‚¨å¾…æ‰§è¡Œå›è°ƒå‡½æ•°çš„é˜Ÿåˆ—åŒ…å«2ä¸ªï¼š">2. JSä¸­ç”¨æ¥å­˜å‚¨å¾…æ‰§è¡Œå›è°ƒå‡½æ•°çš„é˜Ÿåˆ—åŒ…å«2ä¸ªï¼š</h3><p>å®é˜Ÿåˆ—ï¼šç”¨æ¥ä¿å­˜å¾…æ‰§è¡Œçš„å®ä»»åŠ¡ï¼ˆå›è°ƒï¼‰</p><pre><code>* å®šæ—¶å™¨çš„å›è°ƒ* DOMäº‹ä»¶å›è°ƒ* AJAXå›è°ƒ</code></pre><p>å¾®é˜Ÿåˆ—ï¼šç”¨æ¥ä¿å­˜å¾…æ‰§è¡Œçš„å¾®ä»»åŠ¡ï¼ˆå›è°ƒï¼‰</p><ul><li>promiseå›è°ƒ</li><li>MutationObserverå›è°ƒ</li></ul><p>JSçš„æ‰§è¡Œé¡ºåºï¼šå…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼Œç¢°åˆ°å¼‚æ­¥ä»»åŠ¡å°±å°†å…¶æ”¾å…¥å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ˆå®é˜Ÿåˆ—&amp;å¾®é˜Ÿåˆ—ï¼‰ï¼›åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œæ¯æ¬¡å‡†å¤‡æ‰§è¡Œå®é˜Ÿåˆ—ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥å¾®é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡åœ¨ç­‰å¾…æ‰§è¡Œï¼Œæœ‰å°±å…ˆæ‰§è¡Œå¾®é˜Ÿåˆ—çš„ä»»åŠ¡ï¼›æœ€åå†æ‰§è¡Œå®é˜Ÿåˆ—ä¸­çš„å¾…æ‰§è¡Œä»»åŠ¡ã€‚</p><h2 id="7-promiseçš„ç›¸å…³é¢˜ç›®">7. promiseçš„ç›¸å…³é¢˜ç›®</h2><ul><li><p>ç¬¬ä¸€é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;,<span class="number">0</span>)</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// 3 2 4 1</span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒé¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// 2 5 3 4 1</span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">first</span> = (<span class="params"></span>) =&gt; (<span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">7</span>)</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>)</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="number">6</span>)</span><br><span class="line">      &#125;, <span class="number">0</span>)</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="number">1</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">2</span>)</span><br><span class="line">    p.<span class="title function_">then</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(arg)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;))</span><br><span class="line"><span class="title function_">first</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">arg</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br><span class="line"><span class="comment">// 3 7 4 1 2 5</span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬å››é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;0&quot;</span>)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;        </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;3&quot;</span>)</span><br><span class="line">      <span class="title function_">resolve</span>()</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;      </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;4&quot;</span>)</span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;       </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;5&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;  </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;6&quot;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;7&quot;</span>)</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;         </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;8&quot;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="comment">// 1 7 2 3 8 4 6 5 0</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">ğŸ¥ªæœ¬æ–‡æ±‡æ€»PromiseåŸºç¡€æ•™ç¨‹ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Promise" scheme="https://www.cameliia.top/tags/Promise/"/>
    
  </entry>
  
  <entry>
    <title>webpacké…ç½®æ•™ç¨‹</title>
    <link href="https://www.cameliia.top/posts/309.html"/>
    <id>https://www.cameliia.top/posts/309.html</id>
    <published>2023-03-20T10:19:03.000Z</published>
    <updated>2023-03-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="webpackå¿«é€Ÿå…¥é—¨æ•™ç¨‹">webpackå¿«é€Ÿå…¥é—¨æ•™ç¨‹</h2><h3 id="1ã€webpack-ä»‹ç»">1ã€webpack ä»‹ç»</h3><ul><li>ä»€ä¹ˆæ˜¯webpack<a href="https://www.webpackjs.com/">https://www.webpackjs.com/</a><ul><li>Webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨(bundler)ã€‚</li><li>åœ¨Webpackçœ‹æ¥, å‰ç«¯çš„æ‰€æœ‰èµ„æºæ–‡ä»¶(js/json/css/img/less/â€¦)éƒ½ä¼šä½œä¸ºæ¨¡å—å¤„ç†</li><li>å®ƒå°†æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»è¿›è¡Œé™æ€åˆ†æï¼Œç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æº</li></ul></li><li>äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µ<ul><li>Entryï¼šå…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹</li><li>Outputï¼šoutput å±æ€§å‘Šè¯‰ webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶</li><li>Loaderï¼šloader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶</li><li>Pluginsï¼šæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼šæ‰“åŒ…ä¼˜åŒ–ã€å‹ç¼©ï¼Œ</li><li>Modeï¼šæ¨¡å¼ï¼Œæœ‰ç”Ÿäº§æ¨¡å¼ production å’Œå¼€å‘æ¨¡å¼ development</li></ul></li><li>ç†è§£ Loader<ul><li>Webpack æœ¬èº«åªèƒ½åŠ è½½ JS/JSON æ¨¡å—ï¼Œå¦‚æœè¦åŠ è½½å…¶ä»–ç±»å‹çš„æ–‡ä»¶(æ¨¡å—)ï¼Œå°±éœ€è¦ä½¿ç”¨å¯¹åº”çš„loader è¿›è¡Œè½¬æ¢/åŠ è½½</li><li>Loader æœ¬èº«ä¹Ÿæ˜¯è¿è¡Œåœ¨ node.js ç¯å¢ƒä¸­çš„ JavaScript æ¨¡å—</li><li>loader ä¸€èˆ¬ä»¥ xxx-loader çš„æ–¹å¼å‘½åï¼Œxxx ä»£è¡¨äº†è¿™ä¸ª loader è¦åšçš„è½¬æ¢åŠŸèƒ½ï¼Œæ¯”å¦‚ less-loaderã€‚</li></ul></li><li>ç†è§£ Plugins<ul><li>æ’ä»¶å¯ä»¥å®Œæˆä¸€äº›loaderä¸èƒ½å®Œæˆçš„åŠŸèƒ½ã€‚</li><li>æ’ä»¶çš„ä½¿ç”¨ä¸€èˆ¬æ˜¯åœ¨ webpack çš„é…ç½®ä¿¡æ¯ plugins é€‰é¡¹ä¸­æŒ‡å®šã€‚</li></ul></li><li>é…ç½®æ–‡ä»¶(é»˜è®¤)<ul><li>webpack.config.js : æ˜¯ä¸€ä¸ªnodeæ¨¡å—ï¼Œè¿”å›ä¸€ä¸ª json æ ¼å¼çš„é…ç½®ä¿¡æ¯å¯¹è±¡</li></ul></li></ul><h3 id="2ã€webpack-å®‰è£…">2ã€webpack å®‰è£…</h3><ul><li>npm åˆå§‹åŒ–</li><li>å®‰è£… webpack<ul><li>npm install webpack webpack-cli -g  //å…¨å±€å®‰è£…,ä½œä¸ºæŒ‡ä»¤ä½¿ç”¨</li><li>npm install webpack webpack-cli -D //æœ¬åœ°å®‰è£…,ä½œä¸ºæœ¬åœ°ä¾èµ–ä½¿ç”¨</li></ul></li></ul><h3 id="3ã€ç¼–è¯‘æ‰“åŒ…åº”ç”¨">3ã€ç¼–è¯‘æ‰“åŒ…åº”ç”¨</h3><ul><li><p>åˆ›å»ºjsæ–‡ä»¶</p><ul><li>src/js/app.js</li><li>src/js/module1.js</li><li>src/js/module2.js</li><li>src/js/module3.js</li></ul></li><li><p>åˆ›å»ºjsonæ–‡ä»¶</p><ul><li>src/json/data.json</li></ul></li><li><p>åˆ›å»ºä¸»é¡µé¢:</p><ul><li>src/index.html</li></ul></li><li><p>è¿è¡ŒæŒ‡ä»¤</p><ul><li><p>å¼€å‘é…ç½®æŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack src/js/app.js -o build/js/app.js --mode=development</span><br></pre></td></tr></table></figure><blockquote><p>webpack èƒ½å¤Ÿç¼–è¯‘æ‰“åŒ… js å’Œ json æ–‡ä»¶ï¼Œå¹¶ä¸”èƒ½å°† es6 çš„æ¨¡å—åŒ–è¯­æ³•è½¬æ¢æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„è¯­æ³•</p></blockquote></li><li><p>ç”Ÿäº§é…ç½®æŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack src/js/app.js -o build/js/app.js --mode=production</span><br></pre></td></tr></table></figure><blockquote><p>production é…ç½®èƒ½å¤Ÿå‹ç¼©ä»£ç </p></blockquote></li></ul></li><li><p>ç»“è®ºï¼š</p><ul><li>webpackèƒ½å¤Ÿç¼–è¯‘æ‰“åŒ… js å’Œ json æ–‡ä»¶</li><li>èƒ½å°† es6 çš„æ¨¡å—åŒ–è¯­æ³•è¿›è¡Œä»£ç æ‰“åŒ…</li><li>èƒ½å‹ç¼©ä»£ç </li></ul></li><li><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸èƒ½ç¼–è¯‘æ‰“åŒ… cssã€img ç­‰æ–‡ä»¶</li><li>ä¸èƒ½å°† js çš„ es6 åŸºæœ¬è¯­æ³•è½¬åŒ–ä¸º es5 è¯­æ³•</li><li>æ‰“åŒ…å‘½ä»¤å¤æ‚</li></ul></li></ul><h3 id="4ã€ä½¿ç”¨-webpack-é…ç½®æ–‡ä»¶">4ã€ä½¿ç”¨ webpack é…ç½®æ–‡ä»¶</h3><ul><li>ç›®çš„ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å®šä¹‰é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œè¿˜åŸä»¥ä¸ŠåŠŸèƒ½</li><li>æ–‡ä»¶åç§°ï¼šwebpack.config.js</li><li>æ–‡ä»¶å†…å®¹ï¼š  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//nodeå†…ç½®æ ¸å¿ƒæ¨¡å—ï¼Œç”¨æ¥è®¾ç½®è·¯å¾„ã€‚</span></span><br><span class="line">   <span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line">   <span class="comment">//åªèƒ½ä½¿ç”¨ CommonJS è§„èŒƒæš´éœ²</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// å…¥å£æ–‡ä»¶é…ç½®</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/js/app.js&#x27;</span>,   </span><br><span class="line">  <span class="comment">// è¾“å‡ºé…ç½®</span></span><br><span class="line">  <span class="attr">output</span>: &#123;         </span><br><span class="line">       <span class="comment">// è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">       <span class="attr">filename</span>: <span class="string">&#x27;./js/built.js&#x27;</span>,    </span><br><span class="line">       <span class="comment">//è¾“å‡ºæ–‡ä»¶è·¯å¾„é…ç½®</span></span><br><span class="line">       <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>)   </span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="comment">// development ä¸ production å¼€å‘ç¯å¢ƒ(äºŒé€‰ä¸€)</span></span><br><span class="line">     <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>   </span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure></li><li>è¿è¡ŒæŒ‡ä»¤ï¼š webpack</li></ul><h3 id="5ã€æ‰“åŒ…-less-èµ„æº">5ã€æ‰“åŒ… less èµ„æº</h3><p>less æ–‡ä»¶ webpack ä¸èƒ½è§£æï¼Œéœ€è¦å€ŸåŠ© loader ç¼–è¯‘è§£æï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ›å»ºlessæ–‡ä»¶</li></ol><ul><li>src/css/test1.less</li><li>src/css/test2.less</li></ul><ol start="2"><li>å…¥å£app.jsæ–‡ä»¶</li></ol>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥ä¸¤ä¸ª less æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/test1.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/test2.less&#x27;</span>;</span><br></pre></td></tr></table></figure><ol start="3"><li>å®‰è£… loader</li></ol>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-loader style-loader less-loader less --save-dev </span><br></pre></td></tr></table></figure><ol start="4"><li><p>webpack.config.js é…ç½® loader</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">module</span>:&#123;</span><br><span class="line">        <span class="attr">rules</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>:<span class="regexp">/\.less$/</span>,  <span class="comment">// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ä»¥.lessç»“å°¾ï¼ˆæ£€æŸ¥æ˜¯å¦æ˜¯lessæ–‡ä»¶ï¼‰</span></span><br><span class="line">                   <span class="attr">use</span>:[<span class="comment">// æ•°ç»„ä¸­loaderæ‰§è¡Œæ˜¯ä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦é¡ºåºæ‰§è¡Œ</span></span><br><span class="line">                       <span class="string">&#x27;style-loader&#x27;</span>, <span class="comment">// åˆ›å»ºstyleæ ‡ç­¾ï¼Œæ·»åŠ ä¸Šjsä¸­çš„cssä»£ç </span></span><br><span class="line">                       <span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">// å°†cssä»¥commonjsæ–¹å¼æ•´åˆåˆ°jsæ–‡ä»¶ä¸­</span></span><br><span class="line">                       <span class="string">&#x27;less-loader&#x27;</span> <span class="comment">// å°†lessæ–‡ä»¶è§£ææˆcssæ–‡ä»¶</span></span><br><span class="line">                   ]</span><br><span class="line">               &#125;</span><br><span class="line">           ]</span><br><span class="line">       &#125;,</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">webpack</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="6ã€JS-è¯­æ³•æ£€æŸ¥">6ã€JS è¯­æ³•æ£€æŸ¥</h3><p>ESLintï¼ˆ<a href="https://eslint.bootcss.com/">https://eslint.bootcss.com/</a>ï¼‰ èƒ½å¯¹ JS åŸºæœ¬è¯­æ³•é”™è¯¯/éšæ‚£è¿›è¡Œæå‰æ£€æŸ¥ï¼Œä½¿ç”¨æ­¥éª¤</p><ol><li><p>å®‰è£…loader</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint-loader eslint --save-dev</span><br></pre></td></tr></table></figure><blockquote><p>eslint æ˜¯è¯­æ³•æ£€æŸ¥çš„åŒ…</p><p>eslint-loader æ˜¯ eslint åœ¨ webpack ä¸­çš„ loader åŒ…</p></blockquote></li><li><p>webpack.config.js é…ç½® loader</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,                  <span class="comment">//åªæ£€æµ‹jsæ–‡ä»¶</span></span><br><span class="line">                <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,        <span class="comment">//æ’é™¤node_modulesæ–‡ä»¶å¤¹</span></span><br><span class="line">                <span class="attr">enforce</span>: <span class="string">&quot;pre&quot;</span>,                 <span class="comment">//æå‰åŠ è½½ä½¿ç”¨</span></span><br><span class="line">                <span class="attr">use</span>: &#123;                          </span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&quot;eslint-loader&quot;</span><span class="comment">//ä½¿ç”¨eslint-loaderè§£æ</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»º <code>.eslintrc.js</code> æ–‡ä»¶</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">6</span>, <span class="comment">// æ”¯æŒes6</span></span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span><span class="comment">// ä½¿ç”¨es6æ¨¡å—åŒ–</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;env&quot;</span>: &#123; <span class="comment">// è®¾ç½®ç¯å¢ƒ</span></span><br><span class="line">        <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,   <span class="comment">// æ”¯æŒæµè§ˆå™¨ç¯å¢ƒï¼š èƒ½å¤Ÿä½¿ç”¨windowä¸Šçš„å…¨å±€å˜é‡</span></span><br><span class="line">        <span class="string">&quot;node&quot;</span>: <span class="literal">true</span>       <span class="comment">// æ”¯æŒæœåŠ¡å™¨ç¯å¢ƒ:  èƒ½å¤Ÿä½¿ç”¨nodeä¸Šglobalçš„å…¨å±€å˜é‡</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;globals&quot;</span>: &#123;<span class="comment">// å£°æ˜ä½¿ç”¨çš„å…¨å±€å˜é‡, è¿™æ ·å³ä½¿æ²¡æœ‰å®šä¹‰ä¹Ÿä¸ä¼šæŠ¥é”™äº†</span></span><br><span class="line">        <span class="string">&quot;$&quot;</span>: <span class="string">&quot;readonly&quot;</span><span class="comment">// $ ä¸å…è®¸é‡å†™å˜é‡</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: &#123;  <span class="comment">// eslintæ£€æŸ¥çš„è§„åˆ™  0 å¿½ç•¥ 1 è­¦å‘Š 2 é”™è¯¯</span></span><br><span class="line">        <span class="string">&quot;no-console&quot;</span>: <span class="number">0</span>, <span class="comment">// ä¸å…è®¸å‡ºç° console</span></span><br><span class="line">        <span class="string">&quot;eqeqeq&quot;</span>: <span class="number">0</span>,<span class="comment">// å¿…é¡»ä½¿ç”¨ === </span></span><br><span class="line">        <span class="string">&quot;no-alert&quot;</span>: <span class="number">0</span> <span class="comment">// ä¸èƒ½ä½¿ç”¨ alert</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;eslint:recommended&quot;</span> <span class="comment">// ä½¿ç”¨eslintæ¨èçš„é»˜è®¤è§„åˆ™</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">webpack</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="7ã€JS-è¯­æ³•è½¬æ¢">7ã€JS è¯­æ³•è½¬æ¢</h3><p>å€ŸåŠ© Babel å¯ä»¥å°†æµè§ˆå™¨ä¸èƒ½è¯†åˆ«çš„æ–°è¯­æ³•ï¼ˆES6, ES7ï¼‰è½¬æ¢æˆåŸæ¥è¯†åˆ«çš„æ—§è¯­æ³•ï¼ˆES5ï¼‰ï¼Œæµè§ˆå™¨å…¼å®¹æ€§å¤„ç†</p><ol><li><p>å®‰è£…loader</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install babel-loader @babel/core @babel/preset-env --save-dev</span></span><br></pre></td></tr></table></figure><blockquote><p>@babel/core  æ˜¯ babel çš„æ ¸å¿ƒåº“</p><p>@babel/preset-env  æ˜¯ babel çš„é¢„è®¾çš„å·¥å…·åŒ…ï¼Œé»˜è®¤å¯ä»¥å°†æ‰€æœ‰æœ€æ–°çš„è¯­æ³•è½¬ä¸ºä¸º ES5</p><p>babel-loader   æ˜¯ babel åœ¨ webpack ä¸­çš„ loader åŒ…</p></blockquote></li><li><p>é…ç½®loader</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      <span class="attr">use</span>: &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p></li></ol>  <figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">webpack</span></span><br></pre></td></tr></table></figure><h3 id="8ã€JS-å…¼å®¹æ€§å¤„ç†">8ã€JS å…¼å®¹æ€§å¤„ç†</h3><p>Polyfill æ˜¯ä¸€å—ä»£ç ï¼ˆé€šå¸¸æ˜¯ Web ä¸Šçš„ JavaScriptï¼‰ï¼Œç”¨æ¥ä¸ºæ—§æµè§ˆå™¨æä¾›å®ƒæ²¡æœ‰åŸç”Ÿæ”¯æŒçš„è¾ƒæ–°çš„åŠŸèƒ½</p><ol><li><p>å®‰è£… polyfill</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install @babel/polyfill</span></span><br></pre></td></tr></table></figure></li><li><p>app.jsï¼ˆå…¥å£æ–‡ä»¶ï¼‰å¼•å…¥</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@babel/polyfill&#x27;</span>;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>è§£å†³ babel åªèƒ½è½¬æ¢è¯­æ³•çš„é—®é¢˜(å¦‚ï¼šlet/const/è§£æ„èµ‹å€¼â€¦)ï¼Œå¼•å…¥polyfillå¯ä»¥è½¬æ¢é«˜çº§è¯­æ³•(å¦‚:Promiseâ€¦)</p></blockquote><h3 id="9ã€æ‰“åŒ…æ ·å¼æ–‡ä»¶ä¸­çš„å›¾ç‰‡èµ„æº">9ã€æ‰“åŒ…æ ·å¼æ–‡ä»¶ä¸­çš„å›¾ç‰‡èµ„æº</h3><p>å›¾ç‰‡æ–‡ä»¶ webpack ä¸èƒ½è§£æï¼Œéœ€è¦å€ŸåŠ© url-loaderç¼–è¯‘è§£æ</p><ol><li>ä¸¤å¼ èµ„æºå›¾ç‰‡:</li></ol><ul><li>å°å›¾, å°äº8kb: src/images/vue.png</li><li>å¤§å›¾, å¤§äº8kb: src/images/react.jpg</li></ul><ol start="2"><li><p>åœ¨ less æ–‡ä»¶ä¸­é€šè¿‡èƒŒæ™¯å›¾çš„æ–¹å¼å¼•å…¥å›¾ç‰‡</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.react</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;../images/react.png&#x27;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.vue</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;../images/vue.png&#x27;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£… loader</p></li></ol>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install file-loader url-loader --save-dev</span> </span><br></pre></td></tr></table></figure><blockquote><p>è¡¥å……ï¼šurl-loaderæ˜¯å¯¹è±¡file-loaderçš„ä¸Šå±‚å°è£…ï¼Œä½¿ç”¨æ—¶éœ€é…åˆfile-loaderä½¿ç”¨ã€‚</p></blockquote><ol start="4"><li><p>webpack.config.js é…ç½® loader</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            .</span><br><span class="line">            .</span><br><span class="line">    .</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">                <span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">limit</span>: <span class="number">8192</span>,               <span class="comment">// 8kbä»¥ä¸‹çš„å›¾ç‰‡ä¼š base64 å¤„ç†</span></span><br><span class="line">                        <span class="attr">outputPath</span>: <span class="string">&#x27;images&#x27;</span>,           <span class="comment">// æ–‡ä»¶æœ¬åœ°è¾“å‡ºè·¯å¾„</span></span><br><span class="line">                        <span class="attr">publicPath</span>: <span class="string">&#x27;../build/images&#x27;</span>,   <span class="comment">// å›¾ç‰‡çš„urlè·¯å¾„</span></span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;[hash:8].[ext]&#x27;</span>,         <span class="comment">// ä¿®æ”¹æ–‡ä»¶åç§°å’Œåç¼€ </span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">webpack</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="10ã€æ‰“åŒ…-HTML-æ–‡ä»¶">10ã€æ‰“åŒ… HTML æ–‡ä»¶</h3><p>HTML æ–‡ä»¶ä¸èƒ½ç›´æ¥è¢« webpack è§£æï¼Œéœ€è¦å€ŸåŠ© <code>HtmlWebpackPlugin</code> æ’ä»¶ç¼–è¯‘è§£æ</p><ol><li><p>åœ¨ src ç›®å½•ä¸‹åˆ›å»º index.html æ–‡ä»¶ï¼Œ==æ³¨æ„ä¸è¦åœ¨ HTML ä¸­å¼•å…¥ä»»ä½• CSS å’Œ  JS  æ–‡ä»¶==</p></li><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install html-webpack-plugin --save-dev</span> </span><br></pre></td></tr></table></figure></li><li><p>webpack.config.js ä¿®æ”¹é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’ä»¶éƒ½éœ€è¦æ‰‹åŠ¨å¼•å…¥</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>, <span class="comment">// è®¾ç½®è¦ç¼–è¯‘çš„ HTML æºæ–‡ä»¶è·¯å¾„</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p> <figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">webpack</span></span><br></pre></td></tr></table></figure></li></ol><blockquote><p>src ç›®å½•å°±æ˜¯æºæ–‡ä»¶ç›®å½•ï¼Œæ‰€æœ‰çš„ä»£ç å’Œèµ„æºéƒ½ä¿å­˜åœ¨è¯¥ç›®å½•ï¼Œindex.html ä¹Ÿæ˜¯å¦‚æ­¤</p></blockquote><h3 id="11ã€æ‰“åŒ…-HTML-ä¸­å›¾ç‰‡èµ„æº">11ã€æ‰“åŒ… HTML ä¸­å›¾ç‰‡èµ„æº</h3><p>url-loader åªèƒ½å¤„ç† JS å’Œ CSS ä¸­å¼•å…¥çš„å›¾ç‰‡ï¼Œæ— æ³•å¤„ç† HTML ä¸­çš„ img å›¾ç‰‡ï¼Œéœ€è¦ html-loader å¤„ç†ã€‚</p><ol><li>src/index.html æ·»åŠ  img æ ‡ç­¾</li></ol>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../social/images/sun.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p>å®‰è£…loader</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install html-loader --save-dev</span> </span><br></pre></td></tr></table></figure></li><li><p>é…ç½®loader</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            .</span><br><span class="line">            .</span><br><span class="line">            .</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.(html)$/</span>,</span><br><span class="line">                <span class="attr">use</span>: &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p> <figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">webpack</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="12ã€æ‰“åŒ…å­—ä½“èµ„æº">12ã€æ‰“åŒ…å­—ä½“èµ„æº</h3><p>å­—ä½“æ–‡ä»¶éœ€è¦å€ŸåŠ© file-loader ç¼–è¯‘è§£æï¼Œä»¥ iconfont ä¸ºä¾‹ï¼Œä¸‹è½½ä¸€ä¸ªé¡¹ç›®</p><ol><li>å°†å­—ä½“æ–‡ä»¶ä¿å­˜åœ¨ <code>src/fonts</code> ç›®å½•ä¸‹</li></ol><ul><li>src/fonts/iconfont.eot</li><li>src/fonts/iconfont.svg</li><li>src/fonts/iconfont.ttf</li><li>src/fonts/iconfont.woff</li><li>src/fonts/iconfont.woff2</li></ul><ol start="2"><li><p>åˆ›å»º src/css/iconfont.less å¹¶å°† iconfont çš„ css æ ·å¼ç²˜åˆ° less æ–‡ä»¶ä¸­ï¼Œå¹¶ä¿®æ”¹å­—ä½“è·¯å¾„</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;iconfont&#x27;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../fonts/iconfont.eot&#x27;</span>);</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../fonts/iconfont.eot?#iefix&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>),</span><br><span class="line">      <span class="built_in">url</span>(<span class="string">&#x27;../fonts/iconfont.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line">      <span class="built_in">url</span>(<span class="string">&#x27;../fonts/iconfont.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),</span><br><span class="line">      <span class="built_in">url</span>(<span class="string">&#x27;../fonts/iconfont.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>),</span><br><span class="line">      <span class="built_in">url</span>(<span class="string">&#x27;../fonts/iconfont.svg#iconfont&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;svg&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">  -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ <code>src/index.html</code></p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;iconfont&quot;</span>&gt;</span><span class="symbol">&amp;#xe8ab;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½® loader</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            .</span><br><span class="line">            .</span><br><span class="line">               .</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="attr">test</span>: <span class="regexp">/\.(eot|svg|woff|woff2|ttf|mp3|mp4|avi)$/</span>,  <span class="comment">// å¤„ç†å­—ä½“æ–‡ä»¶</span></span><br><span class="line">                   <span class="attr">loader</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">                   <span class="attr">options</span>: &#123;</span><br><span class="line">                     <span class="attr">outputPath</span>: <span class="string">&#x27;fonts&#x27;</span>,</span><br><span class="line">                     <span class="attr">name</span>: <span class="string">&#x27;[hash:8].[ext]&#x27;</span></span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           ]</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">webpack</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="13ã€è‡ªåŠ¨ç¼–è¯‘æ‰“åŒ…è¿è¡Œ">13ã€è‡ªåŠ¨ç¼–è¯‘æ‰“åŒ…è¿è¡Œ</h3><p>ä¹‹å‰çš„æ“ä½œï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç éƒ½éœ€è¦é‡æ–°æ‰§è¡Œ webpack å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ webpack-dev-server è‡ªåŠ¨æ‰“åŒ…è¿è¡Œ</p><ol><li><p>å®‰è£… loader</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install webpack-dev-server -g</span></span><br></pre></td></tr></table></figure></li><li><p>è¯¦ç»†é…ç½®è§å®˜ç½‘  <a href="https://www.webpackjs.com/configuration/dev-server/">https://www.webpackjs.com/configuration/dev-server/</a></p></li><li><p>ä¿®æ”¹ webpack.config.js</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">   .</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">       .</span><br><span class="line">       <span class="attr">output</span>: &#123;</span><br><span class="line">           <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>),</span><br><span class="line">           <span class="attr">filename</span>: <span class="string">&#x27;js/app.js&#x27;</span>,</span><br><span class="line">           <span class="comment">//1. æ·»åŠ  devServer æœåŠ¡åéœ€è¦è°ƒæ•´è¾“å‡ºçš„è·¯å¾„</span></span><br><span class="line">           <span class="attr">publicPath</span>: <span class="string">&#x27;/&#x27;</span></span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="attr">module</span>: &#123;</span><br><span class="line">           <span class="attr">rules</span>: [</span><br><span class="line">               .</span><br><span class="line">               .</span><br><span class="line">               .</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">                   <span class="attr">use</span>: &#123;</span><br><span class="line">                       <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                       <span class="attr">options</span>: &#123;</span><br><span class="line">                           <span class="attr">limit</span>: <span class="number">8192</span>,               </span><br><span class="line">                           <span class="attr">outputPath</span>: <span class="string">&#x27;images&#x27;</span>,           </span><br><span class="line">                           <span class="attr">name</span>: <span class="string">&#x27;[hash:8].[ext]&#x27;</span>,       </span><br><span class="line">               <span class="comment">//2. åˆ é™¤ publicPath é…ç½®</span></span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;,</span><br><span class="line">               </span><br><span class="line">   </span><br><span class="line">           ]</span><br><span class="line">       &#125;,</span><br><span class="line">       .</span><br><span class="line">       .</span><br><span class="line">       <span class="comment">//3. å¢åŠ  devServer é…ç½®</span></span><br><span class="line">       <span class="attr">devServer</span>: &#123;</span><br><span class="line">           <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">           <span class="attr">compress</span>: <span class="literal">true</span>, <span class="comment">// å¯åŠ¨gzipå‹ç¼©</span></span><br><span class="line">           <span class="attr">port</span>: <span class="number">3000</span>, <span class="comment">// ç«¯å£å·</span></span><br><span class="line">       &#125;,</span><br><span class="line">       <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç°åœ¨å°±å¯ä»¥å¯åŠ¨æœåŠ¡</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">webpack-dev-server</span></span><br></pre></td></tr></table></figure></li><li><p>é…ç½® package.json ä¸­ scripts æŒ‡ä»¤ã€‚å¢åŠ  server é…ç½®</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   .</span><br><span class="line">   .</span><br><span class="line">   .</span><br><span class="line">   <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server&quot;</span> </span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">   .</span><br><span class="line">   .</span><br><span class="line">   .</span><br><span class="line"> <span class="punctuation">&#125;</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm run server</span> </span><br></pre></td></tr></table></figure></li></ol><h3 id="14ã€çƒ­æ¨¡æ›¿æ¢åŠŸèƒ½">14ã€çƒ­æ¨¡æ›¿æ¢åŠŸèƒ½</h3><p>æ¨¡å—çƒ­æ›¿æ¢ (HMR - Hot Module Replacement) åŠŸèƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œè¯¦ç»†é…ç½®åœ°å€ï¼ˆ<a href="https://www.webpackjs.com/guides/hot-module-replacement/">https://www.webpackjs.com/guides/hot-module-replacement/</a>ï¼‰</p><p>ä¿®æ”¹ webpack.config.js çš„ devServer é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">//index.html ä¸èƒ½è‡ªåŠ¨åˆ·æ–°çš„è§£å†³æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//æ–°å¢ä¸€ä¸ªå…¥å£ï¼Œè§£å†³å¼€å¯çƒ­æ¨¡å—æ›¿æ¢åé¦–é¡µæ— æ³•åˆ·æ–°çš„é—®é¢˜</span></span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">main</span>:[<span class="string">&#x27;./src/js/app.js&#x27;</span>,<span class="string">&#x27;./src/index.html&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">open</span>: <span class="literal">true</span>, </span><br><span class="line">        <span class="attr">compress</span>: <span class="literal">true</span>, </span><br><span class="line">        <span class="attr">port</span>: <span class="number">3000</span>, </span><br><span class="line">        <span class="attr">hot</span>: <span class="literal">true</span><span class="comment">// å¼€å¯çƒ­æ¨¡å—æ›¿æ¢åŠŸèƒ½</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="15ã€devtool">15ã€devtool</h3><p>devtool é…ç½®æ§åˆ¶ source-map çš„ç”Ÿæˆ , å¯ä»¥å°†å‹ç¼©/ç¼–è¯‘æ–‡ä»¶ä¸­çš„ä»£ç æ˜ å°„å›æºæ–‡ä»¶ä¸­çš„åŸå§‹ä½ç½®ï¼Œä¾¿äºè°ƒè¯•ä»£ç </p><p>è¯¦ç»†é…ç½®å®˜ç½‘åœ°å€ <a href="https://www.webpackjs.com/configuration/devtool/">https://www.webpackjs.com/configuration/devtool/</a></p><p>é…ç½® webpack.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">devtool</span>:  <span class="string">&#x27;cheap-module-eval-source-map&#x27;</span>, <span class="comment">//è®¾ç½® devtool ç­–ç•¥</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨èä½¿ç”¨ï¼š</p><ul><li>å¼€å‘ç¯å¢ƒï¼š cheap-module-eval-source-map</li><li>ç”Ÿäº§ç¯å¢ƒï¼š none   source-map</li></ul><h3 id="16ã€å‡†å¤‡ç”Ÿäº§ç¯å¢ƒ">16ã€å‡†å¤‡ç”Ÿäº§ç¯å¢ƒ</h3><p>webpack å¯ä»¥ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œä¸åŒçš„ç¼–è¯‘ã€‚</p><ol><li><p>åˆ›å»ºæ–‡ä»¶å¤¹ configï¼Œå°† webpack.config.js å¤åˆ¶ä¸¤ä»½</p><ul><li>./config/webpack.dev.js</li><li>./config/webpack.prod.js</li></ul></li><li><p>ä¿®æ”¹ webpack.prod.js é…ç½®ï¼Œåˆ é™¤ webpack-dev-server é…ç½®</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">main</span>:[<span class="string">&#x27;./src/js/app.js&#x27;</span>,<span class="string">&#x27;./src/index.html&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="comment">//1. è®¾ç½® devtool</span></span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    <span class="comment">//2. è®¾ç½® mode</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">    <span class="comment">//3. åˆ é™¤ devServer é…ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹ package.json çš„æŒ‡ä»¤</p></li></ol>  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --config ./config/webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config ./config/webpack.prod.js&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="4"><li>å¼€å‘ç¯å¢ƒæŒ‡ä»¤</li></ol><ul><li>npm run dev   ç”¨äºå¼€å‘ç¯å¢ƒ   ä¸æ‰“åŒ…æ–‡ä»¶</li><li>npm run build        ç”¨äºç”Ÿäº§ç¯å¢ƒ    æ‰“åŒ…æ–‡ä»¶ ï¼ˆ==æ‰“åŒ…åçš„index.htmlä¸èƒ½ç›´æ¥åŒå‡»æ‰“å¼€ï¼Œéœ€è¦å¯åŠ¨æœåŠ¡==ï¼‰</li></ul><h3 id="17ã€æ¸…é™¤æ‰“åŒ…æ–‡ä»¶ç›®å½•">17ã€æ¸…é™¤æ‰“åŒ…æ–‡ä»¶ç›®å½•</h3><p>æ¯æ¬¡æ‰“åŒ…ç”Ÿæˆäº†æ–‡ä»¶ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨åˆ é™¤ï¼Œå¼•å…¥æ’ä»¶ <code>clean-webpack-plugin</code> å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨åˆ é™¤ä¸Šä¸€æ¬¡ç”Ÿæˆçš„æ–‡ä»¶</p><ol><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install clean-webpack-plugin --save-dev</span></span><br></pre></td></tr></table></figure></li><li><p><code>webpack.prod.js</code> å¼•å…¥æ’ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. å¼•å…¥æ’ä»¶</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>); </span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>, </span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="comment">//2. é…ç½®æ’ä»¶</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>() </span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm run build</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="18ã€æå–-CSS-æˆå•ç‹¬æ–‡ä»¶">18ã€æå– CSS æˆå•ç‹¬æ–‡ä»¶</h3><p>å‰é¢çš„ CSS æ ·å¼ä»£ç éƒ½æ˜¯æ”¾åœ¨ style æ ‡ç­¾ä¸­ï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ© mini-css-extract-plugin æŠ½ç¦» CSS æ–‡ä»¶</p><ol><li><p>å®‰è£…æ’ä»¶</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install mini-css-extract-plugin --save-dev</span> </span><br></pre></td></tr></table></figure></li><li><p>é…ç½® webpack.prod.js</p></li></ol>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="comment">// 1. å¼•å…¥æ’ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/.less$/</span>,</span><br><span class="line">                <span class="attr">use</span>: [</span><br><span class="line">                    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,   <span class="comment">// 2. ä¿®æ”¹é…ç½® loader</span></span><br><span class="line">                    <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        .</span><br><span class="line">        .</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;<span class="comment">// 3. é…ç½®æ’ä»¶</span></span><br><span class="line">            <span class="attr">filename</span>: <span class="string">&quot;css/[hash:8].css&quot;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">    .</span><br><span class="line">    .</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>è¿è¡ŒæŒ‡ä»¤ <figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">webpack</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="19ã€æ·»åŠ -CSS-å…¼å®¹">19ã€æ·»åŠ  CSS å…¼å®¹</h3><ul><li><p>å®‰è£… loader</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install postcss-loader autoprefixer --save-dev</span> </span><br></pre></td></tr></table></figure></li><li><p>é…ç½® loader</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">   .</span><br><span class="line">    .</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.less$/</span>, </span><br><span class="line">                <span class="attr">use</span>: [</span><br><span class="line">                    <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">                    <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,      <span class="comment">// 1. è®¾ç½® postcss-loader</span></span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">plugins</span>: [</span><br><span class="line">                                <span class="built_in">require</span>(<span class="string">&quot;autoprefixer&quot;</span>) <span class="comment">// 2. é…ç½®æ’ä»¶</span></span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            .</span><br><span class="line">            .</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º <code>.browserslistrc</code>  ==è¿™é‡Œä¸€è¦åŠ ç›®æ ‡æµè§ˆå™¨è®¾ç½®==</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chrome 50</span><br><span class="line">last 1 versions</span><br><span class="line">ie 10</span><br><span class="line">iOS 7</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm run build</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="20ã€å‹ç¼©-CSS">20ã€å‹ç¼© CSS</h3><ol><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm install optimize-css-assets-webpack-plugin --save-dev</span> </span><br></pre></td></tr></table></figure></li><li><p>å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ’ä»¶</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. å¼•å…¥æ’ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">OptimizeCssAssetsPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        .</span><br><span class="line">        .</span><br><span class="line">        .</span><br><span class="line">        <span class="comment">//2. é…ç½®æ’ä»¶</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">OptimizeCssAssetsPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">cssProcessorPluginOptions</span>: &#123;</span><br><span class="line">        <span class="comment">//ç§»é™¤æ‰€æœ‰çš„æ³¨é‡Š</span></span><br><span class="line">                <span class="attr">preset</span>: [<span class="string">&#x27;default&#x27;</span>, &#123;<span class="attr">discardComments</span>: &#123;<span class="attr">removeAll</span>: <span class="literal">true</span>&#125;&#125;],</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// è§£å†³æ²¡æœ‰source mapé—®é¢˜</span></span><br><span class="line">            <span class="attr">cssProcessorOptions</span>: &#123;                  </span><br><span class="line">                <span class="attr">map</span>: &#123;</span><br><span class="line">                    <span class="comment">// ä¸ç”Ÿæˆå†…è”æ˜ å°„,è¿™æ ·é…ç½®å°±ä¼šç”Ÿæˆä¸€ä¸ªsource-mapæ–‡ä»¶</span></span><br><span class="line">                    <span class="attr">inline</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="comment">// å‘cssæ–‡ä»¶æ·»åŠ source-mapè·¯å¾„æ³¨é‡Š</span></span><br><span class="line">                    <span class="comment">// å¦‚æœæ²¡æœ‰æ­¤é¡¹å‹ç¼©åçš„cssä¼šå»é™¤source-mapè·¯å¾„æ³¨é‡Š</span></span><br><span class="line">                    <span class="attr">annotation</span>: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">npm run build</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="é™„å½•">é™„å½•</h2><h3 id="browserslist">browserslist</h3><p>browserslist ç›®æ ‡æµè§ˆå™¨é…ç½®è¡¨ï¼Œå¯ä»¥é’ˆå¯¹ç›®æ ‡æµè§ˆå™¨è¿›è¡Œç¼–è¯‘å¤„ç†ï¼Œé¿å…ä¸å¿…è¦çš„å…¼å®¹ä»£ç </p><p>é…ç½®çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åœ¨ package.json ä¸­ï¼Œä¸€ç§æ˜¯åˆ›å»º <code>.browserslistrc</code></p><p>package.json å½¢å¼</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;&gt; 1%&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;last 2 versions&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><code>.browserslistrc</code> å½¢å¼</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="number">1</span>%</span></span><br><span class="line">last 2 versions</span><br></pre></td></tr></table></figure><p>é…ç½®è§„åˆ™ä»‹ç»</p><table><thead><tr><th>è§„åˆ™</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>&gt; 1%</td><td>å…¨çƒè¶…è¿‡1%äººä½¿ç”¨çš„æµè§ˆå™¨</td></tr><tr><td>&gt; 5% in US</td><td>æŒ‡å®šå›½å®¶ä½¿ç”¨ç‡è¦†ç›–</td></tr><tr><td>last 2 versions</td><td>æ‰€æœ‰æµè§ˆå™¨å…¼å®¹åˆ°æœ€åä¸¤ä¸ªç‰ˆæœ¬æ ¹æ®CanIUse.comè¿½è¸ªçš„ç‰ˆæœ¬</td></tr><tr><td>Firefox &gt; 20</td><td>æŒ‡å®šæµè§ˆå™¨çš„ç‰ˆæœ¬èŒƒå›´</td></tr><tr><td>not ie &lt;=8</td><td>æ’é™¤ ie8 åŠä»¥ä¸‹</td></tr><tr><td>Firefox 12.1</td><td>æŒ‡å®šæµè§ˆå™¨çš„å…¼å®¹åˆ°æŒ‡å®šç‰ˆæœ¬</td></tr><tr><td>since 2013</td><td>2013å¹´ä¹‹åå‘å¸ƒçš„æ‰€æœ‰ç‰ˆæœ¬</td></tr><tr><td>not dead with &gt; 0.2%</td><td>ä»ç„¶è¿˜åœ¨ä½¿ç”¨ä¸”ä½¿ç”¨ç‡å¤§äº 0.2%</td></tr><tr><td>last 2 Chrome versions</td><td>æœ€æ–°çš„ä¸¤ä¸ª Chrome é…ç½®</td></tr><tr><td>cover 99.5%</td><td>99.5% çš„æµè§ˆå™¨éƒ½æ˜¯ç›®æ ‡</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">ğŸ›æœ¬æ–‡æ±‡æ€»webpacké…ç½®æ•™ç¨‹ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="webpack" scheme="https://www.cameliia.top/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>å­—ç¬¦ä¸²ï¼ˆStringï¼‰çš„å¸¸ç”¨æ–¹æ³•</title>
    <link href="https://www.cameliia.top/posts/310.html"/>
    <id>https://www.cameliia.top/posts/310.html</id>
    <published>2023-03-20T10:19:03.000Z</published>
    <updated>2023-03-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>å­—ç¬¦ä¸²ï¼ˆStringï¼‰çš„å¸¸ç”¨æ–¹æ³•</h1><h3 id="1-str-charAt-indexï¼‰åŠ¨æ€æ–¹æ³•">1. str.charAt(indexï¼‰åŠ¨æ€æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›å­å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><h3 id="2-str-charCodeAt-index-åŠ¨æ€æ–¹æ³•">2. str.charCodeAt(index) åŠ¨æ€æ–¹æ³•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›å­å­—ç¬¦ä¸²çš„Unicodeç¼–ç </span></span><br></pre></td></tr></table></figure><h3 id="3-String-fromCharCode-num1-num2-â€¦">3. String.fromCharCode(num1,num2,â€¦)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®Unicodeç¼–ç è¿”å›å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><h3 id="4-str-indexOf-searchString-startIndex">4. str.indexOf(searchString,startIndex)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›å­å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œä»startIndexå¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</span></span><br></pre></td></tr></table></figure><h3 id="5-str-lastIndexOf-searchString-startIndex">5. str.lastIndexOf(searchString,startIndex)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»å³å¾€å·¦å¼€å§‹æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</span></span><br></pre></td></tr></table></figure><h3 id="6-æˆªå–å­—ç¬¦ä¸²">6. æˆªå–å­—ç¬¦ä¸²</h3><h4 id="1-str-substring-start-end">1) str.substring(start,end)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸¤ä¸ªå‚æ•°éƒ½ä¸ºæ­£æ•°ï¼Œè¿”å›å€¼å°±æ˜¯[start,end-1]è¿™æ®µçš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><h4 id="2-str-slice-start-end">2) str.slice(start,end)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸¤ä¸ªå‚æ•°å¯æ­£å¯è´Ÿï¼Œè¿”å›å€¼å°±æ˜¯[start,end-1]è¿™æ®µçš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><h3 id="7-str-split-separator-limit">7. str.split(separator,limit)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°1æŒ‡å®šå­—ç¬¦ä¸²æˆ–æ­£åˆ™ï¼Œå‚æ•°2æŒ‡å®šæ•°ç»„çš„æœ€å¤§é•¿åº¦</span></span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²å˜æ•°ç»„</span></span><br><span class="line">str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// æ¯ä¸ªå­—ç¬¦è¢«åˆ†å‰²[&quot;&quot;,&quot;&quot;,&quot;&quot;]ï¼›</span></span><br><span class="line"><span class="comment">// æ•°ç»„å˜æˆå­—ç¬¦ä¸²</span></span><br><span class="line">arr.<span class="title function_">join</span>(åˆ†éš”ç¬¦)</span><br></pre></td></tr></table></figure><h3 id="8-str-replace-rgExp-substr-replaceText">8. str.replace(rgExp/substr,replaceText)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><h3 id="9-str-match-rgExp">9. str.match(rgExp)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£åˆ™åŒ¹é…</span></span><br></pre></td></tr></table></figure><h1>JSä¸­è·å–æ•°æ®ç±»å‹çš„å››ç§æ–¹æ³•</h1><p>JSä¸­è·å–æ•°æ®ç±»å‹å¸¸ç”¨çš„æ–¹æ³•æœ‰å››ç§ï¼š</p><h3 id="1-typeof">1. typeof</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­jsä¸­åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†æ˜¯æ— æ³•åˆ¤æ–­å¯¹è±¡çš„å…·ä½“ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a:&quot;</span>+<span class="title function_">typeof</span>(a)); <span class="comment">// a: object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;b:&quot;</span>+<span class="title function_">typeof</span>(b)); <span class="comment">// b: object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">var</span> arr1 = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;arr:&quot;</span>+<span class="title function_">typeof</span>(arr)); <span class="comment">// arr: object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;arr1:&quot;</span>+<span class="title function_">typeof</span>(arr1)); <span class="comment">// arr1: object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼šå½“ä½¿ç”¨åŸºæœ¬åŒ…è£…ç±»å‹åˆ›å»ºå­—ç¬¦ä¸²ã€æ•°ç»„æˆ–è€…å¸ƒå°”å€¼æ—¶ï¼Œä½¿ç”¨typeofè¿”å›çš„æ˜¯Object</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;123&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> s); <span class="comment">// Object</span></span><br></pre></td></tr></table></figure><h3 id="2-Object-prototype-toString-call">2. Object.prototype.toString.call( )</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯ä»¥åˆ¤æ–­å…·ä½“çš„å¯¹è±¡ç±»å‹ï¼ŒåŒ…æ‹¬æ­£åˆ™ç­‰ï¼Œä½†æ˜¯æ— æ³•åˆ¤æ–­è‡ªå®šä¹‰å¯¹è±¡ç±»å‹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a:&quot;</span>+<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(a)); <span class="comment">// [object Null]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;b:&quot;</span>+<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(b)); <span class="comment">// [object Object]</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;arr:&quot;</span>+<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(arr)); <span class="comment">// [object Array]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;arr1:&quot;</span>+<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(arr1)); <span class="comment">// [object Array]</span></span><br><span class="line"><span class="comment">// å¯¹äºè‡ªå®šä¹‰çš„å¯¹è±¡ç±»å‹ï¼Œæ— æ³•åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(x)); <span class="comment">// [object Object]</span></span><br></pre></td></tr></table></figure><h3 id="3-instanceof">3. instanceof</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜é‡ instanceofå¯¹è±¡ï¼Œè¿”å›å€¼ä¸ºboolean,ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºæŸä¸ªå¯¹è±¡çš„å®ä¾‹</span></span><br><span class="line"><span class="comment">// ä»…èƒ½åˆ¤æ–­å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼Œä½†å¯ä»¥æ‹¥æœ‰åˆ¤æ–­è‡ªå®šä¹‰å¯¹è±¡ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="literal">true</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a <span class="keyword">instanceof</span> <span class="title class_">Number</span>); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b <span class="keyword">instanceof</span> <span class="title class_">Boolean</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line"><span class="keyword">if</span>(x <span class="keyword">instanceof</span> A)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;x is A&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x is A</span></span><br></pre></td></tr></table></figure><h3 id="4-constructor">4. constructor</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹å¯¹è±¡å¯¹åº”çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">// objectçš„æ¯ä¸ªå®ä¾‹éƒ½å…·æœ‰å±æ€§constructorï¼Œä¿å­˜ç€ç”¨äºåˆ›å»ºå½“å‰å¯¹è±¡çš„å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> x = <span class="keyword">new</span> <span class="title function_">A</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">constructor</span>); <span class="comment">// f A()&#123;this.a = 1&#125;</span></span><br><span class="line"><span class="keyword">if</span>(x.<span class="property">constructor</span> === A)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;x is A&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// x is A</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†æ˜¯ï¼Œ undefinedå’ŒNullç±»å‹ä¸èƒ½åˆ¤æ–­</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ¥¯æœ¬æ–‡æ±‡æ€»å­—ç¬¦ä¸²ï¼ˆStringï¼‰çš„å¸¸ç”¨æ–¹æ³•ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="å­—ç¬¦ä¸²ï¼ˆStringï¼‰çš„å¸¸ç”¨æ–¹æ³•" scheme="https://www.cameliia.top/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88String%EF%BC%89%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>æ•°ç»„Arrayçš„å¸¸ç”¨æ–¹æ³•</title>
    <link href="https://www.cameliia.top/posts/311.html"/>
    <id>https://www.cameliia.top/posts/311.html</id>
    <published>2023-03-20T10:19:03.000Z</published>
    <updated>2023-03-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>æ•°ç»„Arrayçš„å¸¸ç”¨æ–¹æ³•ï¼ˆ22ç§ï¼‰</h1><h2 id="å…³äºæ•°ç»„çš„åˆ¤æ–­ï¼ˆ1ï¼‰isArray">å…³äºæ•°ç»„çš„åˆ¤æ–­ï¼ˆ1ï¼‰isArray</h2><p><strong>Array.isArray()</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> f = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(f)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="å…³äºè¿™ä¸ªæ–¹æ³•çš„å®ç°">å…³äºè¿™ä¸ªæ–¹æ³•çš„å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property">myIsArray</span> = <span class="keyword">function</span>(<span class="params">o</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>.<span class="title function_">call</span>(<span class="title class_">Object</span>(o) === <span class="string">&#x27;[Object Array]&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å…³äºç±»æ•°ç»„å¯¹è±¡è½¬æˆæ•°ç»„ï¼ˆ1ï¼‰from">å…³äºç±»æ•°ç»„å¯¹è±¡è½¬æˆæ•°ç»„ï¼ˆ1ï¼‰from</h2><p><strong>Array.from()</strong> ç”¨äºé€šè¿‡æ‹¥æœ‰lengthå±æ€§çš„å¯¹è±¡æˆ–å¯è¿­ä»£çš„å¯¹è±¡æ¥è¿”å›ä¸€ä¸ªæ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›æ–°çš„æ•°ç»„å®ä¾‹ï¼Œå¯¹äºåŸå§‹è§£æ„ä¸å½±å“</span></span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1); <span class="comment">// [&quot;f&quot;,&quot;o&quot;,&quot;o&quot;];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">// 1. æ¥å—ä¸€ä¸ªç±»æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡</span></span><br><span class="line"><span class="comment">// 2. æ–°æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¼šæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">// 3. æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°çš„thiså¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="function"><span class="params">x</span>=&gt;</span>x*<span class="number">10</span>);</span><br><span class="line"><span class="comment">// arr[0] = 10;</span></span><br><span class="line"><span class="comment">// arr[1] = 20;</span></span><br><span class="line"><span class="comment">// arr[2] = 30;</span></span><br></pre></td></tr></table></figure><h2 id="å…³äºå¤šä¸ªæ•°ç»„çš„è¿æ¥-æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ˆ2ï¼‰concat-join">å…³äºå¤šä¸ªæ•°ç»„çš„è¿æ¥ &amp; æ•°ç»„è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ˆ2ï¼‰concat/join</h2><p><strong>Array.prototype.concat()</strong>  ç”¨äºè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œä¸”ä¸ä¼šæ”¹å˜ç°æœ‰æ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="string">&quot;è‹¹æœ&quot;</span>,<span class="string">&quot;é¦™è•‰&quot;</span>,<span class="string">&quot;æ©˜å­&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="string">&quot;æ¢¨&quot;</span>,<span class="string">&quot;è¥¿ç“œ&quot;</span>,<span class="string">&quot;ç«é¾™æœ&quot;</span>]ï¼›</span><br><span class="line"><span class="keyword">var</span> arr = arr1.<span class="title function_">concat</span>(arr2)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr); <span class="comment">// [&quot;è‹¹æœ&quot;,&quot;é¦™è•‰&quot;,&quot;æ©˜å­&quot;,&quot;æ¢¨&quot;,&quot;è¥¿ç“œ&quot;,&quot;ç«é¾™æœ&quot;]</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.join()</strong> æŠŠæ•°ç»„çš„æ‰€æœ‰å…ƒç´ è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;è¥¿ç“œ&quot;</span>,<span class="string">&quot;å“ˆå¯†ç“œ&quot;</span>,<span class="string">&quot;æ¦´è²&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits.<span class="title function_">join</span>()); <span class="comment">// è¥¿ç“œ,å“ˆå¯†ç“œ,æ¦´è²</span></span><br></pre></td></tr></table></figure><h2 id="å…³äºæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ•°ç»„ï¼ˆ5ï¼‰every-some-filter-find-includes">å…³äºæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ•°ç»„ï¼ˆ5ï¼‰every/some/filter/find/includes</h2><p><strong>Array.prototype.every()</strong> ç”¨äºæ£€æµ‹æ•°å€¼å…ƒç´ çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæ¡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœæ•°ç»„ä¸­æ£€æµ‹åˆ°ä¸€ä¸ªå…ƒç´ ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æ•´ä¸ªè¿”å›falseï¼Œå‰©ä½™å…ƒç´ å°±ä¸ä¼šå†è¿›è¡Œæ£€æµ‹</span></span><br><span class="line"><span class="comment">// ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼Œä¹Ÿä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> ages = [<span class="number">33</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkAdult</span>(<span class="params">age</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line">ages.<span class="title function_">every</span>(checkAdult); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.some()</strong> æ£€æµ‹æ•°ç»„å…ƒç´ ä¸­æ˜¯å¦æœ‰å…ƒç´ ç¬¦åˆæŒ‡å®šæ¡ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼Œä¹Ÿä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="comment">// å¦‚æœæœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œå°±è¿”å›trueï¼Œå‰©ä½™çš„å…ƒç´ ä¸ä¼šå†è¿›è¡Œæ£€æµ‹</span></span><br><span class="line"><span class="keyword">var</span> ages = [<span class="number">33</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkAdult</span>(<span class="params">age</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line">ages.<span class="title function_">some</span>(checkAdult); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.filter()</strong> ç”¨äºæ£€æµ‹æ•°å€¼å…ƒç´ ï¼Œå¹¶è¿”å›ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å…ƒç´ çš„æ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼Œä¹Ÿä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> ages = [<span class="number">33</span>,<span class="number">20</span>,<span class="number">16</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkAdult</span>(<span class="params">age</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line">ages.<span class="title function_">filter</span>(checkAdult); <span class="comment">// [33,20,50]</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.find()</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼Œä¹Ÿä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="comment">// è¿”å›ç¬¦åˆä¼ å…¥æµ‹è¯•ï¼ˆå‡½æ•°ï¼‰æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œä¹‹åçš„å€¼å°±ä¸ä¼šå†æ£€æµ‹äº†</span></span><br><span class="line"><span class="comment">// æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼å°±è¿”å›undefined</span></span><br><span class="line"><span class="keyword">var</span> ages = [<span class="number">10</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkAdult</span>(<span class="params">age</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> age &gt;= <span class="number">18</span>;</span><br><span class="line">&#125;</span><br><span class="line">ages.<span class="title function_">filter</span>(checkAdult); <span class="comment">// 18</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.includes(searchElement,fromIndex)</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ä¸€ä¸ªæŒ‡å®šçš„å€¼,æœ‰å°±è¿”å›trueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].<span class="title function_">includes</span>(<span class="number">2</span>,<span class="number">1</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="å…³äºæ•°ç»„çš„éå†ï¼ˆ1ï¼‰forEach">å…³äºæ•°ç»„çš„éå†ï¼ˆ1ï¼‰forEach</h2><p><strong>Array.prototype.forEach()</strong> éå†æ–¹æ³•ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºç©ºæ•°ç»„ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span>];</span><br><span class="line">arr.forEach(<span class="keyword">function</span>(<span class="params">item,index</span>)&#123;</span><br><span class="line"><span class="built_in">console</span>.<span class="built_in">log</span>(item)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="å…³äºæ•°ç»„indexçš„æŸ¥æ‰¾ï¼ˆ2ï¼‰indexOf-lastIndexOf">å…³äºæ•°ç»„indexçš„æŸ¥æ‰¾ï¼ˆ2ï¼‰indexOf/lastIndexOf</h2><p><strong>Array.prototype.indexOf()</strong> æœç´ æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè¿”å›å®ƒæ‰€åœ¨çš„ä½ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»å¤´å¼€å§‹æ£€ç´¢ï¼Œæ‰¾åˆ°itemç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè¿”å›å®ƒçš„ç´¢å¼•å€¼</span></span><br><span class="line"><span class="comment">// æ²¡æœ‰å°±è¿”å›-1</span></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;è¥¿ç“œ&quot;</span>,<span class="string">&quot;å“ˆå¯†ç“œ&quot;</span>,<span class="string">&quot;æ¦´è²&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits.<span class="title function_">indexOf</span>(<span class="string">&quot;å“ˆå¯†ç“œ&quot;</span>));<span class="comment">//1</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.lastIndexOf()</strong> è¿”å›æŒ‡å®šå†…å®¹æœ€åå‡ºç°çš„ä½ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»åå‘å‰è¿›è¡Œæ£€ç´¢ï¼Œæ‰¾åˆ°itemç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè¿”å›å®ƒçš„ç´¢å¼•å€¼</span></span><br><span class="line"><span class="comment">// æ²¡æœ‰å°±è¿”å›-1</span></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;è¥¿ç“œ&quot;</span>,<span class="string">&quot;å“ˆå¯†ç“œ&quot;</span>,<span class="string">&quot;æ¦´è²&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits.<span class="title function_">indexOf</span>(<span class="string">&quot;å“ˆå¯†ç“œ&quot;</span>)); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><h2 id="å…³äºæ•°ç»„çš„å¢åˆ æ”¹ï¼ˆ7ï¼‰pop-shift-push-unshift-reverse-slice-splice">å…³äºæ•°ç»„çš„å¢åˆ æ”¹ï¼ˆ7ï¼‰pop/shift/push/unshift/reverse/slice/splice</h2><p><strong>Array.prototype.pop()</strong> åˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ å¹¶è¿”å›åˆ é™¤çš„å…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¼šæ”¹å˜æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1); <span class="comment">// [10,20,30]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2); <span class="comment">// 40</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.shift()</strong> åˆ é™¤å¹¶è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¼šæ”¹å˜æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.<span class="title function_">shift</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1); <span class="comment">// [20,30ï¼Œ40]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.push()</strong> å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¼šæ”¹å˜æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.<span class="title function_">push</span>(<span class="number">50</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1); <span class="comment">// [10,20,30ï¼Œ40,50]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.unshift()</strong> å‘æ•°ç»„å¼€å¤´æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¼šæ”¹å˜æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.<span class="title function_">unshift</span>(<span class="number">50</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr1); <span class="comment">// [50,10,20,30ï¼Œ40]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.reverse()</strong> åè½¬æ•°ç»„çš„å…ƒç´ é¡ºåº</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">&quot;å°æ˜&quot;</span>,<span class="string">&quot;å°çº¢&quot;</span>,<span class="string">&quot;å°é»„&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(names.<span class="title function_">reverse</span>()); <span class="comment">// [&quot;å°é»„&quot;,&quot;å°çº¢&quot;,&quot;å°æ˜&quot;]</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.slice(start,end)</strong> é€‰å–æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Lemon&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> re = fruits.<span class="title function_">slice</span>(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(re); <span class="comment">// [&quot;Orange&quot;,&quot;Lemon&quot;]</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.splice(indexï¼Œnum)</strong> ä»æ•°ç»„ä¸­æ·»åŠ æˆ–åˆ é™¤å…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="comment">// åˆ é™¤å…ƒç´ æ—¶,å‚æ•°ä¸ºå¼€å§‹ç´¢å¼•å’Œè¦åˆ é™¤å…ƒç´ çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">var</span> sites = [<span class="string">&quot;Runoob&quot;</span>,<span class="string">&quot;Google&quot;</span>,<span class="string">&quot;Taobao&quot;</span>];</span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è¿”å›çš„æ˜¯è¢«åˆ é™¤å…ƒç´ ç»„æˆçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> re = sites.<span class="title function_">splice</span>(<span class="number">2</span>,<span class="number">1</span>,<span class="string">&quot;GGGGG&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sites); <span class="comment">//[&quot;Runoob&quot;,&quot;Google&quot;,&quot;GGGGG&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(re); <span class="comment">// [&quot;Taobao&quot;]</span></span><br></pre></td></tr></table></figure><h2 id="å…³äºæ•°ç»„çš„å›è°ƒå¤„ç†å’Œæ’åºï¼ˆ3ï¼‰sort-reduce-map">å…³äºæ•°ç»„çš„å›è°ƒå¤„ç†å’Œæ’åºï¼ˆ3ï¼‰sort/reduce/map</h2><p><strong>Array.prototype.sort()</strong> å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åº</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–¹æ³•å°†æ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> points = [<span class="number">40</span>,<span class="number">100</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">25</span>,<span class="number">10</span>];</span><br><span class="line">points.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> a-b;</span><br><span class="line">&#125;); <span class="comment">// 1ï¼Œ5ï¼Œ10ï¼Œ25ï¼Œ40ï¼Œ100 ï¼ˆå‡åºæ’åˆ—ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç»™å­—æ¯æ’åº</span></span><br><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">sort</span>(); <span class="comment">// [&quot;Apple&quot;,&quot;Banana&quot;,&quot;Mango&quot;,&quot;Orange&quot;];</span></span><br></pre></td></tr></table></figure><p><strong>Array.prototype.reduce()</strong> å°†æ•°ç»„å…ƒç´ è®¡ç®—ä¸ºä¸€ä¸ªå€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äºç©ºæ•°ç»„ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°çš„</span></span><br><span class="line"><span class="comment">// æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå€¼è¿›è¡Œç´¯åŠ è®¡ç®—</span></span><br><span class="line"><span class="keyword">var</span> num = [<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>];</span><br><span class="line"><span class="keyword">var</span> result = num.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">pre,cur</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> pre + cur;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 150</span></span><br></pre></td></tr></table></figure><h3 id="å…³äºè¿™ä¸ªæ–¹æ³•çš„å®ç°-2">å…³äºè¿™ä¸ªæ–¹æ³•çš„å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myReduce</span> = <span class="keyword">function</span>(<span class="params">callback, initialValue</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> accumulator = initialValue ? initialValue : <span class="variable language_">this</span>[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = initialValue ? <span class="number">0</span> : <span class="number">1</span>; i &lt; <span class="variable language_">this</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">    accumulator = <span class="title function_">callback</span>(accumulator, <span class="variable language_">this</span>[i], i, _this);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> accumulator;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>Array.prototype.map(callback,[thisObject])</strong> é€šè¿‡æŒ‡å®šå‡½æ•°å¤„ç†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ•°ç»„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ–°æ•°ç»„ä¸­çš„å…ƒç´ éƒ½æ˜¯åŸå§‹æ•°ç»„å¤„ç†åçš„å€¼</span></span><br><span class="line"><span class="comment">// ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼Œä¹Ÿä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> numbers = [<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">25</span>,<span class="number">36</span>];</span><br><span class="line"><span class="keyword">var</span> newNum = numbers.<span class="title function_">map</span>(<span class="title class_">Math</span>.<span class="property">sqrt</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newNum); <span class="comment">// [2,3,4,5,6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">16</span>];</span><br><span class="line"><span class="keyword">const</span> map1 = arr1.<span class="title function_">map</span>(<span class="function"><span class="params">x</span>=&gt;</span>&#123;</span><br><span class="line"><span class="comment">// åªæœ‰å½“x=4æ—¶ï¼Œæ‰è¿›è¡Œæ“ä½œ</span></span><br><span class="line"><span class="keyword">if</span>(x == <span class="number">4</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> x*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…¶ä»–å€¼æ—¶ï¼Œå°±ç›´æ¥è¿”å›</span></span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map1); <span class="comment">// [1,8,9,16]</span></span><br></pre></td></tr></table></figure><h3 id="å…³äºè¿™ä¸ªæ–¹æ³•çš„å®ç°-3">å…³äºè¿™ä¸ªæ–¹æ³•çš„å®ç°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myMap</span> = <span class="keyword">function</span>(<span class="params">callback, thisArg</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    arr.<span class="title function_">push</span>(callback.<span class="title function_">call</span>(thisArg, <span class="variable language_">this</span>[i], i, <span class="variable language_">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸ¥¨æœ¬æ–‡æ±‡æ€»æ•°ç»„Arrayçš„å¸¸ç”¨æ–¹æ³• ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="æ•°ç»„Arrayçš„å¸¸ç”¨æ–¹æ³•" scheme="https://www.cameliia.top/tags/%E6%95%B0%E7%BB%84Array%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>webpackåŸºç¡€æ•™ç¨‹</title>
    <link href="https://www.cameliia.top/posts/308.html"/>
    <id>https://www.cameliia.top/posts/308.html</id>
    <published>2023-03-20T10:19:03.000Z</published>
    <updated>2023-03-20T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>webpackåŸºç¡€é…ç½®æ•™ç¨‹</h1><h3 id="1-åˆè¯†Webpack">1. åˆè¯†Webpack</h3><ul><li>ä»€ä¹ˆæ˜¯webpackï¼Ÿ<ul><li>Webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ã€‚</li><li>åœ¨Webpackä¼šå°†å‰ç«¯çš„æ‰€æœ‰èµ„æºæ–‡ä»¶ï¼ˆjs/json/css/img/less/â€¦ï¼‰éƒ½ä½œä¸ºæ¨¡å—å¤„ç†ã€‚</li><li>å®ƒå°†æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»è¿›è¡Œåˆ†æï¼Œç”Ÿæˆå¯¹åº”çš„èµ„æº</li></ul></li><li>äº”ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š<ol><li>ã€å…¥å£(entry)ã€‘ï¼šæŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚</li><li>ã€è¾“å‡º(output)ã€‘ï¼šåœ¨å“ªé‡Œè¾“å‡ºæ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ã€‚</li><li>ã€Loaderã€‘ï¼šå¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªèƒ½è§£æ JavaScriptå’Œjsonï¼‰ã€‚</li><li>ã€æ’ä»¶(plugins)ã€‘æ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ï¼Œä»æ‰“åŒ…åˆ°ä¼˜åŒ–éƒ½å¯ä»¥å®ç°ã€‚</li><li>ã€æ¨¡å¼(mode)ã€‘ï¼Œæœ‰ç”Ÿäº§æ¨¡å¼productionå’Œå¼€å‘æ¨¡å¼development</li></ol></li><li>å¯¹loaderçš„ç†è§£<ul><li>webpack æœ¬èº«åªèƒ½å¤„ç†JSã€JSONæ¨¡å—ï¼Œå¦‚æœè¦åŠ è½½å…¶ä»–ç±»å‹çš„æ–‡ä»¶(æ¨¡å—)ï¼Œå°±éœ€è¦ä½¿ç”¨å¯¹åº”çš„loader ã€‚</li><li>å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—æºæ–‡ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›è½¬æ¢çš„ç»“æœã€‚</li><li>loader ä¸€èˆ¬ä»¥ xxx-loader çš„æ–¹å¼å‘½åï¼Œxxx ä»£è¡¨äº†è¿™ä¸ª loader è¦åšçš„è½¬æ¢åŠŸèƒ½ï¼Œæ¯”å¦‚ css-loaderã€‚</li></ul></li><li>å¯¹pluginsçš„ç†è§£<ul><li>æ’ä»¶å¯ä»¥å®Œæˆä¸€äº›loaderä¸èƒ½å®Œæˆçš„åŠŸèƒ½ã€‚</li></ul></li><li>é…ç½®æ–‡ä»¶<ul><li>webpack.config.js : ç”¨äºå­˜å‚¨webpacké…ç½®ä¿¡æ¯ã€‚</li></ul></li></ul><h3 id="2-å¼€å¯é¡¹ç›®">2. å¼€å¯é¡¹ç›®</h3><ul><li>åˆå§‹åŒ–é¡¹ç›®ï¼š<ul><li>ä½¿ç”¨<code>npm init</code>æˆ–<code>yarn init</code>ç”Ÿæˆä¸€ä¸ªpackage.jsonæ–‡ä»¶  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack_test&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span> </span><br></pre></td></tr></table></figure></li></ul></li><li>å®‰è£…webpack<ul><li>npm install webpack@4 webpack-cli@3 -g  //å…¨å±€å®‰è£…,ä½œä¸ºæŒ‡ä»¤ä½¿ç”¨</li><li>npm install webpack@4 webpack-cli@3 -D //æœ¬åœ°å®‰è£…,ä½œä¸ºæœ¬åœ°ä¾èµ–ä½¿ç”¨</li></ul></li></ul><h3 id="3-å¤„ç†jså’Œjsonæ–‡ä»¶">3. å¤„ç†jså’Œjsonæ–‡ä»¶</h3><ul><li><p>åˆ›å»ºjsæ–‡ä»¶</p><ul><li>src/js/app.js</li><li>src/js/module1.js</li><li>src/js/module2.js</li></ul></li><li><p>åˆ›å»ºjsonæ–‡ä»¶</p><ul><li>src/json/data.json</li></ul></li><li><p>åˆ›å»ºä¸»é¡µé¢:</p><ul><li>src/index.html</li></ul></li><li><p>è¿è¡ŒæŒ‡ä»¤</p><ul><li><p>æ‰“åŒ…æŒ‡ä»¤ï¼ˆå¼€å‘ï¼‰ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack .<span class="regexp">/src/</span>js<span class="regexp">/app.js -o ./</span>build<span class="regexp">/js/</span>app.js --mode=development</span><br></pre></td></tr></table></figure><ul><li>åŠŸèƒ½: webpackèƒ½å¤Ÿæ‰“åŒ…jså’Œjsonæ–‡ä»¶ï¼Œå¹¶ä¸”èƒ½å°†es6çš„æ¨¡å—åŒ–è¯­æ³•è½¬æ¢æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„è¯­æ³•</li></ul></li><li><p>æ‰“åŒ…æŒ‡ä»¤ï¼ˆç”Ÿäº§ï¼‰ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack .<span class="regexp">/src/</span>js<span class="regexp">/app.js -o ./</span>build<span class="regexp">/js/</span>app.js --mode=production</span><br></pre></td></tr></table></figure><ul><li>åŠŸèƒ½: åœ¨å¼€å‘é…ç½®åŠŸèƒ½ä¸ŠåŠ ä¸Šä¸€ä¸ªå‹ç¼©ä»£ç çš„åŠŸèƒ½</li></ul></li><li><p>index.htmlé¡µé¢ä¸­å¼•å…¥ï¼šbuild/js/app.js</p></li></ul></li><li><p>ç»“è®ºï¼š</p><ul><li>webpackèƒ½å¤Ÿç¼–è¯‘æ‰“åŒ…jså’Œjsonæ–‡ä»¶</li><li>èƒ½å°†es6çš„æ¨¡å—åŒ–è¯­æ³•è½¬æ¢æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„è¯­æ³•</li><li>èƒ½å‹ç¼©ä»£ç </li></ul></li><li><p>ç¼ºç‚¹ï¼š</p><ul><li>ä¸èƒ½ç¼–è¯‘æ‰“åŒ…cssã€imgç­‰æ–‡ä»¶</li><li>ä¸èƒ½å°†jsçš„es6åŸºæœ¬è¯­æ³•è½¬åŒ–ä¸ºes5ä»¥ä¸‹è¯­æ³•</li></ul></li><li><p>æ”¹å–„ï¼šä½¿ç”¨webpacké…ç½®æ–‡ä»¶è§£å†³ï¼Œè‡ªå®šä¹‰åŠŸèƒ½</p></li></ul><h3 id="4-webpacké…ç½®æ–‡ä»¶">4. webpacké…ç½®æ–‡ä»¶</h3><ul><li>ç›®çš„ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•å®šä¹‰é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œè¿˜åŸä»¥ä¸ŠåŠŸèƒ½</li><li>æ–‡ä»¶åç§°ï¼šwebpack.config.js</li><li>æ–‡ä»¶å†…å®¹ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>); <span class="comment">//nodeå†…ç½®æ ¸å¿ƒæ¨¡å—ï¼Œç”¨æ¥è®¾ç½®è·¯å¾„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/js/app.js&#x27;</span>, <span class="comment">// å…¥å£æ–‡ä»¶é…ç½®ï¼ˆç²¾ç®€å†™æ³•ï¼‰</span></span><br><span class="line">    <span class="comment">/*å®Œæ•´å†™æ³•ï¼š</span></span><br><span class="line"><span class="comment">entry:&#123;</span></span><br><span class="line"><span class="comment">main:&#x27;./src/js/app.js&#x27;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="attr">output</span>: &#123; <span class="comment">//è¾“å‡ºé…ç½®</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;./js/app.js&#x27;</span>,<span class="comment">//è¾“å‡ºæ–‡ä»¶å</span></span><br><span class="line">        <span class="attr">path</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>)<span class="comment">//è¾“å‡ºæ–‡ä»¶è·¯å¾„(ç»å¯¹è·¯å¾„)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>   <span class="comment">//å¼€å‘ç¯å¢ƒ(äºŒé€‰ä¸€)</span></span><br><span class="line">    <span class="comment">//mode: &#x27;production&#x27;   //ç”Ÿäº§ç¯å¢ƒ(äºŒé€‰ä¸€)</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>è¿è¡ŒæŒ‡ä»¤ï¼š webpack</li></ul><h3 id="5-æ‰“åŒ…lessã€cssèµ„æº">5. æ‰“åŒ…lessã€cssèµ„æº</h3><ul><li><p>æ¦‚è¿°ï¼šlessã€cssæ–‡ä»¶webpackä¸èƒ½è§£æï¼Œéœ€è¦å€ŸåŠ©loaderç¼–è¯‘è§£æ</p></li><li><p>åˆ›å»ºlessæ–‡ä»¶</p><ul><li>src/css/demo1.less</li><li>src/css/demo2.css</li></ul></li><li><p>å…¥å£app.jsæ–‡ä»¶</p><ul><li>å¼•å…¥lessã€cssèµ„æº</li></ul></li><li><p>å®‰è£…loader</p><ul><li>npm install css-loader style-loader less-loader less -D</li></ul></li><li><p>é…ç½®loader</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†lessèµ„æº</span></span><br><span class="line"><span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line"><span class="attr">use</span>: [</span><br><span class="line"><span class="string">&#x27;style-loader&#x27;</span>, <span class="comment">//åˆ›å»ºstyleæ ‡ç­¾ï¼Œå°†jsä¸­çš„æ ·å¼èµ„æºæ’å…¥è¿›è¡Œï¼Œæ·»åŠ åˆ°headä¸­ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">//å°†cssæ–‡ä»¶å˜æˆcommonjsæ¨¡å—åŠ è½½jsä¸­ï¼Œé‡Œé¢å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">&#x27;less-loader&#x27;</span> <span class="comment">//å°†lessæ–‡ä»¶ç¼–è¯‘æˆcssæ–‡ä»¶</span></span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†cssèµ„æº</span></span><br><span class="line"><span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="attr">use</span>: [ <span class="comment">// useæ•°ç»„ä¸­loaderæ‰§è¡Œé¡ºåºï¼šä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Š ä¾æ¬¡æ‰§è¡Œ</span></span><br><span class="line"><span class="string">&#x27;style-loader&#x27;</span>,<span class="comment">// åˆ›å»ºstyleæ ‡ç­¾ï¼Œå°†jsä¸­çš„æ ·å¼èµ„æºæ’å…¥è¿›è¡Œï¼Œæ·»åŠ åˆ°headä¸­ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="string">&#x27;css-loader&#x27;</span><span class="comment">// å°†cssæ–‡ä»¶å˜æˆcommonjsæ¨¡å—åŠ è½½jsä¸­ï¼Œé‡Œé¢å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²</span></span><br><span class="line">]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤ï¼šwebpack</p></li></ul><h3 id="6-æ‰“åŒ…htmlæ–‡ä»¶">6. æ‰“åŒ…htmlæ–‡ä»¶</h3><ul><li><p>æ¦‚è¿°ï¼šå€ŸåŠ©html-webpack-pluginæ’ä»¶æ‰“åŒ…htmlèµ„æº</p></li><li><p>åˆ›å»ºhtmlæ–‡ä»¶</p><ul><li>src/index.html</li><li>æ³¨æ„ï¼šä¸è¦åœ¨è¯¥htmlä¸­å¼•å…¥ä»»ä½•csså’Œjsæ–‡ä»¶</li></ul></li><li><p>å®‰è£…æ’ä»¶ï¼šhtml-webpack-plugin</p><ul><li>npm install html-webpack-plugin -D</li></ul></li><li><p>åœ¨webpack.config.jsä¸­å¼•å…¥æ’ä»¶ï¼ˆæ’ä»¶éƒ½éœ€è¦æ‰‹åŠ¨å¼•å…¥ï¼Œè€Œloaderä¼šè‡ªåŠ¨åŠ è½½ï¼‰</p><ul><li>const HtmlWebpackPlugin = require(â€˜html-webpack-pluginâ€™)</li></ul></li><li><p>é…ç½®æ’ä»¶Plugins</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line"><span class="comment">// ä»¥å½“å‰æ–‡ä»¶ä¸ºæ¨¡æ¿åˆ›å»ºæ–°çš„HtML(1. ç»“æ„å’ŒåŸæ¥ä¸€æ · 2. ä¼šè‡ªåŠ¨å¼•å…¥æ‰“åŒ…çš„èµ„æº)</span></span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>, </span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤ï¼šwebpack</p></li></ul><h3 id="7-æ‰“åŒ…æ ·å¼ä¸­çš„å›¾ç‰‡">7. æ‰“åŒ…æ ·å¼ä¸­çš„å›¾ç‰‡</h3><ul><li>æ¦‚è¿°ï¼šå›¾ç‰‡æ–‡ä»¶webpackä¸èƒ½è§£æï¼Œéœ€è¦å€ŸåŠ©loaderç¼–è¯‘è§£æ</li><li>æ·»åŠ 2å¼ å›¾ç‰‡:<ul><li>å°å›¾, å°äº8kb: src/images/vue.png</li><li>å¤§å›¾, å¤§äº8kb: src/images/react.jpg</li></ul></li><li>åœ¨lessæ–‡ä»¶ä¸­é€šè¿‡èƒŒæ™¯å›¾çš„æ–¹å¼å¼•å…¥ä¸¤ä¸ªå›¾ç‰‡</li><li>å®‰è£…loader<ul><li>npm install file-loader url-loader file-loader -D</li><li>è¡¥å……ï¼šurl-loaderæ˜¯å¯¹è±¡file-loaderçš„ä¸Šå±‚å°è£…ï¼Œä½¿ç”¨æ—¶éœ€é…åˆfile-loaderä½¿ç”¨ã€‚</li></ul></li><li>é…ç½®loader  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†å›¾ç‰‡èµ„æº</span></span><br><span class="line"><span class="attr">test</span>: <span class="regexp">/\.(jpg|png|gif)$/</span>,</span><br><span class="line"><span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>, <span class="comment">//url-loaderæ˜¯å¯¹file-loaderçš„ä¸Šå±‚å°è£…</span></span><br><span class="line"><span class="attr">options</span>: &#123;</span><br><span class="line"><span class="attr">limit</span>: <span class="number">8</span> * <span class="number">1024</span>, <span class="comment">//ä¸´ç•Œå€¼ä¸º8KBï¼Œå°äº8KBçš„å›¾ç‰‡ä¼šè¢«è½¬ä¸ºbase64ç¼–ç </span></span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;[hash:10].[ext]&#x27;</span>, <span class="comment">//åŠ å·¥åå›¾ç‰‡çš„åå­—</span></span><br><span class="line"><span class="attr">outputPath</span>: <span class="string">&#x27;imgs&#x27;</span> <span class="comment">//è¾“å‡ºè·¯å¾„</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ul><h3 id="8-æ‰“åŒ…htmlä¸­çš„å›¾ç‰‡">8. æ‰“åŒ…htmlä¸­çš„å›¾ç‰‡</h3><ul><li><p>æ¦‚è¿°ï¼šhtmlä¸­çš„<code>&lt;img&gt;</code>æ ‡ç­¾url-loaderæ²¡æ³•å¤„ç†ï¼Œéœ€è¦å¼•å…¥å…¶ä»–loaderå¤„ç†ã€‚</p></li><li><p>æ·»åŠ å›¾ç‰‡</p><ul><li>åœ¨src/index.htmlæ·»åŠ ä¸€ä¸ªimgæ ‡ç­¾ï¼Œsrc/images/angular.png</li></ul></li><li><p>å®‰è£…loader</p><ul><li>npm install html-loader --save-dev</li></ul></li><li><p>é…ç½®loader</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   &#123;</span><br><span class="line"><span class="comment">// å¤„ç†htmlä¸­&lt;img&gt;èµ„æº</span></span><br><span class="line"><span class="attr">test</span>: <span class="regexp">/\.html$/</span>,</span><br><span class="line"><span class="attr">loader</span>: <span class="string">&#x27;html-loader&#x27;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>å¯èƒ½å‡ºç°çš„å‘ï¼šæ‰“åŒ…åhtmlæ–‡ä»¶ä¸­çš„å›¾ç‰‡çš„srcå˜æˆäº†ï¼š[object Module],</p></li><li><p>è§£å†³åŠæ³•ï¼šurl-loaderä¸­åŠ å…¥ä¸€ä¸ªé…ç½®ï¼šesModule:falseå³å¯</p></li></ul><h3 id="9-æ‰“åŒ…å…¶ä»–èµ„æº">9. æ‰“åŒ…å…¶ä»–èµ„æº</h3><ul><li>æ¦‚è¿°ï¼šå…¶ä»–èµ„æºï¼ˆå­—ä½“ã€éŸ³è§†é¢‘ç­‰ï¼‰webpackä¸èƒ½è§£æï¼Œéœ€è¦å€ŸåŠ©loaderç¼–è¯‘è§£æ</li><li>ä»¥å¤„ç†å‡ ä¸ªå­—ä½“å›¾æ ‡çš„å­—ä½“ä¸ºä¾‹ï¼Œfontä¸‹æ·»åŠ å‡ ä¸ªä¸‹è½½å¥½çš„å­—ä½“æ–‡ä»¶ï¼š<ul><li>src/font/iconfont.eot</li><li>src/font/iconfont.svg</li><li>src/font/iconfont.ttf</li><li>src/font/iconfont.woff</li><li>src/font/iconfont.woff2</li></ul></li><li>ä¿®æ”¹incofont.cssä¸­å­—ä½“çš„url  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;iconfont&#x27;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../media/iconfont.eot&#x27;</span>);</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../media/iconfont.eot?#iefix&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>),</span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&#x27;../media/iconfont.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&#x27;../media/iconfont.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),</span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&#x27;../media/iconfont.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;truetype&#x27;</span>),</span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&#x27;../media/iconfont.svg#iconfont&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;svg&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">  -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ä¿®æ”¹htmlï¼Œæ·»åŠ å­—ä½“å›¾æ ‡ï¼Œä¾‹å¦‚ï¼š<code>&lt;span class=&quot;iconfont icon-icon-test&quot;&gt;&lt;/span&gt;</code></li><li>é…ç½®loader  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†å…¶ä»–èµ„æº(å­—ä½“ã€éŸ³è§†é¢‘ç­‰ç­‰)</span></span><br><span class="line"><span class="attr">exclude</span>: <span class="regexp">/\.(html|js|css|less|jpg|png|gif)/</span>, <span class="comment">//æ’é™¤çš„æ–‡ä»¶</span></span><br><span class="line"><span class="attr">loader</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line"><span class="attr">options</span>: &#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;[hash:10].[ext]&#x27;</span>, <span class="comment">//å‘½å</span></span><br><span class="line"><span class="attr">outputPath</span>: <span class="string">&#x27;media&#x27;</span> <span class="comment">//è¾“å‡ºè·¯å¾„</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>è¿è¡ŒæŒ‡ä»¤ï¼šwebpack</li></ul><h3 id="10-devServer">10. devServer</h3><ul><li><p>å®‰è£…webpack-dev-server</p><ul><li>npm install webpack-dev-server --save-dev</li></ul></li><li><p>è¯¦ç»†é…ç½®è§å®˜ç½‘ï¼šæŒ‡å— -&gt; å¼€å‘ç¯å¢ƒ -&gt; ä½¿ç”¨webpack-dev-server</p></li><li><p>ä¿®æ”¹webpacké…ç½®å¯¹è±¡ï¼Œè¿½åŠ devServeré…ç½®ï¼ˆæ³¨æ„ä¸æ˜¯loaderä¸­è¿½åŠ ï¼‰</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//devServeré…ç½®(å¼€å‘æ¨¡å¼æ‰€ç‰¹æœ‰çš„é…ç½®)</span></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line"><span class="attr">contentBase</span>: <span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;build&#x27;</span>),<span class="comment">//æœ¬åœ°æ‰“åŒ…æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line"><span class="attr">port</span>: <span class="number">3000</span>, <span class="comment">//ç«¯å£å·</span></span><br><span class="line"><span class="attr">open</span>: <span class="literal">true</span> <span class="comment">//è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹package.jsonä¸­scriptsæŒ‡ä»¤</p><ul><li><code>&quot;dev&quot;: &quot;webpack-dev-server&quot;</code>,</li></ul></li><li><p>è¿è¡ŒæŒ‡ä»¤ï¼šnpm run dev æˆ–è€… yarn dev</p></li></ul><hr/><blockquote><p>è‡³æ­¤ï¼Œä½ å·²ç»å®Œæˆäº†ç”¨webpackæ­å»ºä¸€ä¸ªç®€å•çš„å¼€å‘ç¯å¢ƒï¼Œä½†è¿™å¥—é…ç½®åªé€‚ç”¨äºå¼€å‘è¿‡ç¨‹ä¸­è°ƒè¯•ä»£ç ï¼Œé¡¹ç›®ä¸Šçº¿å¹¶ä¸èƒ½è¿ç”¨è¿™å¥—é…ç½®ï¼Œå› ä¸ºä½ è¿˜æœ‰å¾ˆå¤šçš„é—®é¢˜æ²¡æœ‰å¤„ç†ï¼Œæ¯”å¦‚ï¼šcssè¿˜ä¸æ˜¯å•ç‹¬çš„æ–‡ä»¶ï¼Œcssã€jsè¿˜æœ‰å¾ˆå¤šå…¼å®¹æ€§é—®é¢˜ç­‰ç­‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å»æ­å»ºç”Ÿäº§ç¯å¢ƒã€‚</p></blockquote><h3 id="ç”Ÿäº§ç¯å¢ƒå‡†å¤‡ï¼š">ç”Ÿäº§ç¯å¢ƒå‡†å¤‡ï¼š</h3><p>1.æ–°å»ºconfigæ–‡ä»¶å¤¹ï¼Œé‡å‘½åwebpack.config.jsä¸ºwebpack.dev.jsï¼Œæ”¾å…¥configæ–‡ä»¶å¤¹<br>2.å¤åˆ¶webpack.dev.jsï¼Œé‡å‘½åä¸ºwebpack.prod.js,åˆ é™¤å…¶ä¸­çš„devServeré…ç½®ï¼Œå› ä¸ºè¿™æ˜¯å¼€å‘ç¯å¢ƒç‰¹æœ‰çš„ï¼Œç”Ÿäº§ç¯å¢ƒæ˜¯ä¸éœ€è¦çš„<br>3.ä¿®æ”¹package.jsonä¸­scriptsæŒ‡ä»¤ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --config ./config/webpack.dev.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --config ./config/webpack.prod.js&quot;</span></span><br></pre></td></tr></table></figure><p>4.ä¿®æ”¹outputä¸­pathä¸ºï¼š<code>path: resolve(__dirname, '../build')</code></p><h3 id="1-æå–cssä¸ºå•ç‹¬æ–‡ä»¶">1. æå–cssä¸ºå•ç‹¬æ–‡ä»¶</h3><ul><li><p>å®‰è£…æ’ä»¶</p><ul><li>npm install mini-css-extract-plugin -D</li></ul></li><li><p>å¼•å…¥æ’ä»¶</p><ul><li>const MiniCssExtractPlugin = require(â€œmini-css-extract-pluginâ€);</li></ul></li><li><p>é…ç½®loader</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥mini-css-extract-pluginï¼Œç”¨äºæå–cssä¸ºå•ç‹¬æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†lessèµ„æº</span></span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    <span class="attr">use</span>: [</span><br><span class="line">      <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">      <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†cssèµ„æº</span></span><br><span class="line"><span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="attr">use</span>: [</span><br><span class="line">      <span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>,</span><br><span class="line">      <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æ’ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//æå–cssä¸ºå•ç‹¬æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line"><span class="comment">// å¯¹è¾“å‡ºçš„cssæ–‡ä»¶è¿›è¡Œé‡å‘½å</span></span><br><span class="line"><span class="attr">filename</span>: <span class="string">&#x27;css/built.css&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤</p><ul><li>npm run build</li></ul></li><li><p>å¤‡æ³¨ï¼šç”±äºåœ¨æå–äº†ç‹¬ç«‹çš„æ–‡ä»¶ï¼Œè¦ä»å¤–éƒ¨å¼•å…¥ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæœ‰è·¯å¾„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨outputé…ç½®ä¸­ï¼Œæ·»åŠ ï¼š<code>publicPath:'/'</code> publicPathæ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œè°ƒæ•´,è‹¥ä¸Šçº¿è¿è¡Œå€¼ä¸ºï¼š/imgsï¼Œè‹¥æœ¬åœ°å³é”®è¿è¡Œå€¼ä¸ºï¼š/build/imgs</p></li></ul><h3 id="2-csså…¼å®¹æ€§å¤„ç†">2. csså…¼å®¹æ€§å¤„ç†</h3><ul><li>å®‰è£…loader<ul><li>npm install postcss postcss-loader postcss-preset-env -D</li></ul></li><li>å› ä¸ºcsså’Œlessæ ·å¼æ–‡ä»¶éƒ½è¦è¿›è¡Œå…¼å®¹æ€§å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰å¥½ä¸€ä¸ªé€šç”¨çš„é…ç½®ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®ä¸€ä¸ªcommonCssLoaderï¼Œå¤„ç†lesså’Œcssæ—¶éƒ½ä¼šä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> commonCssLoader = [</span><br><span class="line"><span class="title class_">MiniCssExtractPlugin</span>.<span class="property">loader</span>, <span class="comment">//æå–cssä¸ºå•ç‹¬çš„æ–‡ä»¶</span></span><br><span class="line"><span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">//å°†cssæ–‡ä»¶å˜æˆcommonjsæ¨¡å—åŠ è½½jsä¸­ï¼Œé‡Œé¢å†…å®¹æ˜¯æ ·å¼å­—ç¬¦ä¸²</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="comment">//æ³¨æ„ï¼šæƒ³è®©postcss-loaderå·¥ä½œï¼Œè¿˜éœ€åœ¨package.jsonä¸­å®šä¹‰browserslisté…ç½®å…¼å®¹ç¨‹åº¦</span></span><br><span class="line"> <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">ident</span>: <span class="string">&#x27;postcss&#x27;</span>,</span><br><span class="line">          <span class="attr">plugins</span>: <span class="function">() =&gt;</span> [<span class="built_in">require</span>(<span class="string">&#x27;postcss-preset-env&#x27;</span>)()]</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹css-loaderå’Œless-loaderé…ç½®</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†cssèµ„æº</span></span><br><span class="line"><span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line"><span class="attr">use</span>: [...commonCssLoader]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å¤„ç†lessèµ„æº</span></span><br><span class="line"><span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line"><span class="attr">use</span>: [...commonCssLoader, <span class="string">&#x27;less-loader&#x27;</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li><p>é…ç½®package.jsonï¼Œåœ¨å…¶ä¸­è¿½åŠ browserslisté…ç½®ï¼Œé€šè¿‡é…ç½®åŠ è½½æŒ‡å®šçš„csså…¼å®¹æ€§æ ·å¼</p>  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;browserslist&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="comment">// å¼€å‘ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">&quot;development&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="string">&quot;last 1 chrome version&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;last 1 firefox version&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="string">&quot;last 1 safari version&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="comment">// ç”Ÿäº§ç¯å¢ƒï¼šé»˜è®¤æ˜¯ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="attr">&quot;production&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="string">&quot;&gt;0.2%&quot;</span><span class="punctuation">,</span> <span class="comment">//å…¼å®¹å¸‚é¢ä¸Š99.8%çš„æµè§ˆå™¨</span></span><br><span class="line"><span class="string">&quot;not dead&quot;</span><span class="punctuation">,</span> <span class="comment">//&quot;æ­»å»&quot;çš„æµè§ˆå™¨ä¸åšå…¼å®¹ï¼Œä¾‹å¦‚IE8</span></span><br><span class="line"><span class="string">&quot;not op_mini all&quot;</span><span class="punctuation">,</span><span class="comment">//ä¸åšoperaæµè§ˆå™¨miniç‰ˆçš„å…¼å®¹</span></span><br><span class="line"><span class="string">&quot;ie 10&quot;</span> <span class="comment">//å…¼å®¹IE10</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>å¤‡æ³¨1: browserslist æ˜¯ä¸€å¥—æè¿°äº§å“ç›®æ ‡è¿è¡Œç¯å¢ƒçš„å·¥å…·ï¼Œå®ƒè¢«å¹¿æ³›ç”¨åœ¨å„ç§æ¶‰åŠæµè§ˆå™¨/ç§»åŠ¨ç«¯çš„å…¼å®¹æ€§æ”¯æŒå·¥å…·ä¸­ï¼Œè¯¦ç»†é…ç½®è§„åˆ™å‚è€ƒï¼š<a href="https://github.com/browserslist/browserslist">https://github.com/browserslist/browserslist</a></p></li><li><p>å¤‡æ³¨2ï¼šè‹¥å‡ºç°ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œæˆ–é…ç½®ä¸æ­£ç¡®çš„é”™è¯¯ï¼Œé‚£ä¹ˆéœ€æ›´æ¢ä¾èµ–åŒ…ç‰ˆæœ¬ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i less-<span class="symbol">loader@</span><span class="number">5</span> postcss-<span class="symbol">loader@</span><span class="number">3</span></span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤ï¼š</p><ul><li>npm run build</li></ul></li></ul><h3 id="3-jsè¯­æ³•æ£€æŸ¥">3. jsè¯­æ³•æ£€æŸ¥</h3><ul><li><p>æ¦‚è¿°ï¼šå¯¹jsåŸºæœ¬è¯­æ³•é”™è¯¯/éšæ‚£ï¼Œè¿›è¡Œæå‰æ£€æŸ¥</p></li><li><p>å®‰è£…loader</p><ul><li>npm install eslint-loader eslint</li></ul></li><li><p>å®‰è£…æ£€æŸ¥è§„åˆ™åº“ï¼š</p><ul><li>npm install eslint-config-airbnb-base  eslint-plugin-import</li></ul></li><li><p>å¤‡æ³¨:eslint-config-airbnb-baseå®šåˆ¶äº†ä¸€å¥—æ ‡å‡†çš„ã€å¸¸ç”¨çš„jsè¯­æ³•æ£€æŸ¥è§„åˆ™ï¼Œæ¨èä½¿ç”¨</p></li><li><p>é…ç½®loader</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">       <span class="comment">// å¯¹jsè¿›è¡Œè¯­æ³•æ£€æŸ¥</span></span><br><span class="line">       <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">       <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">       <span class="comment">// ä¼˜å…ˆæ‰§è¡Œ</span></span><br><span class="line">       <span class="attr">enforce</span>: <span class="string">&#x27;pre&#x27;</span>,</span><br><span class="line">       <span class="attr">loader</span>: <span class="string">&#x27;eslint-loader&#x27;</span>,</span><br><span class="line">       <span class="attr">options</span>: &#123;</span><br><span class="line">         <span class="attr">fix</span>: <span class="literal">true</span> <span class="comment">//è‹¥æœ‰é—®é¢˜è‡ªåŠ¨ä¿®å¤ï¼Œé‡è¦ï¼ï¼ï¼ï¼</span></span><br><span class="line">      &#125;</span><br><span class="line">&#125;      </span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹package.json</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;airbnb-base&quot;</span>, <span class="comment">//ç›´æ¥ä½¿ç”¨airbnb-baseæä¾›çš„è§„åˆ™</span></span><br><span class="line">  <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤ï¼šwebpack</p></li><li><p>å¤‡æ³¨ï¼šè‹¥å‡ºç°ï¼šwarning  Unexpected console statement  no-consoleè­¦å‘Šï¼Œæ„æ€æ˜¯ä¸åº”è¯¥åœ¨é¡¹ç›®ä¸­å†™console.log(),è‹¥æƒ³å¿½ç•¥ï¼Œå°±åœ¨è¦å¿½ç•¥æ£€æŸ¥ä»£ç çš„ä¸Šæ–¹è¾“å…¥ä¸€è¡Œæ³¨é‡Šï¼š// eslint-disable-next-lineå³å¯ã€‚</p></li></ul><h3 id="4-jsè¯­æ³•è½¬æ¢">4. jsè¯­æ³•è½¬æ¢</h3><ul><li><p>æ¦‚è¿°ï¼šå°†æµè§ˆå™¨ä¸èƒ½è¯†åˆ«çš„æ–°è¯­æ³•è½¬æ¢æˆåŸæ¥è¯†åˆ«çš„æ—§è¯­æ³•ï¼Œåšæµè§ˆå™¨å…¼å®¹æ€§å¤„ç†</p></li><li><p>å®‰è£…loader</p><ul><li>npm install babel-loader @babel/core @babel/preset-env --save-dev</li></ul></li><li><p>é…ç½®loader</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      <span class="attr">use</span>: &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡ŒæŒ‡ä»¤ï¼šwebpack</p></li></ul><h3 id="5-jså…¼å®¹æ€§å¤„ç†">5. jså…¼å®¹æ€§å¤„ç†</h3><ul><li><p>å®‰è£…åŒ…</p><ul><li>npm install @babel/polyfill</li></ul></li><li><p>ä½¿ç”¨</p>  <figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- app.js</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@babel/polyfill&#x27;</span>; <span class="comment">// åŒ…å«ES6çš„é«˜çº§è¯­æ³•çš„è½¬æ¢</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="6-å‹ç¼©htmlã€å‹ç¼©js">6. å‹ç¼©htmlã€å‹ç¼©js</h3><ul><li>ç›´æ¥ä¿®æ”¹webpack.prod.jsä¸­çš„modelä¸ºproductionå³å¯ã€‚</li><li>å¤‡æ³¨ï¼šè‹¥è®¾ç½®äº†æ¨¡å¼ä¸ºproductionï¼Œå¿…é¡»åœ¨new HtmlWebpackPluginæ—¶æ·»åŠ é…ç½®minify: falseï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">    <span class="comment">// ä»¥å½“å‰æ–‡ä»¶ä¸ºæ¨¡æ¿åˆ›å»ºæ–°çš„HtML(1. ç»“æ„å’ŒåŸæ¥ä¸€æ · 2. ä¼šè‡ªåŠ¨å¼•å…¥æ‰“åŒ…çš„èµ„æº)</span></span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>, </span><br><span class="line">    <span class="attr">minify</span>: <span class="literal">false</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure><h3 id="7-å‹ç¼©css">7.å‹ç¼©css</h3><ul><li><p>å®‰è£…æ’ä»¶</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="built_in">optimize</span>-css-assets-webpack-plugin --<span class="built_in">save</span>-dev </span><br></pre></td></tr></table></figure></li><li><p>å¼•å…¥æ’ä»¶</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">const OptimizeCssAssetsPlugin</span> = require(<span class="string">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®æ’ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">OptimizeCssAssetsPlugin</span>(&#123;</span><br><span class="line">  <span class="attr">cssProcessorPluginOptions</span>: &#123;</span><br><span class="line">    <span class="attr">preset</span>: [<span class="string">&#x27;default&#x27;</span>, &#123; <span class="attr">discardComments</span>: &#123; <span class="attr">removeAll</span>: <span class="literal">true</span> &#125; &#125;],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šå°±æ˜¯webpackç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œå¯ä»¥ç”Ÿæˆæ‰“åŒ…åçš„æ–‡ä»¶ã€‚</p></blockquote></li></ul>]]></content>
    
    
    <summary type="html">ğŸ¥æœ¬æ–‡æ±‡æ€»webpackåŸºç¡€æ•™ç¨‹ ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="å‰ç«¯ç¬”è®°" scheme="https://www.cameliia.top/categories/%E5%89%8D%E7%AB%AF%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="webpack" scheme="https://www.cameliia.top/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>Gitå‘½ä»¤</title>
    <link href="https://www.cameliia.top/posts/501.html"/>
    <id>https://www.cameliia.top/posts/501.html</id>
    <published>2023-03-13T02:00:00.000Z</published>
    <updated>2023-08-13T10:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="git">git</h2><div class="note info no-icon flat"><p>Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚<br>GitHubæ˜¯ä¸€ä¸ªåŸºäºGitåšç‰ˆæœ¬æ§åˆ¶çš„ä»£ç æ‰˜ç®¡å¹³å°ã€‚ç±»ä¼¼çš„è¿˜æœ‰Gitee, BitBucketç­‰ã€‚</p></div><blockquote><p>åœ¨Windowsä¸Šä½¿ç”¨Gitï¼Œéœ€è¦ä¸‹è½½ Git for windows è½¯ä»¶ï¼Œåœ¨å®˜ç½‘ä¸‹è½½ï¼Œé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥æ‰¾ç›¸å…³èµ„æºç½‘ç«™å»ä¸‹è½½<br>MINGW32 / MINGW64<br>å¯ä»¥å»ä¸‹é¢çš„ç½‘ç«™ä¸‹è½½<br><a href="http://npm.taobao.org/mirrors/git-for-windows/">http://npm.taobao.org/mirrors/git-for-windows/</a></p></blockquote><h2 id="åˆæ¬¡ä½¿ç”¨">åˆæ¬¡ä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–gitä»“åº“ã€‚å…ˆè¿›å…¥åˆ°è¦åˆå§‹åŒ–çš„ä»“åº“çš„æ–‡ä»¶å¤¹ï¼Œå†æ‰§è¡Œæ­¤å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œéœ€è¦é…ç½® ç”¨æˆ·åå’Œé‚®ç®±ç­‰ï¼š</span></span><br><span class="line">git config --global user.name <span class="string">&quot;å¡«å…¥è‡ªå·±çš„ç”¨æˆ·å&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;å¡«å…¥è‡ªå·±çš„é‚®ç®±åœ°å€&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">git reflog    ç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤</span><br><span class="line">gitk [filename]æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½•</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-git-config">1. git config</h2><blockquote><p>Git ä¸€å…±æœ‰3ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><ul><li>ä»“åº“çº§çš„é…ç½®æ–‡ä»¶ï¼šåœ¨ä»“åº“çš„ <code>.git/.gitconfig</code>ï¼Œè¯¥é…ç½®æ–‡ä»¶åªå¯¹æ‰€åœ¨çš„ä»“åº“æœ‰æ•ˆã€‚</li><li>å…¨å±€é…ç½®æ–‡ä»¶ï¼šMac ç³»ç»Ÿåœ¨  <code>~/.gitconfig</code>ï¼ŒWindows ç³»ç»Ÿåœ¨ <code>C:\Users\&lt;ç”¨æˆ·å&gt;\.gitconfig</code>ã€‚</li><li>ç³»ç»Ÿçº§çš„é…ç½®æ–‡ä»¶ï¼šåœ¨ Gitçš„å®‰è£…ç›®å½•ä¸‹ï¼ˆMac ç³»ç»Ÿä¸‹å®‰è£…ç›®å½•åœ¨ <code>/usr/local/git</code>ï¼‰çš„ etc æ–‡ä»¶å¤¹ä¸­çš„ <code>gitconfig</code>ã€‚</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">git config</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰gitä»“åº“çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">git config --get remote.origin.url</span><br><span class="line"><span class="comment"># æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€</span></span><br><span class="line">git config -l</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰gitç¯å¢ƒè¯¦ç»†é…ç½®</span></span><br><span class="line">git config --list</span><br><span class="line"><span class="comment"># å’Œä¸Šé¢çš„æ˜¯ä¸€æ ·çš„æ•ˆæœã€‚</span></span><br><span class="line">git config &lt;key&gt;</span><br><span class="line"><span class="comment"># æ£€æŸ¥Gitçš„æŸä¸€é¡¹è®¾ç½®ï¼Œä½¿ç”¨ä¸Šé¢æŸ¥å‡ºæ¥çš„key</span></span><br><span class="line">git config --system --list</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç³»ç»Ÿé…ç½®</span></span><br><span class="line">git config --global --list</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ·globalé…ç½®</span></span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œéœ€è¦é…ç½® ç”¨æˆ·åå’Œé‚®ç®±ç­‰ï¼š</span><br><span class="line">git config --global user.name <span class="string">&quot;å¡«å…¥è‡ªå·±çš„ç”¨æˆ·å&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;å¡«å…¥è‡ªå·±çš„é‚®ç®±åœ°å€&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-git-clone">2. git clone</h2><p>ä»è¿œç¨‹ä»“åº“å…‹éš†ä¸€ä¸ªç‰ˆæœ¬åº“åˆ°æœ¬åœ°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># é»˜è®¤åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºå’Œç‰ˆæœ¬åº“åç›¸åŒçš„æ–‡ä»¶å¤¹å¹¶ä¸‹è½½ç‰ˆæœ¬åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line">$ git <span class="built_in">clone</span> &lt;è¿œç¨‹ä»“åº“çš„ç½‘å€&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæœ¬åœ°ä»“åº“çš„ç›®å½•</span></span><br><span class="line">$ git <span class="built_in">clone</span> &lt;è¿œç¨‹ä»“åº“çš„ç½‘å€&gt; &lt;æœ¬åœ°ç›®å½•&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># -b æŒ‡å®šè¦å…‹éš†çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯masteråˆ†æ”¯</span></span><br><span class="line">$ git <span class="built_in">clone</span> &lt;è¿œç¨‹ä»“åº“çš„ç½‘å€&gt; -b &lt;åˆ†æ”¯åç§°&gt; &lt;æœ¬åœ°ç›®å½•&gt;</span><br></pre></td></tr></table></figure><h2 id="3-git-init">3. git init</h2><p>åˆå§‹åŒ–é¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œåˆå§‹åŒ–åä¼šåœ¨å½“å‰ç›®å½•ä¸‹å‡ºç°ä¸€ä¸ªåä¸º .git çš„ç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–æœ¬åœ°ä»“åº“ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ .git æ–‡ä»¶å¤¹</span></span><br><span class="line">$ git init</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-git-status">4. git status</h2><p>æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„çŠ¶æ€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„çŠ¶æ€</span></span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ç®€çŸ­æ¨¡å¼æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„çŠ¶æ€</span></span><br><span class="line"><span class="comment"># ä¼šæ˜¾ç¤ºä¸¤åˆ—ï¼Œç¬¬ä¸€åˆ—æ˜¯æ–‡ä»¶çš„çŠ¶æ€ï¼Œç¬¬äºŒåˆ—æ˜¯å¯¹åº”çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># æ–‡ä»¶çŠ¶æ€ï¼šA æ–°å¢ï¼ŒM ä¿®æ”¹ï¼ŒD åˆ é™¤ï¼Œ?? æœªæ·»åŠ åˆ°Gitä¸­</span></span><br><span class="line">$ git status -s</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-git-add">5. git add</h2><p>æŠŠè¦æäº¤çš„æ–‡ä»¶çš„ä¿¡æ¯æ·»åŠ åˆ°æš‚å­˜åŒºä¸­ã€‚å½“ä½¿ç”¨ git commit æ—¶ï¼Œå°†ä¾æ®æš‚å­˜åŒºä¸­çš„å†…å®¹æ¥è¿›è¡Œæ–‡ä»¶çš„æäº¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠŠæŒ‡å®šçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºä¸­</span></span><br><span class="line">$ git add &lt;æ–‡ä»¶è·¯å¾„&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¼šç›‘æ§å·¥ä½œåŒºçš„çŠ¶æ€æ ‘ï¼Œä½¿ç”¨å®ƒä¼šæŠŠå·¥ä½œæ—¶çš„æ‰€æœ‰å˜åŒ–æäº¤åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬æ–‡ä»¶å†…å®¹ä¿®æ”¹(modified)ä»¥åŠæ–°æ–‡ä»¶(new)ï¼Œä½†ä¸åŒ…æ‹¬è¢«åˆ é™¤çš„æ–‡ä»¶ã€‚</span></span><br><span class="line">$ git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºä¸­</span></span><br><span class="line">$ git add -u [&lt;æ–‡ä»¶è·¯å¾„&gt;]</span><br><span class="line">$ git add --update [&lt;æ–‡ä»¶è·¯å¾„&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤ã€æ–°å¢çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºä¸­ï¼Œçœç•¥ &lt;æ–‡ä»¶è·¯å¾„&gt; å³ä¸ºå½“å‰ç›®å½•</span></span><br><span class="line">$ git add -A [&lt;æ–‡ä»¶è·¯å¾„&gt;]</span><br><span class="line">$ git add --all [&lt;æ–‡ä»¶è·¯å¾„&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤ä½†æ²¡æœ‰æäº¤çš„æ–‡ä»¶ï¼Œè¿›å…¥ä¸€ä¸ªå­å‘½ä»¤ç³»ç»Ÿ</span></span><br><span class="line">$ git add -i [&lt;æ–‡ä»¶è·¯å¾„&gt;]</span><br><span class="line">$ git add --interactive [&lt;æ–‡ä»¶è·¯å¾„&gt;]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-git-commit">6. git commit</h2><p>å°†æš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠŠæš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œè°ƒç”¨æ–‡æœ¬ç¼–è¾‘å™¨è¾“å…¥è¯¥æ¬¡æäº¤çš„æè¿°ä¿¡æ¯</span></span><br><span class="line">$ git commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠæš‚å­˜åŒºä¸­çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­å¹¶æ·»åŠ æè¿°ä¿¡æ¯</span></span><br><span class="line">$ git commit -m <span class="string">&quot;&lt;æäº¤çš„æè¿°ä¿¡æ¯&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠæ‰€æœ‰ä¿®æ”¹ã€å·²åˆ é™¤çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­</span></span><br><span class="line"><span class="comment"># ä¸åŒ…æ‹¬æœªè¢«ç‰ˆæœ¬åº“è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œç­‰åŒäºå…ˆè°ƒç”¨äº† &quot;git add -u&quot;</span></span><br><span class="line">$ git commit -a -m <span class="string">&quot;&lt;æäº¤çš„æè¿°ä¿¡æ¯&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹ä¸Šæ¬¡æäº¤çš„æè¿°ä¿¡æ¯</span></span><br><span class="line">$ git commit --amend</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-git-remote">7. git remote</h2><p>æ“ä½œè¿œç¨‹åº“ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºå·²ç»å­˜åœ¨çš„è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ git remote</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºè¿œç¨‹ä»“åº“çš„è¯¦ç»†ä¿¡æ¯ï¼Œåœ¨åˆ«ååé¢åˆ—å‡ºURLåœ°å€</span></span><br><span class="line">$ git remote -v</span><br><span class="line">$ git remote --verbose</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ git remote add origin  &lt;è¿œç¨‹ä»“åº“çš„URLåœ°å€&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹è¿œç¨‹ä»“åº“çš„åˆ«å</span></span><br><span class="line">$ git remote rename &lt;åŸè¿œç¨‹ä»“åº“çš„åˆ«å&gt; &lt;æ–°çš„åˆ«å&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æŒ‡å®šåç§°çš„è¿œç¨‹ä»“åº“</span></span><br><span class="line">$ git remote remove &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt;</span><br><span class="line">$ git remote remove origin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹è¿œç¨‹ä»“åº“çš„ URL åœ°å€</span></span><br><span class="line">$ git remote set-url &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; &lt;æ–°çš„è¿œç¨‹ä»“åº“URLåœ°å€&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="8-git-pull">8. git pull</h2><p>ä»è¿œç¨‹ä»“åº“è·å–æœ€æ–°ç‰ˆæœ¬å¹¶åˆå¹¶åˆ°æœ¬åœ°ã€‚<br>é¦–å…ˆä¼šæ‰§è¡Œ git fetchï¼Œç„¶åæ‰§è¡Œ git mergeï¼ŒæŠŠè·å–çš„åˆ†æ”¯çš„ HEAD åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»è¿œç¨‹ä»“åº“è·å–æœ€æ–°ç‰ˆæœ¬ã€‚</span></span><br><span class="line">$ git pull</span><br><span class="line"><span class="comment">#  ç”¨masterä¸¾ä¾‹</span></span><br><span class="line">$ git pull origin master</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="9-git-push">9. git push</h2><p>æŠŠæœ¬åœ°ä»“åº“çš„æäº¤æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠŠæœ¬åœ°ä»“åº“çš„åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„æŒ‡å®šåˆ†æ”¯</span></span><br><span class="line">$ git push &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;</span><br><span class="line">$ git push origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æŒ‡å®šçš„è¿œç¨‹ä»“åº“çš„åˆ†æ”¯</span></span><br><span class="line">$ git push &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; :&lt;è¿œç¨‹åˆ†æ”¯å&gt;</span><br><span class="line">$ git push &lt;è¿œç¨‹ä»“åº“çš„åˆ«å&gt; --delete &lt;è¿œç¨‹åˆ†æ”¯å&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="10-git-branch">10. git branch</h2><p>æ“ä½œ Git çš„åˆ†æ”¯å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰æ‰€åœ¨åˆ†æ”¯ä»¥ &quot;*&quot; æ ‡å‡º</span></span><br><span class="line">$ git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯å¹¶æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ï¼Œå½“å‰æ‰€åœ¨åˆ†æ”¯ä»¥ &quot;*&quot; æ ‡å‡º</span></span><br><span class="line">$ git branch -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ–°åˆ†æ”¯ï¼Œæ–°çš„åˆ†æ”¯åŸºäºä¸Šä¸€æ¬¡æäº¤å»ºç«‹</span></span><br><span class="line">$ git branch &lt;åˆ†æ”¯å&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹åˆ†æ”¯åç§°</span></span><br><span class="line"><span class="comment"># å¦‚æœä¸æŒ‡å®šåŸåˆ†æ”¯åç§°åˆ™ä¸ºå½“å‰æ‰€åœ¨åˆ†æ”¯</span></span><br><span class="line">$ git branch -m [&lt;åŸåˆ†æ”¯åç§°&gt;] &lt;æ–°çš„åˆ†æ”¯åç§°&gt;</span><br><span class="line"><span class="comment"># å¼ºåˆ¶ä¿®æ”¹åˆ†æ”¯åç§°</span></span><br><span class="line">$ git branch -M [&lt;åŸåˆ†æ”¯åç§°&gt;] &lt;æ–°çš„åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æŒ‡å®šçš„æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">$ git branch -d &lt;åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼ºåˆ¶åˆ é™¤æŒ‡å®šçš„æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">$ git branch -D &lt;åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="11-git-checkout">11. git checkout</h2><p>æ£€å‡ºå‘½ä»¤ï¼Œç”¨äºåˆ›å»ºã€åˆ‡æ¢åˆ†æ”¯ç­‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ°å·²å­˜åœ¨çš„æŒ‡å®šåˆ†æ”¯</span></span><br><span class="line">$ git checkout &lt;åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æŒ‡å®šçš„åˆ†æ”¯ï¼Œä¿ç•™æ‰€æœ‰çš„æäº¤è®°å½•</span></span><br><span class="line"><span class="comment"># ç­‰åŒäº &quot;git branch&quot; å’Œ &quot;git checkout&quot; ä¸¤ä¸ªå‘½ä»¤åˆå¹¶</span></span><br><span class="line">$ git checkout -b &lt;åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æŒ‡å®šçš„åˆ†æ”¯ï¼Œåˆ é™¤æ‰€æœ‰çš„æäº¤è®°å½•</span></span><br><span class="line">$ git checkout --orphan &lt;åˆ†æ”¯åç§°&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›¿æ¢æ‰æœ¬åœ°çš„æ”¹åŠ¨ï¼Œæ–°å¢çš„æ–‡ä»¶å’Œå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºçš„å†…å®¹ä¸å—å½±å“</span></span><br><span class="line">$ git checkout &lt;æ–‡ä»¶è·¯å¾„&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ğŸæœ¬æ–‡æ±‡æ€»Gitå‘½ä»¤æ•™ç¨‹ï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="Git" scheme="https://www.cameliia.top/categories/Git/"/>
    
    
    <category term="Git" scheme="https://www.cameliia.top/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>2023å‰ç«¯é¢è¯•ç³»åˆ—â€” HTML &amp;&amp; CSSç¯‡</title>
    <link href="https://www.cameliia.top/posts/100.html"/>
    <id>https://www.cameliia.top/posts/100.html</id>
    <published>2023-03-08T02:00:00.000Z</published>
    <updated>2023-08-01T10:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2><div class="note info no-icon flat"><p>æœ¬æ–‡æ˜¯æˆ‘çš„å‰ç«¯é¢è¯•ç³»åˆ—ç³»åˆ—å¯¼èˆªï¼Œå…¶ä»–ç« èŠ‚å†…å®¹å¯ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ï¼š</p><ol><li><a href="https://www.cameliia.top/posts/100.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“HTML &amp; CSS ç¯‡</a> â‡¦å½“å‰ä½ç½®ğŸª‚</li><li><a href="https://www.cameliia.top/posts/101.html">2023å‰ç«¯é¢è¯•ç³»åˆ—-- JS ç¯‡</a></li><li><a href="https://www.cameliia.top/posts/102.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“vueç¯‡</a></li><li><a href="https://www.cameliia.top/posts/103.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“TSç¯‡</a></li><li><a href="https://www.cameliia.top/posts/104.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“Reactç¯‡</a></li><li><a href="https://www.cameliia.top/posts/105.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“ç½‘ç»œç¯‡</a></li><li><a href="https://www.cameliia.top/posts/106.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“æµè§ˆå™¨ç¯‡</a></li></ol></div><h1>HTML</h1><h2 id="HTML5-æ–°ç‰¹æ€§ã€è¯­ä¹‰åŒ–">HTML5 æ–°ç‰¹æ€§ã€è¯­ä¹‰åŒ–</h2><ol><li><p><strong>æ¦‚å¿µ</strong>ï¼š</p><p>HTML5çš„è¯­ä¹‰åŒ–æŒ‡çš„æ˜¯<code>åˆç†æ­£ç¡®çš„ä½¿ç”¨è¯­ä¹‰åŒ–çš„æ ‡ç­¾æ¥åˆ›å»ºé¡µé¢ç»“æ„</code>ã€‚ã€æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹ã€‘</p></li><li><p><strong>è¯­ä¹‰åŒ–æ ‡ç­¾</strong>ï¼š</p><p>header nav main article section aside footer</p></li><li><p><strong>è¯­ä¹‰åŒ–çš„ä¼˜ç‚¹</strong>:</p><ul><li>åœ¨<code>æ²¡CSSæ ·å¼çš„æƒ…å†µä¸‹ï¼Œé¡µé¢æ•´ä½“ä¹Ÿä¼šå‘ˆç°å¾ˆå¥½çš„ç»“æ„æ•ˆæœ</code></li><li><code>ä»£ç ç»“æ„æ¸…æ™°</code>ï¼Œæ˜“äºé˜…è¯»ï¼Œ</li><li><code>åˆ©äºå¼€å‘å’Œç»´æŠ¤</code> æ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼ˆå¦‚å±å¹•é˜…è¯»å™¨ï¼‰æ ¹æ®è¯­ä¹‰æ¸²æŸ“ç½‘é¡µã€‚</li><li><code>æœ‰åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰</code>ï¼Œæœç´¢å¼•æ“çˆ¬è™«ä¼šæ ¹æ®ä¸åŒçš„æ ‡ç­¾æ¥èµ‹äºˆä¸åŒçš„æƒé‡</li></ul></li></ol><h2 id="HTML5æ–°ç‰¹æ€§æœ‰å“ªäº›">HTML5æ–°ç‰¹æ€§æœ‰å“ªäº›</h2><ul><li>è¯­ä¹‰åŒ–æ ‡ç­¾: headerã€footerã€sectionã€navã€asideã€article</li><li>å¢å¼ºå‹è¡¨å•ï¼šinput çš„å¤šä¸ª type</li><li>è¡¨å•æ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search</li><li>æ–°å¢è¡¨å•å…ƒç´ ï¼šdatalistã€keygenã€output</li><li>æ–°å¢è¡¨å•å±æ€§ï¼šplacehoderã€requiredã€min å’Œ max</li><li>éŸ³è§†é¢‘å¤„ç†API(audio,video)</li><li>canvas / webGL</li><li>æ‹–æ‹½é‡Šæ”¾(Drag and drop)</li><li>history API</li><li>requestAnimationFrame</li><li>åœ°ç†ä½ç½®(Geolocation)API</li><li>webSocket</li><li>webå­˜å‚¨ localStorageã€SessionStorage</li><li>æ–°äº‹ä»¶ï¼šonresizeã€ondragã€onscrollã€onmousewheelã€onerrorã€onplayã€onpause</li></ul><h1>CSS3</h1><h2 id="CSS3æ–°ç‰¹æ€§">CSS3æ–°ç‰¹æ€§</h2><ul><li>åœ†è§’ ï¼ˆborder-radius:8pxï¼‰</li><li>æ–°å¢å„ç§CSSé€‰æ‹©å™¨ã€ä¼ªç±» ï¼ˆç»å¸¸ç”¨åˆ° :nth-childï¼‰</li><li>é˜´å½±<br>æ–‡å­—é˜´å½±: text-shadow: 2px 2px 2px #000;(æ°´å¹³é˜´å½±ï¼Œå‚ç›´é˜´å½±ï¼Œæ¨¡ç³Šè·ç¦»ï¼Œé˜´å½±é¢œè‰²) ç›’å­é˜´å½±: box-shadow: 10px 10px 5px #999</li><li>è¾¹æ¡† border-image: url(border.png);</li><li>æ–‡å­—æ¸²æŸ“ ï¼ˆText-decorationï¼‰<br>è½¬åŒ–ä¸ºç®€å†™å±æ€§ï¼Œå¯è®¾ç½®text-decoration-color, text-decoration-style,<br>text-decoration-lineä¸‰ä¸ªå±æ€§ï¼Œé»˜è®¤å€¼ä¸ºcurrentcolor solid noneã€‚</li><li>é€æ˜è‰² &amp; é€æ˜åº¦ï¼ˆopacityï¼‰</li><li>æ—‹è½¬ ï¼ˆtransformï¼‰</li><li>æ—‹è½¬ rotateï¼Œç¼©æ”¾ scaleï¼Œå€¾æ–œ skewï¼Œå¹³ç§» translate</li><li>åŠ¨ç”»(animation) &amp; è¿‡æ¸¡æ•ˆæœ(transition)</li><li>æ–°çš„å¸ƒå±€æ–¹å¼ï¼Œ<br>å¦‚ å¤šåˆ—å¸ƒå±€ multi-columns ã€ å¼¹æ€§å¸ƒå±€ flexible box ä¸ ç½‘æ ¼å¸ƒå±€ grid layouts</li><li>çº¿æ€§æ¸å˜ï¼ˆgradientï¼‰</li><li>å¤šèƒŒæ™¯ï¼ˆbackground-imageå¯ä»¥è®¾ç½®å¤šä¸ªurlæˆ–linear-gradientï¼‰</li><li>åª’ä½“æŸ¥è¯¢(@media MDN) (å¯ä»¥çœ‹çœ‹è¿™ä¸ª)</li><li>è¾¹æ¡†å¯ä»¥è®¾ç½®å›¾ç‰‡ï¼ˆborder-imageï¼‰</li><li>è¿‡æ¸¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ‰€æœ‰å±æ€§ä»åŸå§‹å€¼åˆ°åˆ¶å®šå€¼çš„ä¸€ä¸ªè¿‡æ¸¡ï¼Œè¿åŠ¨æ›²çº¿ease,è¿åŠ¨æ—¶é—´0.5ç§’*/</span> </span><br><span class="line">transitionï¼šall,.5s</span><br></pre></td></tr></table></figure><ul><li>åŠ¨ç”»</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//animationï¼šåŠ¨ç”»åç§°ï¼Œä¸€ä¸ªå‘¨æœŸèŠ±è´¹æ—¶é—´ï¼Œè¿åŠ¨æ›²çº¿ï¼ˆé»˜è®¤easeï¼‰ï¼ŒåŠ¨ç”»å»¶è¿Ÿï¼ˆé»˜è®¤0ï¼‰ï¼Œæ’­æ”¾æ¬¡æ•°ï¼ˆé»˜è®¤1ï¼‰ï¼Œæ˜¯å¦åå‘æ’­æ”¾åŠ¨ç”»ï¼ˆé»˜è®¤normalï¼‰ï¼Œæ˜¯å¦æš‚åœåŠ¨ç”»ï¼ˆé»˜è®¤runningï¼‰</span></span><br><span class="line"><span class="comment">/*æ‰§è¡Œä¸€æ¬¡logo2-lineåŠ¨ç”»ï¼Œè¿åŠ¨æ—¶é—´2ç§’ï¼Œè¿åŠ¨æ›²çº¿ä¸º linear*/</span></span><br><span class="line"><span class="attr">animation</span>: logo2-line 2s linear;</span><br></pre></td></tr></table></figure><ul><li>å½¢çŠ¶è½¬æ¢</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//transform:é€‚ç”¨äº2Dæˆ–3Dè½¬æ¢çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">//transform-originï¼šè½¬æ¢å…ƒç´ çš„ä½ç½®ï¼ˆå›´ç»•é‚£ä¸ªç‚¹è¿›è¡Œè½¬æ¢ï¼‰ã€‚é»˜è®¤(x,y,z)ï¼š(50%,50%,0)</span></span><br><span class="line"><span class="attr">transform</span>:<span class="title function_">translate</span>(30px,30px);</span><br><span class="line"><span class="attr">transform</span>:<span class="title function_">rotate</span>(30deg);</span><br><span class="line"><span class="attr">transform</span>:<span class="title function_">scale</span>(<span class="number">.8</span>);</span><br></pre></td></tr></table></figure><ul><li>é€‰æ‹©å™¨:nth-of-type()</li></ul><h2 id="CSS-é€‰æ‹©å™¨åŠä¼˜å…ˆçº§">CSS é€‰æ‹©å™¨åŠä¼˜å…ˆçº§</h2><p><strong>é€‰æ‹©å™¨</strong></p><ul><li>idé€‰æ‹©å™¨(#myid)</li><li>ç±»é€‰æ‹©å™¨(.myclass)</li><li>å±æ€§é€‰æ‹©å™¨(a[rel=â€œexternalâ€])</li><li>ä¼ªç±»é€‰æ‹©å™¨(a:hover, li:nth-child)</li><li>æ ‡ç­¾é€‰æ‹©å™¨(div, h1,p)</li><li>ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰</li><li>å­é€‰æ‹©å™¨(ul &gt; li)</li><li>åä»£é€‰æ‹©å™¨(li a)</li><li>é€šé…ç¬¦é€‰æ‹©å™¨(*)</li></ul><p><strong>ä¼˜å…ˆçº§ï¼š</strong></p><ul><li><code>!important</code></li><li>å†…è”æ ·å¼ï¼ˆ1000ï¼‰</li><li>IDé€‰æ‹©å™¨ï¼ˆ0100ï¼‰</li><li>ç±»é€‰æ‹©å™¨/å±æ€§é€‰æ‹©å™¨/ä¼ªç±»é€‰æ‹©å™¨ï¼ˆ0010ï¼‰</li><li>å…ƒç´ é€‰æ‹©å™¨/ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼ˆ0001ï¼‰</li><li>å…³ç³»é€‰æ‹©å™¨/é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ0000ï¼‰</li></ul><p>å¸¦!important æ ‡è®°çš„æ ·å¼å±æ€§ä¼˜å…ˆçº§æœ€é«˜ï¼› æ ·å¼è¡¨çš„æ¥æºç›¸åŒæ—¶ï¼š<br><code>!important &gt; è¡Œå†…æ ·å¼&gt;IDé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾ &gt; é€šé…ç¬¦ &gt; ç»§æ‰¿ &gt; æµè§ˆå™¨é»˜è®¤å±æ€§</code></p><h2 id="æ¸è¿›å¢å¼ºä¸ä¼˜é›…é™çº§çš„ç†è§£åŠåŒºåˆ«">æ¸è¿›å¢å¼ºä¸ä¼˜é›…é™çº§çš„ç†è§£åŠåŒºåˆ«</h2><p><strong>æ¸è¿›å¢å¼ºï¼ˆProgressive Enhancementï¼‰ï¼š</strong><br>ä¸€å¼€å§‹å°±é’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œå®ŒæˆåŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’ã€è¿½åŠ åŠŸèƒ½è¾¾åˆ°æ›´å¥½çš„ä½“éªŒã€‚</p><p><strong>ä¼˜é›…é™çº§ï¼ˆGraceful Degradationï¼‰ï¼š</strong><br>ä¸€å¼€å§‹å°±æ„å»ºç«™ç‚¹çš„å®Œæ•´åŠŸèƒ½ï¼Œç„¶åé’ˆå¯¹æµè§ˆå™¨æµ‹è¯•å’Œä¿®å¤ã€‚æ¯”å¦‚ä¸€å¼€å§‹ä½¿ç”¨ CSS3 çš„ç‰¹æ€§æ„å»ºäº†ä¸€ä¸ªåº”ç”¨ï¼Œç„¶åé€æ­¥é’ˆå¯¹å„å¤§æµè§ˆå™¨è¿›è¡Œ hack ä½¿å…¶å¯ä»¥åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸Šæ­£å¸¸æµè§ˆã€‚<br><strong>ä¸¤è€…åŒºåˆ«</strong><br>1ã€å¹¿ä¹‰ï¼š<br>å…¶å®è¦å®šä¹‰ä¸€ä¸ªåŸºå‡†çº¿ï¼Œåœ¨æ­¤ä¹‹ä¸Šçš„å¢å¼ºå«åšæ¸è¿›å¢å¼ºï¼Œåœ¨æ­¤ä¹‹ä¸‹çš„å…¼å®¹å«ä¼˜é›…é™çº§<br>2ã€ç‹­ä¹‰ï¼š<br>æ¸è¿›å¢å¼ºä¸€èˆ¬è¯´çš„æ˜¯ä½¿ç”¨CSS3æŠ€æœ¯ï¼Œåœ¨ä¸å½±å“è€æµè§ˆå™¨çš„æ­£å¸¸æ˜¾ç¤ºä¸ä½¿ç”¨æƒ…å½¢ä¸‹æ¥å¢å¼ºä½“éªŒï¼Œè€Œä¼˜é›…é™çº§åˆ™æ˜¯ä½“ç°htmlæ ‡ç­¾çš„è¯­ä¹‰ï¼Œä»¥ä¾¿åœ¨js/cssçš„åŠ è½½å¤±è´¥/è¢«ç¦ç”¨æ—¶ï¼Œä¹Ÿä¸å½±å“ç”¨æˆ·çš„ç›¸åº”åŠŸèƒ½ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¾‹å­ */</span></span><br><span class="line"><span class="selector-class">.transition</span> &#123; <span class="comment">/*æ¸è¿›å¢å¼ºå†™æ³•*/</span></span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">     -moz-<span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">       -o-<span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">          <span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.transition</span> &#123; <span class="comment">/*ä¼˜é›…é™çº§å†™æ³•*/</span></span><br><span class="line">          <span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">       -o-<span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">     -moz-<span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¸¸è§çš„å…¼å®¹æ€§é—®é¢˜">å¸¸è§çš„å…¼å®¹æ€§é—®é¢˜</h2><ol><li><p>ä¸åŒæµè§ˆå™¨çš„æ ‡ç­¾é»˜è®¤çš„marginå’Œpaddingä¸ä¸€æ ·ã€‚*{margin:0;padding:0;}</p></li><li><p>IE6åŒè¾¹è·bugï¼šå—å±æ€§æ ‡ç­¾floatåï¼Œåˆæœ‰æ¨ªè¡Œçš„marginæƒ…å†µä¸‹ï¼Œåœ¨IE6æ˜¾ç¤ºmarginæ¯”è®¾ç½®çš„å¤§ã€‚hackï¼šdisplay:inline;å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ã€‚</p></li><li><p>è®¾ç½®è¾ƒå°é«˜åº¦æ ‡ç­¾ï¼ˆä¸€èˆ¬å°äº10pxï¼‰ï¼Œåœ¨IE6ï¼ŒIE7ä¸­é«˜åº¦è¶…å‡ºè‡ªå·±è®¾ç½®é«˜åº¦ã€‚hackï¼šç»™è¶…å‡ºé«˜åº¦çš„æ ‡ç­¾è®¾ç½®overflow:hidden;æˆ–è€…è®¾ç½®è¡Œé«˜line-height å°äºä½ è®¾ç½®çš„é«˜åº¦ã€‚</p></li><li><p>Chrome ä¸­æ–‡ç•Œé¢ä¸‹é»˜è®¤ä¼šå°†å°äº 12px çš„æ–‡æœ¬å¼ºåˆ¶æŒ‰ç…§ 12px æ˜¾ç¤º,å¯é€šè¿‡åŠ å…¥ CSS å±æ€§ -webkit-text-size-adjust: none; è§£å†³ã€‚</p></li><li><p>è¶…é“¾æ¥è®¿é—®è¿‡åhoveræ ·å¼å°±ä¸å‡ºç°äº†ï¼Œè¢«ç‚¹å‡»è®¿é—®è¿‡çš„è¶…é“¾æ¥æ ·å¼ä¸å†å…·æœ‰hoverå’Œactiveäº†ã€‚è§£å†³æ–¹æ³•æ˜¯æ”¹å˜CSSå±æ€§çš„æ’åˆ—é¡ºåº:L-V-H-A ( love hate ): a:link {} a:visited {} a:hover {} a:active {}</p></li></ol><h2 id="position-å±æ€§çš„å€¼æœ‰å“ªäº›åŠå…¶åŒºåˆ«">position å±æ€§çš„å€¼æœ‰å“ªäº›åŠå…¶åŒºåˆ«</h2><p><strong>å›ºå®šå®šä½ <code>fixed</code></strong>ï¼š å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨çª—å£æ˜¯å›ºå®šä½ç½®ï¼Œå³ä½¿çª—å£æ˜¯æ»šåŠ¨çš„å®ƒä¹Ÿä¸ä¼šç§»åŠ¨ã€‚Fixed å®š ä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚ Fixed å®šä½çš„å…ƒç´ å’Œå…¶ä»–å…ƒç´ é‡å ã€‚</p><p><strong>ç›¸å¯¹å®šä½ <code>relative</code></strong>ï¼š å¦‚æœå¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œç›¸å¯¹å®šä½ï¼Œå®ƒå°†å‡ºç°åœ¨å®ƒæ‰€åœ¨çš„ä½ç½®ä¸Šã€‚ç„¶åï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å‚ç›´ æˆ–æ°´å¹³ä½ç½®ï¼Œè®©è¿™ä¸ªå…ƒç´ â€œç›¸å¯¹äºâ€å®ƒçš„èµ·ç‚¹è¿›è¡Œç§»åŠ¨ã€‚ åœ¨ä½¿ç”¨ç›¸å¯¹å®šä½æ—¶ï¼Œæ— è®ºæ˜¯ å¦è¿›è¡Œç§»åŠ¨ï¼Œå…ƒç´ ä»ç„¶å æ®åŸæ¥çš„ç©ºé—´ã€‚å› æ­¤ï¼Œç§»åŠ¨å…ƒç´ ä¼šå¯¼è‡´å®ƒè¦†ç›–å…¶å®ƒæ¡†ã€‚</p><p><strong>ç»å¯¹å®šä½ <code>absolute</code></strong>ï¼š ç»å¯¹å®šä½çš„å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½çˆ¶å…ƒç´ ï¼Œå¦‚æœå…ƒç´ æ²¡æœ‰å·²å®šä½çš„çˆ¶å…ƒç´ ï¼Œé‚£ ä¹ˆå®ƒçš„ä½ç½®ç›¸å¯¹äºã€‚absolute å®šä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚ absolute å®šä½çš„å…ƒç´ å’Œå…¶ä»–å…ƒç´ é‡å ã€‚</p><p><strong>ç²˜æ€§å®šä½ <code>sticky</code></strong>ï¼š å…ƒç´ å…ˆæŒ‰ç…§æ™®é€šæ–‡æ¡£æµå®šä½ï¼Œç„¶åç›¸å¯¹äºè¯¥å…ƒç´ åœ¨æµä¸­çš„ flow rootï¼ˆBFCï¼‰å’Œ containing blockï¼ˆæœ€è¿‘çš„å—çº§ç¥–å…ˆå…ƒç´ ï¼‰å®šä½ã€‚è€Œåï¼Œå…ƒç´ å®šä½è¡¨ç°ä¸ºåœ¨è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®š ä½ï¼Œä¹‹åä¸ºå›ºå®šå®šä½ã€‚</p><p><strong>é»˜è®¤å®šä½ <code>Static</code></strong>ï¼š é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right æˆ–è€… z-index å£° æ˜ï¼‰ã€‚ inherit: è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ position å±æ€§çš„å€¼ã€‚</p><h2 id="box-sizingå±æ€§">box-sizingå±æ€§</h2><p><strong><code>box-sizing</code></strong> è§„å®šä¸¤ä¸ªå¹¶æ’çš„å¸¦è¾¹æ¡†çš„æ¡†ï¼Œè¯­æ³•ä¸º box-sizingï¼šcontent-box/border-box/inherit</p><p><strong><code>content-box</code></strong>ï¼šå®½åº¦å’Œé«˜åº¦åˆ†åˆ«åº”ç”¨åˆ°å…ƒç´ çš„å†…å®¹æ¡†ï¼Œåœ¨å®½åº¦å’Œé«˜åº¦ä¹‹å¤–ç»˜åˆ¶å…ƒç´ çš„å†…è¾¹è·å’Œè¾¹æ¡†ã€‚ã€æ ‡å‡†ç›’å­æ¨¡å‹ã€‘</p><p><strong><code>border-box</code></strong>ï¼šä¸ºå…ƒç´ è®¾å®šçš„å®½åº¦å’Œé«˜åº¦å†³å®šäº†å…ƒç´ çš„è¾¹æ¡†ç›’ã€‚ã€IE ç›’å­æ¨¡å‹ã€‘</p><p><strong><code>inherit</code></strong>ï¼šç»§æ‰¿çˆ¶å…ƒç´ çš„ box-sizing å€¼ã€‚</p><h2 id="CSS-ç›’å­æ¨¡å‹">CSS ç›’å­æ¨¡å‹</h2><p>CSS ç›’æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›’å­ï¼Œå®ƒåŒ…æ‹¬ï¼šè¾¹è·ï¼Œè¾¹æ¡†ï¼Œå¡«å……å’Œå®é™…å†…å®¹ã€‚CSS ä¸­çš„ç›’å­æ¨¡å‹åŒ…æ‹¬ IE ç›’å­æ¨¡å‹å’Œæ ‡å‡†çš„ W3C ç›’å­æ¨¡å‹ã€‚<br>åœ¨æ ‡å‡†çš„ç›’å­æ¨¡å‹ä¸­ï¼Œ<code>width æŒ‡ content éƒ¨åˆ†çš„å®½åº¦</code>ã€‚<br>åœ¨ IE ç›’å­æ¨¡å‹ä¸­ï¼Œ<code>width è¡¨ç¤º content+padding+border è¿™ä¸‰ä¸ªéƒ¨åˆ†çš„å®½åº¦</code>ã€‚</p><p>æ•…åœ¨è®¡ç®—ç›’å­çš„å®½åº¦æ—¶å­˜åœ¨å·®å¼‚ï¼š</p><p><strong>æ ‡å‡†ç›’æ¨¡å‹ï¼š</strong> ä¸€ä¸ªå—çš„æ€»å®½åº¦ = width+margin(å·¦å³)+padding(å·¦å³)+border(å·¦å³)</p><p><strong>æ€ªå¼‚ç›’æ¨¡å‹ï¼š</strong> ä¸€ä¸ªå—çš„æ€»å®½åº¦ = width+marginï¼ˆå·¦å³ï¼‰ï¼ˆæ—¢ width å·²ç»åŒ…å«äº† padding å’Œ border å€¼ï¼‰</p><h2 id="BFCï¼ˆå—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼‰">BFCï¼ˆå—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼‰</h2><p><strong>BFCçš„æ¦‚å¿µ</strong></p><p><strong><code>BFC</code></strong> æ˜¯ <code>Block Formatting Context </code>çš„ç¼©å†™ï¼Œå³å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚<code>BFC</code>æ˜¯CSSå¸ƒå±€çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œè§„å®šäº†å†…éƒ¨boxå¦‚ä½•å¸ƒå±€ï¼Œ å¹¶ä¸”è¿™ä¸ªåŒºåŸŸçš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œå…¶ä¸­æ¯”è¾ƒé‡è¦çš„å¸ƒå±€è§„åˆ™æœ‰å†…éƒ¨ box å‚ç›´æ”¾ç½®ï¼Œè®¡ç®— BFC çš„é«˜åº¦çš„æ—¶å€™ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚</p><p><strong>BFCçš„åŸç†å¸ƒå±€è§„åˆ™</strong></p><ul><li>å†…éƒ¨çš„Boxä¼šåœ¨<code>å‚ç›´æ–¹å‘</code>ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®</li><li>Box<code>å‚ç›´æ–¹å‘çš„è·ç¦»ç”±marginå†³å®š</code>ã€‚å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”Ÿé‡å </li><li>æ¯ä¸ªå…ƒç´ çš„margin boxçš„å·¦è¾¹ï¼Œ ä¸åŒ…å«å—border boxçš„å·¦è¾¹ç›¸æ¥è§¦(å¯¹äºä»å·¦å¾€å³çš„æ ¼å¼åŒ–ï¼Œå¦åˆ™ç›¸å</li><li>BFCçš„åŒºåŸŸ<code>ä¸ä¼šä¸float boxé‡å </code></li><li>BFCæ˜¯ä¸€ä¸ªç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„<code>å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ </code></li><li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œ<code>æµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—é«˜åº¦</code></li><li>å…ƒç´ çš„ç±»å‹å’Œ<code>displayå±æ€§ï¼Œå†³å®šäº†è¿™ä¸ªBoxçš„ç±»å‹</code>ã€‚ä¸åŒç±»å‹çš„Boxä¼šå‚ä¸ä¸åŒçš„<code>Formatting Context</code>ã€‚</li></ul><p><strong>å¦‚ä½•åˆ›å»ºBFCï¼Ÿ</strong></p><ul><li>æ ¹å…ƒç´ ï¼Œå³HTMLå…ƒç´ </li><li>floatçš„å€¼ä¸ä¸ºnone</li><li>positionä¸ºabsoluteæˆ–fixed</li><li>displayçš„å€¼ä¸ºinline-blockã€table-cellã€table-caption</li><li>overflowçš„å€¼ä¸ä¸ºvisible</li></ul><p><strong>BFCçš„ä½¿ç”¨åœºæ™¯</strong></p><ul><li>å»é™¤è¾¹è·é‡å ç°è±¡</li><li>æ¸…é™¤æµ®åŠ¨ï¼ˆè®©çˆ¶å…ƒç´ çš„é«˜åº¦åŒ…å«å­æµ®åŠ¨å…ƒç´ ï¼‰</li><li>é¿å…æŸå…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</li><li>é¿å…å¤šåˆ—å¸ƒå±€ç”±äºå®½åº¦è®¡ç®—å››èˆäº”å…¥è€Œè‡ªåŠ¨æ¢è¡Œ</li></ul><h2 id="è®©ä¸€ä¸ªå…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­">è®©ä¸€ä¸ªå…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­</h2><ul><li><p><strong>æ°´å¹³å±…ä¸­</strong></p><ul><li><p>å¯¹äº è¡Œå†…å…ƒç´  : <code>text-align: center</code>;</p></li><li><p>å¯¹äºç¡®å®šå®½åº¦çš„å—çº§å…ƒç´ ï¼š</p><p>ï¼ˆ1ï¼‰widthå’Œmarginå®ç°ã€‚<code>margin: 0 auto</code>;</p><p>ï¼ˆ2ï¼‰ç»å¯¹å®šä½å’Œmargin-left: margin-left: (çˆ¶width - å­widthï¼‰/2, å‰ææ˜¯çˆ¶å…ƒç´ position: relative</p></li><li><p>å¯¹äºå®½åº¦æœªçŸ¥çš„å—çº§å…ƒç´ </p><p>ï¼ˆ1ï¼‰<code>tableæ ‡ç­¾é…åˆmarginå·¦å³autoå®ç°æ°´å¹³å±…ä¸­</code>ã€‚ä½¿ç”¨tableæ ‡ç­¾ï¼ˆæˆ–ç›´æ¥å°†å—çº§å…ƒç´ è®¾å€¼ä¸º display:tableï¼‰ï¼Œå†é€šè¿‡ç»™è¯¥æ ‡ç­¾æ·»åŠ å·¦å³marginä¸ºautoã€‚</p><p>ï¼ˆ2ï¼‰inline-blockå®ç°æ°´å¹³å±…ä¸­æ–¹æ³•ã€‚displayï¼šinline-blockå’Œtext-align:centerå®ç°æ°´å¹³å±…ä¸­ã€‚</p><p>ï¼ˆ3ï¼‰<code>ç»å¯¹å®šä½+transform</code>ï¼ŒtranslateXå¯ä»¥ç§»åŠ¨æœ¬èº«å…ƒç´ çš„50%ã€‚</p><p>ï¼ˆ4ï¼‰flexå¸ƒå±€ä½¿ç”¨<code>justify-content:center</code></p></li></ul></li><li><p><strong>å‚ç›´å±…ä¸­</strong></p><ol><li>åˆ©ç”¨ <code>line-height</code> å®ç°å±…ä¸­ï¼Œè¿™ç§æ–¹æ³•é€‚åˆçº¯æ–‡å­—ç±»</li><li>é€šè¿‡è®¾ç½®çˆ¶å®¹å™¨ ç›¸å¯¹å®šä½ ï¼Œå­çº§è®¾ç½® <code>ç»å¯¹å®šä½</code>ï¼Œæ ‡ç­¾é€šè¿‡marginå®ç°è‡ªé€‚åº”å±…ä¸­</li><li>å¼¹æ€§å¸ƒå±€ flex :çˆ¶çº§è®¾ç½®display: flex; å­çº§è®¾ç½®marginä¸ºautoå®ç°è‡ªé€‚åº”å±…ä¸­</li><li>çˆ¶çº§è®¾ç½®ç›¸å¯¹å®šä½ï¼Œå­çº§è®¾ç½®ç»å¯¹å®šä½ï¼Œå¹¶ä¸”é€šè¿‡ä½ç§» transform å®ç°</li><li><code>table å¸ƒå±€</code>ï¼Œçˆ¶çº§é€šè¿‡è½¬æ¢æˆè¡¨æ ¼å½¢å¼ï¼Œ<code>ç„¶åå­çº§è®¾ç½® vertical-align å®ç°</code>ã€‚ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼švertical-align: middleä½¿ç”¨çš„å‰ææ¡ä»¶æ˜¯å†…è”å…ƒç´ ä»¥åŠdisplayå€¼ä¸ºtable-cellçš„å…ƒç´ ï¼‰ã€‚</li></ol></li></ul><h2 id="éšè—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„æ–¹æ³•">éšè—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„æ–¹æ³•</h2><p>1.<code>opacityï¼š0</code>ï¼Œè¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¹¶ä¸”ï¼Œå¦‚æœè¯¥å…ƒç´ å·²ç»ç»‘å®š ä¸€äº›äº‹ä»¶ï¼Œå¦‚click äº‹ä»¶ï¼Œé‚£ä¹ˆç‚¹å‡»è¯¥åŒºåŸŸï¼Œä¹Ÿèƒ½è§¦å‘ç‚¹å‡»äº‹ä»¶çš„</p><p>2.<code>visibilityï¼šhidden</code>ï¼Œè¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œä½†æ˜¯ä¸ä¼šè§¦å‘è¯¥å…ƒç´ å·² ç»ç»‘å®šçš„äº‹ä»¶ ï¼Œéšè—å¯¹åº”å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä»ä¿ç•™åŸæ¥çš„ç©ºé—´ï¼ˆé‡ç»˜ï¼‰</p><p>3.<code>displayï¼šnone</code>ï¼ŒæŠŠå…ƒç´ éšè—èµ·æ¥ï¼Œå¹¶ä¸”ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¯ä»¥ç†è§£æˆåœ¨é¡µé¢ä¸­æŠŠè¯¥å…ƒç´ ã€‚ ä¸æ˜¾ç¤ºå¯¹åº”çš„å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä¸å†åˆ†é…ç©ºé—´ï¼ˆå›æµ+é‡ç»˜ï¼‰</p><blockquote><p>è¯¥é—®é¢˜ä¼šå¼•å‡º å›æµå’Œé‡ç»˜</p></blockquote><h2 id="ç”¨CSSå®ç°ä¸‰è§’ç¬¦å·">ç”¨CSSå®ç°ä¸‰è§’ç¬¦å·</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*è®°å¿†å£è¯€ï¼šç›’å­å®½é«˜å‡ä¸ºé›¶ï¼Œä¸‰é¢è¾¹æ¡†çš†é€æ˜ã€‚ */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot; &quot;</span>;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">100px</span> solid <span class="number">#ff0</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¡µé¢å¸ƒå±€">é¡µé¢å¸ƒå±€</h2><h3 id="1-Flex-å¸ƒå±€">1.Flex å¸ƒå±€</h3><p>å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäºç›’çŠ¶æ¨¡å‹ï¼Œä¾èµ– display å±æ€§ + position å±æ€§ + float å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œå‚ç›´å±…ä¸­å°±ä¸å®¹æ˜“å®ç°ã€‚</p><p>Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸º&quot;å¼¹æ€§å¸ƒå±€&quot;,ç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚æŒ‡å®šå®¹å™¨ display: flex å³å¯ã€‚ ç®€å•çš„åˆ†ä¸ºå®¹å™¨å±æ€§å’Œå…ƒç´ å±æ€§ã€‚</p><p>å®¹å™¨çš„å±æ€§ï¼š</p><ul><li>flex-directionï¼šå†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³å­ item çš„æ’åˆ—æ–¹æ³•ï¼‰flex-direction: row | row-reverse | column | column-reverse;</li><li>flex-wrapï¼šå†³å®šæ¢è¡Œè§„åˆ™ flex-wrap: nowrap | wrap | wrap-reverse;</li><li>flex-flowï¼š .box { flex-flow: || ; }</li><li>justify-contentï¼šå¯¹å…¶æ–¹å¼ï¼Œæ°´å¹³ä¸»è½´å¯¹é½æ–¹å¼</li><li>align-itemsï¼šå¯¹é½æ–¹å¼ï¼Œç«–ç›´è½´çº¿æ–¹å‘</li><li>align-content</li></ul><p>é¡¹ç›®çš„å±æ€§ï¼ˆå…ƒç´ çš„å±æ€§ï¼‰ï¼š</p><ul><li>order å±æ€§ï¼šå®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºï¼Œé¡ºåºè¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º 0</li><li>flex-grow å±æ€§ï¼šå®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œå³ä½¿å­˜åœ¨ç©ºé—´ï¼Œä¹Ÿä¸ä¼šæ”¾å¤§</li><li>flex-shrink å±æ€§ï¼šå®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œå½“ç©ºé—´ä¸è¶³çš„æƒ…å†µä¸‹ä¼šç­‰æ¯”ä¾‹çš„ç¼©å°ï¼Œå¦‚æœ å®šä¹‰ä¸ª item çš„ flow-shrink ä¸º 0ï¼Œåˆ™ä¸ºä¸ç¼©å°</li><li>flex-basis å±æ€§ï¼šå®šä¹‰äº†åœ¨åˆ†é…å¤šä½™çš„ç©ºé—´ï¼Œé¡¹ç›®å æ®çš„ç©ºé—´ã€‚</li><li>flexï¼šæ˜¯ flex-grow å’Œ flex-shrinkã€flex-basis çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º 0 1 autoã€‚</li><li>align-selfï¼šå…è®¸å•ä¸ªé¡¹ç›®ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯ä»¥è¦†ç›–</li><li>align-itemsï¼Œé»˜è®¤å± æ€§ä¸º autoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„ align-items æ¯”å¦‚è¯´ï¼Œç”¨ flex å®ç°åœ£æ¯å¸ƒå±€</li></ul><h3 id="2-Rem-å¸ƒå±€">2.Rem å¸ƒå±€</h3><p>é¦–å…ˆ Rem ç›¸å¯¹äºæ ¹(html)çš„ font-size å¤§å°æ¥è®¡ç®—ã€‚ç®€å•çš„è¯´å®ƒå°±æ˜¯ä¸€ä¸ªç›¸å¯¹å•ä¾‹ å¦‚:font-size:10px;,é‚£ä¹ˆï¼ˆ1rem = 10pxï¼‰äº†è§£è®¡ç®—åŸç†åé¦–å…ˆè§£å†³æ€ä¹ˆåœ¨ä¸åŒè®¾å¤‡ä¸Šè®¾ç½® html çš„ font-size å¤§å°ã€‚å…¶å® rem å¸ƒå±€çš„æœ¬è´¨æ˜¯ç­‰æ¯”ç¼©æ”¾ï¼Œä¸€èˆ¬æ˜¯åŸºäºå®½åº¦ã€‚</p><p><strong>ä¼˜ç‚¹</strong>ï¼šå¯ä»¥å¿«é€Ÿé€‚ç”¨ç§»åŠ¨ç«¯å¸ƒå±€ï¼Œå­—ä½“ï¼Œå›¾ç‰‡é«˜åº¦<br><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>ç›®å‰ ie ä¸æ”¯æŒï¼Œå¯¹ pc é¡µé¢æ¥è®²ä½¿ç”¨æ¬¡æ•°ä¸å¤šï¼›\</li><li>æ•°æ®é‡å¤§ï¼šæ‰€æœ‰çš„å›¾ç‰‡ï¼Œç›’å­éƒ½éœ€è¦æˆ‘ä»¬å»ç»™ä¸€ä¸ªå‡†ç¡®çš„å€¼ï¼›æ‰èƒ½ä¿è¯ä¸åŒæœºå‹çš„é€‚é…ï¼›\</li><li>åœ¨å“åº”å¼å¸ƒå±€ä¸­ï¼Œå¿…é¡»é€šè¿‡ js æ¥åŠ¨æ€æ§åˆ¶æ ¹å…ƒç´  font-size çš„å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´ css æ ·å¼å’Œ js ä»£ç æœ‰ä¸€å®šçš„è€¦åˆæ€§ã€‚ä¸”å¿…é¡»å°†æ”¹å˜ font-size çš„ä»£ç æ”¾åœ¨ css æ ·å¼ä¹‹å‰ã€‚</li></ul><h3 id="3-ç™¾åˆ†æ¯”å¸ƒå±€">3.ç™¾åˆ†æ¯”å¸ƒå±€</h3><p>é€šè¿‡ç™¾åˆ†æ¯”å•ä½ &quot; % &quot; æ¥å®ç°å“åº”å¼çš„æ•ˆæœã€‚é€šè¿‡ç™¾åˆ†æ¯”å•ä½å¯ä»¥ä½¿å¾—æµè§ˆå™¨ä¸­çš„ç»„ä»¶çš„å®½å’Œé«˜éšç€æµè§ˆå™¨çš„å˜åŒ–è€Œå˜åŒ–ï¼Œä»è€Œå®ç°å“åº”å¼çš„æ•ˆæœã€‚ ç›´è§‚çš„ç†è§£ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè®¤ä¸ºå­å…ƒç´ çš„ç™¾åˆ†æ¯”å®Œå…¨ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ ï¼Œheight ç™¾åˆ†æ¯”ç›¸ å¯¹äº heightï¼Œwidth ç™¾åˆ†æ¯”ç›¸å¯¹äº widthã€‚ paddingã€borderã€margin ç­‰ç­‰ä¸è®ºæ˜¯å‚ç›´æ–¹å‘è¿˜æ˜¯æ°´å¹³æ–¹å‘ï¼Œéƒ½ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ çš„ widthã€‚ é™¤äº† border-radius å¤–ï¼Œè¿˜æœ‰æ¯”å¦‚ translateã€background-size ç­‰éƒ½æ˜¯ç›¸å¯¹äºè‡ªèº«çš„ã€‚</p><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>è®¡ç®—å›°éš¾</li><li>å„ä¸ªå±æ€§ä¸­å¦‚æœä½¿ç”¨ç™¾åˆ†æ¯”ï¼Œç›¸å¯¹çˆ¶å…ƒç´ çš„å±æ€§å¹¶ä¸æ˜¯å”¯ä¸€çš„ã€‚é€ æˆæˆ‘ä»¬ä½¿ç”¨ç™¾åˆ†æ¯”å•ä½å®¹æ˜“ä½¿å¸ƒå±€é—®é¢˜å˜å¾—å¤æ‚ã€‚</li></ul><h3 id="4-æµ®åŠ¨å¸ƒå±€">4.æµ®åŠ¨å¸ƒå±€</h3><p>æµ®åŠ¨å¸ƒå±€:å½“å…ƒç´ æµ®åŠ¨ä»¥åå¯ä»¥å‘å·¦æˆ–å‘å³ç§»åŠ¨ï¼Œç›´åˆ°å®ƒçš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«å®ƒçš„æ¡†æˆ–è€…å¦å¤–ä¸€ä¸ªæµ®åŠ¨å…ƒç´ çš„è¾¹æ¡†ä¸ºæ­¢ã€‚å…ƒç´ æµ®åŠ¨ä»¥åä¼šè„±ç¦»æ­£å¸¸çš„æ–‡æ¡£æµï¼Œæ‰€ä»¥æ–‡æ¡£çš„æ™®é€šæµä¸­çš„æ¡†å°±å˜çš„å¥½åƒæµ®åŠ¨å…ƒç´ ä¸å­˜åœ¨ä¸€æ ·ã€‚</p><p><strong>ä¼˜ç‚¹</strong></p><p>è¿™æ ·åšçš„ä¼˜ç‚¹å°±æ˜¯åœ¨å›¾æ–‡æ··æ’çš„æ—¶å€™å¯ä»¥å¾ˆå¥½çš„ä½¿æ–‡å­—ç¯ç»•åœ¨å›¾ç‰‡å‘¨å›´ã€‚å¦å¤–å½“å…ƒç´ æµ®åŠ¨äº†èµ·æ¥ä¹‹åï¼Œå®ƒæœ‰ç€å—çº§å…ƒç´ çš„ä¸€äº›æ€§è´¨ä¾‹å¦‚å¯ä»¥è®¾ç½®å®½é«˜ç­‰ï¼Œä½†å®ƒä¸inline-blockè¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å…³äºæ¨ªå‘æ’åºçš„æ—¶å€™ï¼Œfloatå¯ä»¥è®¾ç½®æ–¹å‘è€Œinline-blockæ–¹å‘æ˜¯å›ºå®šçš„ï¼›è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯inline-blockåœ¨ä½¿ç”¨æ—¶æœ‰æ—¶ä¼šæœ‰ç©ºç™½é—´éš™çš„é—®é¢˜</p><p><strong>ç¼ºç‚¹</strong></p><p>æœ€æ˜æ˜¾çš„ç¼ºç‚¹å°±æ˜¯æµ®åŠ¨å…ƒç´ ä¸€æ—¦è„±ç¦»äº†æ–‡æ¡£æµï¼Œå°±æ— æ³•æ’‘èµ·çˆ¶å…ƒç´ ï¼Œ<code>ä¼šé€ æˆçˆ¶çº§å…ƒç´ é«˜åº¦å¡Œé™·</code>ã€‚</p><h2 id="å¦‚ä½•ä½¿ç”¨remæˆ–viewportè¿›è¡Œç§»åŠ¨ç«¯é€‚é…">å¦‚ä½•ä½¿ç”¨remæˆ–viewportè¿›è¡Œç§»åŠ¨ç«¯é€‚é…</h2><p><strong>remé€‚é…åŸç†ï¼š</strong></p><p>æ”¹å˜äº†ä¸€ä¸ªå…ƒç´ åœ¨ä¸åŒè®¾å¤‡ä¸Šå æ®çš„cssåƒç´ çš„ä¸ªæ•°</p><p>remé€‚é…çš„ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šæ²¡æœ‰ç ´åå®Œç¾è§†å£</li><li>ç¼ºç‚¹ï¼špxå€¼è½¬æ¢remå¤ªè¿‡äºå¤æ‚(ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨lessæ¥è§£å†³è¿™ä¸ªé—®é¢˜)</li></ul><p><strong>viewporté€‚é…çš„åŸç†</strong></p><p>viewporté€‚é…æ–¹æ¡ˆä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒç´ åœ¨ä¸åŒè®¾å¤‡ä¸Šå æ®çš„cssåƒç´ çš„ä¸ªæ•°æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯cssåƒç´ å’Œç‰©ç†åƒç´ çš„æ¯”ä¾‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œç­‰æ¯”çš„</p><p>viewporté€‚é…çš„ä¼˜ç¼ºç‚¹</p><ul><li>åœ¨æˆ‘ä»¬è®¾è®¡å›¾ä¸Šæ‰€é‡å–çš„å¤§å°å³ä¸ºæˆ‘ä»¬å¯ä»¥è®¾ç½®çš„åƒç´ å¤§å°ï¼Œå³æ‰€é‡å³æ‰€è®¾</li><li>ç¼ºç‚¹ç ´åå®Œç¾è§†å£</li></ul><h2 id="æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼">æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼</h2><ul><li>æ·»åŠ é¢å¤–æ ‡ç­¾</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">    //æ·»åŠ é¢å¤–æ ‡ç­¾å¹¶ä¸”æ·»åŠ clearå±æ€§</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;clear:both&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    //ä¹Ÿå¯ä»¥åŠ ä¸€ä¸ªbræ ‡ç­¾</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>çˆ¶çº§æ·»åŠ overflowå±æ€§ï¼Œæˆ–è€…è®¾ç½®é«˜åº¦</li><li>å»ºç«‹ä¼ªç±»é€‰æ‹©å™¨æ¸…é™¤æµ®åŠ¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨cssä¸­æ·»åŠ :afterä¼ªå…ƒç´ </span></span><br><span class="line">.<span class="property">parent</span>:after&#123;</span><br><span class="line">    <span class="comment">/* è®¾ç½®æ·»åŠ å­å…ƒç´ çš„å†…å®¹æ˜¯ç©º */</span></span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="comment">/* è®¾ç½®æ·»åŠ å­å…ƒç´ ä¸ºå—çº§å…ƒç´  */</span></span><br><span class="line">    <span class="attr">display</span>: block;</span><br><span class="line">    <span class="comment">/* è®¾ç½®æ·»åŠ çš„å­å…ƒç´ çš„é«˜åº¦0 */</span></span><br><span class="line">    <span class="attr">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* è®¾ç½®æ·»åŠ å­å…ƒç´ çœ‹ä¸è§ */</span></span><br><span class="line">    <span class="attr">visibility</span>: hidden;</span><br><span class="line">    <span class="comment">/* è®¾ç½®clearï¼šboth */</span></span><br><span class="line">    <span class="attr">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="CSSé¢„å¤„ç†å™¨Sassã€Lessã€Stylusçš„åŒºåˆ«">CSSé¢„å¤„ç†å™¨Sassã€Lessã€Stylusçš„åŒºåˆ«</h2><p>ä»€ä¹ˆäº‹CSSé¢„å¤„ç†å™¨?</p><p>CSSé¢„å¤„ç†å™¨æ˜¯ä¸€ç§è¯­è¨€ç”¨æ¥ä¸ºCSSå¢åŠ ä¸€äº›å˜æˆçš„ç‰¹æ€§ï¼Œæ— éœ€è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Œä¾‹å¦‚ä½ å¯ä»¥åœ¨CSSä¸­ä½¿ç”¨å˜é‡ï¼Œç®€å•çš„ç¨‹åºé€»è¾‘ã€å‡½æ•°ç­‰åœ¨ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€äº›åŸºæœ¬æŠ€å·§ï¼Œå¯ä»¥è®©CSSæ›´åŠ ç®€æ´ï¼Œé€‚åº”æ€§æ›´å¼ºï¼Œä»£ç æ›´ç›´è§‚ç­‰è¯¸å¤šå¥½å¤„<br>åŸºæœ¬è¯­æ³•åŒºåˆ«</p><p>**<code>Sass</code>**æ˜¯ä»¥.sassä¸ºæ‰©å±•åï¼Œ<code>Less</code>æ˜¯ä»¥.lessä¸ºæ‰©å±•åï¼Œ<code>Stylus</code>æ˜¯ä»¥.stylä¸ºæ‰©å±•å<br>å˜é‡çš„åŒºåˆ«</p><p><code>Sass</code> å˜é‡å¿…é¡»æ˜¯ä»¥<code>$</code>å¼€å¤´çš„ï¼Œç„¶åå˜é‡å’Œå€¼ä¹‹é—´ä½¿ç”¨å†’å·ï¼ˆï¼šï¼‰éš”å¼€ï¼Œå’Œcsså±æ€§æ˜¯ä¸€æ ·çš„ã€‚<br><code>Less</code> å˜é‡æ˜¯ä»¥<code>@</code>å¼€å¤´çš„ï¼Œå…¶ä½™sasséƒ½æ˜¯ä¸€æ ·çš„ã€‚<br><code>Stylus</code> å¯¹å˜é‡æ˜¯æ²¡æœ‰ä»»ä½•è®¾å®šçš„ï¼Œå¯ä»¥æ˜¯ä»¥$å¼€å¤´æˆ–è€…ä»»æ„å­—ç¬¦ï¼Œè€Œä¸”å˜é‡ä¹‹é—´å¯ä»¥å†’å·ï¼Œç©ºæ ¼éš”å¼€ï¼Œä½†æ˜¯åœ¨stylusä¸­ä¸èƒ½ç”¨@å¼€å¤´<br>ä¸‰ç§é¢„å¤„ç†å™¨éƒ½æœ‰ï¼šåµŒå¥—ã€è¿ç®—ç¬¦ã€é¢œè‰²å‡½æ•°ã€å¯¼å…¥ã€ç»§æ‰¿ã€æ··å…¥ã€‚Stylusè¿˜æœ‰ä¸€äº›é«˜çº§ç‰¹æ€§ã€‚ä¾‹å¦‚å¾ªç¯ã€åˆ¤æ–­ç­‰</p>]]></content>
    
    
    <summary type="html">ğŸ¥¬æœ¬æ–‡æ±‡æ€»HTML &amp;&amp; CSSï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2023å‰ç«¯é¢è¯•ç³»åˆ—â€” Vueç¯‡</title>
    <link href="https://www.cameliia.top/posts/102.html"/>
    <id>https://www.cameliia.top/posts/102.html</id>
    <published>2023-03-08T02:00:00.000Z</published>
    <updated>2023-08-01T10:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p>æœ¬æ–‡æ˜¯æˆ‘çš„å‰ç«¯é¢è¯•ç³»åˆ—ç³»åˆ—å¯¼èˆªï¼Œå…¶ä»–ç« èŠ‚å†…å®¹å¯ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ï¼š</p><ol><li><a href="https://www.cameliia.top/posts/100.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“HTML &amp; CSS ç¯‡</a> â‡¦å½“å‰ä½ç½®ğŸª‚</li><li><a href="https://www.cameliia.top/posts/101.html">2023å‰ç«¯é¢è¯•ç³»åˆ—-- JS ç¯‡</a></li><li><a href="https://www.cameliia.top/posts/102.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“vueç¯‡</a></li><li><a href="https://www.cameliia.top/posts/103.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“TSç¯‡</a></li><li><a href="https://www.cameliia.top/posts/104.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“Reactç¯‡</a></li><li><a href="https://www.cameliia.top/posts/105.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“ç½‘ç»œç¯‡</a></li><li><a href="https://www.cameliia.top/posts/106.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“æµè§ˆå™¨ç¯‡</a></li></ol></div><h1>Vue é¢è¯•ä¸“é¢˜</h1><h2 id="ç®€è¿°MVVM">ç®€è¿°MVVM</h2><p><strong>ä»€ä¹ˆæ˜¯MVVMï¼Ÿ</strong></p><p><code>è§†å›¾æ¨¡å‹åŒå‘ç»‘å®š</code>ï¼Œæ˜¯<code>Model-View-ViewModel</code>çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æŠŠ<code>MVC</code>ä¸­çš„<code>Controller</code>æ¼”å˜æˆ<code>ViewModelã€‚Model</code>å±‚ä»£è¡¨æ•°æ®æ¨¡å‹ï¼Œ<code>View</code>ä»£è¡¨UIç»„ä»¶ï¼Œ<code>ViewModel</code>æ˜¯<code>View</code>å’Œ<code>Model</code>å±‚çš„æ¡¥æ¢ï¼Œæ•°æ®ä¼šç»‘å®šåˆ°<code>viewModel</code>å±‚å¹¶è‡ªåŠ¨å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸­ï¼Œè§†å›¾å˜åŒ–çš„æ—¶å€™ä¼šé€šçŸ¥<code>viewModel</code>å±‚æ›´æ–°æ•°æ®ã€‚ä»¥å‰æ˜¯æ“ä½œDOMç»“æ„æ›´æ–°è§†å›¾ï¼Œç°åœ¨æ˜¯<code>æ•°æ®é©±åŠ¨è§†å›¾</code>ã€‚</p><p><strong>MVVMçš„ä¼˜ç‚¹ï¼š</strong></p><p>1.<code>ä½è€¦åˆ</code>ã€‚è§†å›¾ï¼ˆViewï¼‰å¯ä»¥ç‹¬ç«‹äºModelå˜åŒ–å’Œä¿®æ”¹ï¼Œä¸€ä¸ªModelå¯ä»¥ç»‘å®šåˆ°ä¸åŒçš„Viewä¸Šï¼Œå½“Viewå˜åŒ–çš„æ—¶å€™Modelå¯ä»¥ä¸å˜åŒ–ï¼Œå½“Modelå˜åŒ–çš„æ—¶å€™Viewä¹Ÿå¯ä»¥ä¸å˜ï¼›<br>2.<code>å¯é‡ç”¨æ€§</code>ã€‚ä½ å¯ä»¥æŠŠä¸€äº›è§†å›¾é€»è¾‘æ”¾åœ¨ä¸€ä¸ªModelé‡Œé¢ï¼Œè®©å¾ˆå¤šViewé‡ç”¨è¿™æ®µè§†å›¾é€»è¾‘ã€‚<br>3.<code>ç‹¬ç«‹å¼€å‘</code>ã€‚å¼€å‘äººå‘˜å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæ•°æ®çš„å¼€å‘(ViewModel)ï¼Œè®¾è®¡äººå‘˜å¯ä»¥ä¸“æ³¨äºé¡µé¢è®¾è®¡ã€‚<br>4.<code>å¯æµ‹è¯•</code>ã€‚</p><h2 id="Vueåº•å±‚å®ç°åŸç†">Vueåº•å±‚å®ç°åŸç†</h2><p>vue.jsæ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡Object.defineProperty()æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterå’Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒ<br>Vueæ˜¯ä¸€ä¸ªå…¸å‹çš„MVVMæ¡†æ¶ï¼Œæ¨¡å‹ï¼ˆModelï¼‰åªæ˜¯æ™®é€šçš„javascriptå¯¹è±¡ï¼Œä¿®æ”¹å®ƒåˆ™è¯•å›¾ï¼ˆViewï¼‰ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ç§è®¾è®¡è®©çŠ¶æ€ç®¡ç†å˜å¾—éå¸¸ç®€å•è€Œç›´è§‚</p><p><strong>Observerï¼ˆæ•°æ®ç›‘å¬å™¨ï¼‰</strong> : Observerçš„æ ¸å¿ƒæ˜¯é€šè¿‡Object.defineProprtty()æ¥ç›‘å¬æ•°æ®çš„å˜åŠ¨ï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨å¯ä»¥å®šä¹‰setterå’Œgetterï¼Œæ¯å½“æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘setterã€‚è¿™æ—¶å€™Observerå°±è¦é€šçŸ¥è®¢é˜…è€…ï¼Œè®¢é˜…è€…å°±æ˜¯Watcher</p><p><strong>Watcherï¼ˆè®¢é˜…è€…ï¼‰</strong> : Watcherè®¢é˜…è€…ä½œä¸ºObserverå’ŒCompileä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯ï¼š</p><ol><li>åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨(dep)é‡Œé¢æ·»åŠ è‡ªå·±</li><li>è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ªupdate()æ–¹æ³•</li><li>å¾…å±æ€§å˜åŠ¨dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„update()æ–¹æ³•ï¼Œå¹¶è§¦å‘Compileä¸­ç»‘å®šçš„å›è°ƒ</li></ol><p><strong>Compileï¼ˆæŒ‡ä»¤è§£æå™¨ï¼‰</strong> : Compileä¸»è¦åšçš„äº‹æƒ…æ˜¯è§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ é‰´å®šæ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è¯•å›¾</p><h2 id="è°ˆè°ˆå¯¹vueç”Ÿå‘½å‘¨æœŸçš„ç†è§£ï¼Ÿ">è°ˆè°ˆå¯¹vueç”Ÿå‘½å‘¨æœŸçš„ç†è§£ï¼Ÿ</h2><p>æ¯ä¸ª<code>Vue</code>å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½ä¼šç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œ<code>vue</code>çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå°±æ˜¯è¯´åœ¨è¾¾åˆ°æŸä¸€é˜¶æ®µæˆ–æ¡ä»¶æ—¶å»è§¦å‘çš„å‡½æ•°ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å®Œæˆä¸€äº›åŠ¨ä½œæˆ–è€…äº‹ä»¶</p><ul><li><code>createé˜¶æ®µ</code>ï¼švueå®ä¾‹è¢«åˆ›å»º<br><code>beforeCreate</code>: æœ€åˆè°ƒç”¨è§¦å‘ï¼Œåˆ›å»ºå‰ï¼Œæ­¤æ—¶dataå’Œmethodsä¸­çš„æ•°æ®éƒ½è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œdataå’Œeventséƒ½ä¸èƒ½ç”¨<br><code>created</code>ï¼š åˆ›å»ºå®Œæ¯•ï¼Œdataä¸­æœ‰å€¼ï¼ŒæœªæŒ‚è½½ï¼Œdataå’Œeventså·²ç»åˆå§‹åŒ–å¥½ï¼Œdataå·²ç»å…·æœ‰å“åº”å¼ï¼›åœ¨è¿™é‡Œå¯ä»¥å‘é€è¯·æ±‚</li><li><code>mounté˜¶æ®µ</code>ï¼š vueå®ä¾‹è¢«æŒ‚è½½åˆ°çœŸå®DOMèŠ‚ç‚¹<br><code>beforeMount</code>ï¼šåœ¨æ¨¡ç‰ˆç¼–è¯‘ä¹‹åï¼Œæ¸²æŸ“ä¹‹å‰è§¦å‘ï¼Œå¯ä»¥å‘èµ·æœåŠ¡ç«¯è¯·æ±‚ï¼Œå»æ•°æ®ï¼Œssrä¸­ä¸å¯ç”¨ï¼ŒåŸºæœ¬ç”¨ä¸ä¸Šè¿™ä¸ªhook<br><code>mounted</code>: åœ¨æ¸²æŸ“ä¹‹åè§¦å‘ï¼Œæ­¤æ—¶å¯ä»¥æ“ä½œDOMï¼Œå¹¶èƒ½è®¿é—®ç»„ä»¶ä¸­çš„DOMä»¥åŠ$ref,SSRä¸­ä¸å¯ç”¨</li><li><code>updateé˜¶æ®µ</code>ï¼šå½“vueå®ä¾‹é‡Œé¢çš„dataæ•°æ®å˜åŒ–æ—¶ï¼Œè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“<br><code>beforeUpdate</code> :æ›´æ–°å‰ï¼Œåœ¨æ•°æ®å˜åŒ–åï¼Œæ¨¡ç‰ˆæ”¹å˜å‰è§¦å‘ï¼Œåˆ‡å‹¿ä½¿ç”¨å®ƒç›‘å¬æ•°æ®å˜åŒ–<br><code>updated</code>ï¼šæ›´æ–°åï¼Œåœ¨æ•°æ®æ”¹å˜åï¼Œæ¨¡ç‰ˆæ”¹å˜åè§¦å‘ï¼Œå¸¸ç”¨äºé‡æ¸²æŸ“æ¡ˆåçš„æ‰“ç‚¹ï¼Œæ€§èƒ½æ£€æµ‹æˆ–è§¦å‘vueç»„ä»¶ä¸­évueç»„ä»¶çš„æ›´æ–°</li><li><code>destroyé˜¶æ®µ</code>ï¼švueå®ä¾‹è¢«é”€æ¯<br><code>beforeDestroy</code>ï¼šå®ä¾‹è¢«é”€æ¯å‰ï¼Œç»„ä»¶å¸è½½å‰è§¦å‘ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨é”€æ¯ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ­¤æ—¶æ¸…ç†äº‹ä»¶ã€è®¡æ—¶å™¨æˆ–è€…å–æ¶ˆè®¢é˜…æ“ä½œ<br><code>destroyed</code>:å¸è½½å®Œæ¯•åè§¦å‘ï¼Œé”€æ¯åï¼Œå¯ä»¥åšæœ€åçš„æ‰“ç‚¹æˆ–äº‹ä»¶è§¦å‘æ“ä½œ</li></ul><h3 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h3><p>ç”Ÿå‘½å‘¨æœŸï¼ˆçˆ¶å­ç»„ä»¶ï¼‰ çˆ¶ç»„ä»¶beforeCreate --&gt; çˆ¶ç»„ä»¶created --&gt; çˆ¶ç»„ä»¶beforeMount --&gt; å­ç»„ä»¶beforeCreate --&gt; å­ç»„ä»¶created --&gt; å­ç»„ä»¶beforeMount --&gt; å­ç»„ä»¶ mounted --&gt; çˆ¶ç»„ä»¶mounted --&gt;çˆ¶ç»„ä»¶beforeUpdate --&gt;å­ç»„ä»¶beforeDestroyâ€“&gt; å­ç»„ä»¶destroyed --&gt; çˆ¶ç»„ä»¶updated</p><p><strong>åŠ è½½æ¸²æŸ“è¿‡ç¨‹</strong>Â çˆ¶beforeCreate-&gt;çˆ¶created-&gt;çˆ¶beforeMount-&gt;å­beforeCreate-&gt;å­created-&gt;å­beforeMount-&gt;å­mounted-&gt;çˆ¶mounted</p><p><strong>æŒ‚è½½é˜¶æ®µ</strong>Â çˆ¶created-&gt;å­created-&gt;å­mounted-&gt;çˆ¶mounted</p><p><strong>çˆ¶ç»„ä»¶æ›´æ–°é˜¶æ®µ</strong>Â çˆ¶beforeUpdate-&gt;çˆ¶updated</p><p><strong>å­ç»„ä»¶æ›´æ–°é˜¶æ®µ</strong>Â çˆ¶beforeUpdate-&gt;å­beforeUpdate-&gt;å­updated-&gt;çˆ¶updated</p><p><strong>é”€æ¯é˜¶æ®µ</strong>Â çˆ¶beforeDestroy-&gt;å­beforeDestroy-&gt;å­destroyed-&gt;çˆ¶destroyed</p><h2 id="computedä¸watch"><code>computedä¸watch</code></h2><p><code>computed</code>è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶å®ƒå±æ€§è®¡ç®—å€¼ï¼Œå†…éƒ¨ä»»ä¸€ä¾èµ–é¡¹çš„å˜åŒ–éƒ½ä¼šé‡æ–°æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè®¡ç®—å±æ€§æœ‰ç¼“å­˜ï¼Œå¤šæ¬¡é‡å¤ä½¿ç”¨è®¡ç®—å±æ€§æ—¶ä¼šä»ç¼“å­˜ä¸­è·å–è¿”å›å€¼ï¼Œè®¡ç®—å±æ€§å¿…é¡»è¦æœ‰<code>return</code>å…³é”®è¯ã€‚<br><code>watch</code>ä¾¦å¬åˆ°æŸä¸€æ•°æ®çš„å˜åŒ–ä»è€Œè§¦å‘å‡½æ•°ã€‚å½“æ•°æ®ä¸ºå¯¹è±¡ç±»å‹æ—¶ï¼Œå¯¹è±¡ä¸­çš„å±æ€§å€¼å˜åŒ–æ—¶éœ€è¦ä½¿ç”¨æ·±åº¦ä¾¦å¬<code>deep</code>å±æ€§ï¼Œä¹Ÿå¯åœ¨é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ä½¿ç”¨ç«‹å³ä¾¦å¬<code>immdiate</code>å±æ€§ã€‚</p><p><strong>ä½¿ç”¨åœºæ™¯</strong> <code>computed</code>ï¼šå½“ä¸€ä¸ªå±æ€§å—å¤šä¸ªå±æ€§å½±å“çš„æ—¶å€™ä½¿ç”¨ï¼Œä¾‹ï¼šè´­ç‰©è½¦å•†å“ç»“ç®—åŠŸèƒ½ <code>watch</code>ï¼šå½“ä¸€æ¡æ•°æ®å½±å“å¤šæ¡æ•°æ®çš„æ—¶å€™ä½¿ç”¨ï¼Œä¾‹ï¼šæœç´¢æ•°æ®</p><h2 id="Vue-çš„å“åº”å¼åŸç†">Vue çš„å“åº”å¼åŸç†</h2><p>Vue 2 ä¸­çš„æ•°æ®å“åº”å¼ä¼šæ ¹æ®æ•°æ®ç±»å‹åšä¸åŒçš„å¤„ç†ã€‚å¦‚æœæ˜¯å¯¹è±¡ï¼Œåˆ™é€šè¿‡<code>Object.defineProperty(obj,key,descriptor)</code>æ‹¦æˆªå¯¹è±¡å±æ€§è®¿é—®ï¼Œå½“æ•°æ®è¢«è®¿é—®æˆ–æ”¹å˜æ—¶ï¼Œæ„ŸçŸ¥å¹¶ä½œå‡ºååº”ï¼›å¦‚æœæ˜¯æ•°ç»„ï¼Œåˆ™é€šè¿‡è¦†ç›–æ•°ç»„åŸå‹çš„æ–¹æ³•ï¼Œæ‰©å±•å®ƒçš„7ä¸ªå˜æ›´æ–¹æ³•ï¼ˆpushã€popã€shiftã€unshiftã€spliceã€sortã€reverseï¼‰ï¼Œä½¿è¿™äº›æ–¹æ³•å¯ä»¥é¢å¤–çš„åšæ›´æ–°é€šçŸ¥ï¼Œä»è€Œåšå‡ºå“åº”ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ul><li>åˆå§‹åŒ–æ—¶çš„é€’å½’éå†ä¼šé€ æˆæ€§èƒ½æŸå¤±ï¼›</li><li>é€šçŸ¥æ›´æ–°è¿‡ç¨‹éœ€è¦ç»´æŠ¤å¤§é‡ <code>dep</code> å®ä¾‹å’Œ <code>watcher</code> å®ä¾‹ï¼Œé¢å¤–å ç”¨å†…å­˜è¾ƒå¤šï¼›</li><li>æ–°å¢æˆ–åˆ é™¤å¯¹è±¡å±æ€§æ— æ³•æ‹¦æˆªï¼Œéœ€è¦é€šè¿‡ <code>Vue.set</code> åŠ <code>delete </code>è¿™æ ·çš„ API æ‰èƒ½ç”Ÿæ•ˆï¼›</li><li>å¯¹äºES6ä¸­æ–°äº§ç”Ÿçš„Mapã€Setè¿™äº›æ•°æ®ç»“æ„ä¸æ”¯æŒã€‚</li></ul><p>Vue 3 ä¸­åˆ©ç”¨ES6çš„<code>Proxy</code>æœºåˆ¶ä»£ç†éœ€è¦å“åº”åŒ–çš„æ•°æ®ã€‚å¯ä»¥åŒæ—¶æ”¯æŒå¯¹è±¡å’Œæ•°ç»„ï¼ŒåŠ¨æ€å±æ€§å¢ã€åˆ éƒ½å¯ä»¥æ‹¦æˆªï¼Œæ–°å¢æ•°æ®ç»“æ„å‡æ”¯æŒï¼Œå¯¹è±¡åµŒå¥—å±æ€§è¿è¡Œæ—¶é€’å½’ï¼Œç”¨åˆ°æ—¶æ‰ä»£ç†ï¼Œä¹Ÿä¸éœ€è¦ç»´æŠ¤ç‰¹åˆ«å¤šçš„ä¾èµ–å…³ç³»ï¼Œæ€§èƒ½å–å¾—å¾ˆå¤§è¿›æ­¥ã€‚</p><h2 id="Vueä¸­keyçš„ä½œç”¨ï¼Ÿ">Vueä¸­keyçš„ä½œç”¨ï¼Ÿ</h2><p><code>key</code>çš„ä½œç”¨ä¸»è¦æ˜¯<code>ä¸ºäº†æ›´åŠ é«˜æ•ˆçš„æ›´æ–°è™šæ‹Ÿ DOM</code>ã€‚<br>Vue åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸åŒæ—¶ï¼Œä¸»è¦æ˜¯åˆ¤æ–­ä¸¤è€…çš„<code>key</code>å’Œå…ƒç´ ç±»å‹<code>tag</code>ã€‚å› æ­¤ï¼Œå¦‚æœä¸è®¾ç½®key<br>ï¼Œå®ƒçš„å€¼å°±æ˜¯<code>undefined</code>ï¼Œåˆ™å¯èƒ½æ°¸è¿œè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªç›¸åŒçš„èŠ‚ç‚¹ï¼Œåªèƒ½å»åšæ›´æ–°æ“ä½œï¼Œå°†é€ æˆå¤§é‡çš„ DOM æ›´æ–°æ“ä½œã€‚</p><h2 id="ç»„ä»¶ä¸­çš„dataä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ">ç»„ä»¶ä¸­çš„dataä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ</h2><p>1.ä¸€ä¸ªç»„ä»¶è¢«å¤ç”¨å¤šæ¬¡çš„è¯ï¼Œä¹Ÿå°±ä¼šåˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚æœ¬è´¨ä¸Šï¼Œè¿™äº›å®ä¾‹ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªæ„é€ å‡½æ•°ã€‚<br>2.å¦‚æœdataæ˜¯å¯¹è±¡çš„è¯ï¼Œå¯¹è±¡å±äºå¼•ç”¨ç±»å‹ï¼Œä¼šå½±å“åˆ°æ‰€æœ‰çš„å®ä¾‹ã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯ç»„ä»¶ä¸åŒçš„å®ä¾‹ä¹‹é—´dataä¸å†²çªï¼Œdataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p><h2 id="ä¸ºä»€ä¹ˆv-forå’Œv-ifä¸å»ºè®®ç”¨åœ¨ä¸€èµ·">ä¸ºä»€ä¹ˆv-forå’Œv-ifä¸å»ºè®®ç”¨åœ¨ä¸€èµ·</h2><p>1.å½“ v-for å’Œ v-if å¤„äºåŒä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œv-for çš„ä¼˜å…ˆçº§æ¯” v-if æ›´é«˜ï¼Œè¿™æ„å‘³ç€ v-if å°†åˆ†åˆ«é‡å¤è¿è¡Œäºæ¯ä¸ª v-for å¾ªç¯ä¸­ã€‚å¦‚æœè¦éå†çš„æ•°ç»„å¾ˆå¤§ï¼Œè€ŒçœŸæ­£è¦å±•ç¤ºçš„æ•°æ®å¾ˆå°‘æ—¶ï¼Œè¿™å°†é€ æˆå¾ˆå¤§çš„æ€§èƒ½æµªè´¹<br>2.è¿™ç§åœºæ™¯å»ºè®®ä½¿ç”¨ computedï¼Œå…ˆå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤</p><p>æ³¨æ„ï¼š3.x ç‰ˆæœ¬ä¸­Â <code>v-if</code>Â æ€»æ˜¯ä¼˜å…ˆäºÂ <code>v-for</code>Â ç”Ÿæ•ˆã€‚ç”±äºè¯­æ³•ä¸Šå­˜åœ¨æ­§ä¹‰ï¼Œå»ºè®®é¿å…åœ¨åŒä¸€å…ƒç´ ä¸ŠåŒæ—¶ä½¿ç”¨ä¸¤è€…ã€‚æ¯”èµ·åœ¨æ¨¡æ¿å±‚é¢ç®¡ç†ç›¸å…³é€»è¾‘ï¼Œæ›´å¥½çš„åŠæ³•æ˜¯é€šè¿‡åˆ›å»ºè®¡ç®—å±æ€§ç­›é€‰å‡ºåˆ—è¡¨ï¼Œå¹¶ä»¥æ­¤åˆ›å»ºå¯è§å…ƒç´ ã€‚</p><h2 id="React-Vue-é¡¹ç›®ä¸­-key-çš„ä½œç”¨">React/Vue é¡¹ç›®ä¸­ key çš„ä½œç”¨</h2><ol><li><p>keyçš„ä½œç”¨æ˜¯ä¸ºäº†åœ¨diffç®—æ³•æ‰§è¡Œæ—¶æ›´å¿«çš„æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œ<code>æé«˜diffé€Ÿåº¦ï¼Œæ›´é«˜æ•ˆçš„æ›´æ–°è™šæ‹ŸDOM</code>;</p><p>vueå’Œreactéƒ½æ˜¯é‡‡ç”¨diffç®—æ³•æ¥å¯¹æ¯”æ–°æ—§è™šæ‹ŸèŠ‚ç‚¹ï¼Œä»è€Œæ›´æ–°èŠ‚ç‚¹ã€‚åœ¨vueçš„diffå‡½æ•°ä¸­ï¼Œä¼šæ ¹æ®æ–°èŠ‚ç‚¹çš„keyå»å¯¹æ¯”æ—§èŠ‚ç‚¹æ•°ç»„ä¸­çš„keyï¼Œä»è€Œæ‰¾åˆ°ç›¸åº”æ—§èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æ‰¾åˆ°å°±è®¤ä¸ºæ˜¯ä¸€ä¸ªæ–°å¢èŠ‚ç‚¹ã€‚è€Œå¦‚æœæ²¡æœ‰keyï¼Œé‚£ä¹ˆå°±ä¼šé‡‡ç”¨éå†æŸ¥æ‰¾çš„æ–¹å¼å»æ‰¾åˆ°å¯¹åº”çš„æ—§èŠ‚ç‚¹ã€‚ä¸€ç§ä¸€ä¸ªmapæ˜ å°„ï¼Œå¦ä¸€ç§æ˜¯éå†æŸ¥æ‰¾ã€‚ç›¸æ¯”è€Œè¨€ã€‚mapæ˜ å°„çš„é€Ÿåº¦æ›´å¿«ã€‚</p></li><li><p>ä¸ºäº†åœ¨æ•°æ®å˜åŒ–æ—¶å¼ºåˆ¶æ›´æ–°ç»„ä»¶ï¼Œä»¥é¿å…<code>â€œå°±åœ°å¤ç”¨â€</code>å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚</p><p>å½“ Vue.js ç”¨Â <code>v-for</code>Â æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ç”¨â€œå°±åœ°å¤ç”¨â€ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒåœ¨ç‰¹å®šç´¢å¼•ä¸‹æ˜¾ç¤ºå·²è¢«æ¸²æŸ“è¿‡çš„æ¯ä¸ªå…ƒç´ ã€‚é‡å¤çš„keyä¼šé€ æˆæ¸²æŸ“é”™è¯¯ã€‚</p></li></ol><h3 id="æ•°ç»„æ‰å¹³åŒ–è½¬æ¢">æ•°ç»„æ‰å¹³åŒ–è½¬æ¢</h3><p>åœ¨è¯´åˆ°æ¨¡ç‰ˆç¼–è¯‘çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šæåˆ°æ•°ç»„çš„è½¬æ¢ï¼Œä¸€èˆ¬å°±ç”¨é€’å½’å¤„ç†<br>å°† [1,2,3,[4,5]] è½¬æ¢æˆ</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    children:[</span><br><span class="line">        &#123;</span><br><span class="line">            value:<span class="number">1</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            value:<span class="number">2</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            value:<span class="number">3</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            children:[</span><br><span class="line">                &#123;</span><br><span class="line">                    value:<span class="number">4</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    value:<span class="number">5</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> arr =[<span class="number">1</span>,<span class="number">2</span>ï¼Œ<span class="number">3</span>ï¼Œ[<span class="number">4</span>,<span class="number">5</span>]];</span><br><span class="line"><span class="comment">// è½¬æ¢å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">convert</span>(<span class="params">arr</span>)&#123;</span><br><span class="line">    <span class="comment">//å‡†å¤‡ä¸€ä¸ªæ¥æ”¶ç»“æœæ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> result = [];</span><br><span class="line">    <span class="comment">// éå†ä¼ å…¥çš„ arr çš„æ¯ä¸€é¡¹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;arr.<span class="property">length</span>;i++)&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœéå†åˆ°çš„æ•°å­—æ˜¯numberï¼Œç›´æ¥æ”¾è¿›å…¥</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> arr[i] == <span class="string">&#x27;number&#x27;</span>)&#123;</span><br><span class="line">            result.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">value</span>:arr[i]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(arr[i]))&#123;</span><br><span class="line">            <span class="comment">//å¦‚æœéå†åˆ°è¿™ä¸ªé¡¹ç›®æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆå°±é€’å½’</span></span><br><span class="line">            result.<span class="title function_">push</span>(&#123;</span><br><span class="line">                <span class="attr">children</span>: <span class="title function_">convert</span>(arr[i])</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = <span class="title function_">convert</span>(arr);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(o);</span><br></pre></td></tr></table></figure><h2 id="è¯´è¯´ä½ å¯¹-SPA-å•é¡µé¢çš„ç†è§£ï¼Œå®ƒçš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">è¯´è¯´ä½ å¯¹ SPA å•é¡µé¢çš„ç†è§£ï¼Œå®ƒçš„ä¼˜ç¼ºç‚¹åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>SPAï¼ˆ single-page application ï¼‰ä»…åœ¨ Web é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½ç›¸åº”çš„ <code>HTML</code>ã€<code>JavaScript</code> å’Œ <code>CSS</code>ã€‚ä¸€æ—¦é¡µé¢åŠ è½½å®Œæˆï¼Œ<code>SPA</code> ä¸ä¼šå› ä¸ºç”¨æˆ·çš„æ“ä½œè€Œè¿›è¡Œé¡µé¢çš„é‡æ–°åŠ è½½æˆ–è·³è½¬ï¼›å–è€Œä»£ä¹‹çš„æ˜¯åˆ©ç”¨è·¯ç”±æœºåˆ¶å®ç° HTML å†…å®¹çš„å˜æ¢ï¼ŒUI ä¸ç”¨æˆ·çš„äº¤äº’ï¼Œé¿å…é¡µé¢çš„é‡æ–°åŠ è½½ã€‚</p><ol><li>ä¼˜ç‚¹ï¼š</li></ol><ul><li>ç”¨æˆ·ä½“éªŒå¥½ã€å¿«ï¼Œå†…å®¹çš„æ”¹å˜ä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œé¿å…äº†ä¸å¿…è¦çš„è·³è½¬å’Œé‡å¤æ¸²æŸ“ï¼›</li><li>åŸºäºä¸Šé¢ä¸€ç‚¹ï¼ŒSPA ç›¸å¯¹å¯¹æœåŠ¡å™¨å‹åŠ›å°ï¼›</li><li>å‰åç«¯èŒè´£åˆ†ç¦»ï¼Œæ¶æ„æ¸…æ™°ï¼Œå‰ç«¯è¿›è¡Œäº¤äº’é€»è¾‘ï¼Œåç«¯è´Ÿè´£æ•°æ®å¤„ç†ï¼›</li></ul><ol start="2"><li>ç¼ºç‚¹ï¼š</li></ol><ul><li>åˆæ¬¡åŠ è½½è€—æ—¶å¤šï¼šä¸ºå®ç°å•é¡µ Web åº”ç”¨åŠŸèƒ½åŠæ˜¾ç¤ºæ•ˆæœï¼Œéœ€è¦åœ¨åŠ è½½é¡µé¢çš„æ—¶å€™å°† <code>JavaScript</code>ã€<code>CSS</code> ç»Ÿä¸€åŠ è½½ï¼Œéƒ¨åˆ†é¡µé¢æŒ‰éœ€åŠ è½½ï¼›</li><li>å‰è¿›åé€€è·¯ç”±ç®¡ç†ï¼šç”±äºå•é¡µåº”ç”¨åœ¨ä¸€ä¸ªé¡µé¢ä¸­æ˜¾ç¤ºæ‰€æœ‰çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨æµè§ˆå™¨çš„å‰è¿›åé€€åŠŸèƒ½ï¼Œæ‰€æœ‰çš„é¡µé¢åˆ‡æ¢éœ€è¦è‡ªå·±å»ºç«‹å †æ ˆç®¡ç†ï¼›</li><li>SEO éš¾åº¦è¾ƒå¤§ï¼šç”±äºæ‰€æœ‰çš„å†…å®¹éƒ½åœ¨ä¸€ä¸ªé¡µé¢ä¸­åŠ¨æ€æ›¿æ¢æ˜¾ç¤ºï¼Œæ‰€ä»¥åœ¨ <code>SEO</code> ä¸Šå…¶æœ‰ç€å¤©ç„¶çš„å¼±åŠ¿ã€‚</li></ul><h2 id="vueç»„ä»¶çš„é€šä¿¡æ–¹å¼">vueç»„ä»¶çš„é€šä¿¡æ–¹å¼</h2><ol><li><p>çˆ¶å­ç»„ä»¶é€šä¿¡ï¼š<br>çˆ¶å‘å­ä¼ é€’æ•°æ®æ˜¯é€šè¿‡<code>props</code>ï¼Œå­å‘çˆ¶æ˜¯é€šè¿‡<code>$emit</code>è§¦å‘äº‹ä»¶ï¼›é€šè¿‡çˆ¶é“¾/å­é“¾ä¹Ÿå¯ä»¥é€šä¿¡ï¼ˆ<code>$parent/$children</code>ï¼‰ï¼›<br><code>ref</code>ä¹Ÿå¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ï¼›<code>provide/inject</code>ï¼›<code>$attrs/$listeners</code>ã€‚</p></li><li><p>å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼š<br>å…¨å±€äº‹ä»¶æ€»çº¿<code>EventBus</code>ã€<code>Vuex</code>ã€‚<br><code>$emit</code>/<code>$on</code> è‡ªå®šä¹‰äº‹ä»¶ å…„å¼Ÿç»„ä»¶é€šä¿¡<br><code>Event Bus</code> å®ç°è·¨ç»„ä»¶é€šä¿¡ <code>Vue.prototype.$bus = new Vue()</code> è‡ªå®šä¹‰äº‹ä»¶</p></li><li><p>è·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼š<br>å…¨å±€äº‹ä»¶æ€»çº¿<code>EventBus</code>ã€<code>Vuex</code>ã€<code>provide/injectã€‚</code></p></li></ol><h2 id="emit-åé¢çš„ä¸¤ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆ">$emit åé¢çš„ä¸¤ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆ</h2><p>1ã€çˆ¶ç»„ä»¶å¯ä»¥ä½¿ç”¨ props æŠŠæ•°æ®ä¼ ç»™å­ç»„ä»¶ã€‚<br>2ã€å­ç»„ä»¶å¯ä»¥ä½¿ç”¨ $emit,è®©çˆ¶ç»„ä»¶ç›‘å¬åˆ°è‡ªå®šä¹‰äº‹ä»¶ ã€‚</p><p><code>vm.$emit( event, arg );</code>//è§¦å‘å½“å‰å®ä¾‹ä¸Šçš„äº‹ä»¶ï¼Œè¦ä¼ é€’çš„å‚æ•°<br><code>vm.$on( event, fn );</code>//ç›‘å¬eventäº‹ä»¶åè¿è¡Œ fnï¼›</p><p>å­ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;train-city&quot;&gt;</span><br><span class="line">    &lt;h3&gt;çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„toCity:&#123;&#123;sendData&#125;&#125;&lt;/h3&gt; </span><br><span class="line">    &lt;br/&gt;&lt;button @click=&#x27;select(`å¤§è¿`)&#x27;&gt;ç‚¹å‡»æ­¤å¤„å°†â€˜å¤§è¿â€™å‘å°„ç»™çˆ¶ç»„ä»¶&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;trainCity&#x27;,</span><br><span class="line">    props:[&#x27;sendData&#x27;], // ç”¨æ¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„æ•°æ®</span><br><span class="line">    methods:&#123;</span><br><span class="line">      select(val) &#123;</span><br><span class="line">        let data = &#123;</span><br><span class="line">          cityName: val</span><br><span class="line">        &#125;;</span><br><span class="line">        this.$emit(&#x27;showCityName&#x27;,data);//selectäº‹ä»¶è§¦å‘åï¼Œè‡ªåŠ¨è§¦å‘showCityNameäº‹ä»¶</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div&gt;çˆ¶ç»„ä»¶çš„toCity&#123;&#123;toCity&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;train-city @showCityName=&quot;updateCity&quot; :sendData=&quot;toCity&quot;&gt;&lt;/train-city&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name:&#x27;index&#x27;,</span><br><span class="line">    components: &#123;&#125;,</span><br><span class="line">    data () &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        toCity:&quot;åŒ—äº¬&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      updateCity(data)&#123;//è§¦å‘å­ç»„ä»¶åŸå¸‚é€‰æ‹©-é€‰æ‹©åŸå¸‚çš„äº‹ä»¶</span><br><span class="line">        this.toCity = data.cityName;//æ”¹å˜äº†çˆ¶ç»„ä»¶çš„å€¼</span><br><span class="line">        console.log(&#x27;toCity:&#x27;+this.toCity)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="nextTickçš„å®ç°">nextTickçš„å®ç°</h2><p><strong>åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„ DOM</strong>ã€‚<br><code>nextTick</code>æ˜¯ Vue æä¾›çš„ä¸€ä¸ªå…¨å±€ APIï¼Œç”±äº Vue çš„å¼‚æ­¥æ›´æ–°ç­–ç•¥ï¼Œå¯¼è‡´æˆ‘ä»¬å¯¹æ•°æ®ä¿®æ”¹åä¸ä¼šç›´æ¥ä½“ç°åœ¨ DOM ä¸Šï¼Œæ­¤æ—¶å¦‚æœæƒ³è¦ç«‹å³è·å–æ›´æ–°åçš„ DOM çŠ¶æ€ï¼Œå°±éœ€è¦å€ŸåŠ©è¯¥æ–¹æ³•ã€‚<br>Vue åœ¨æ›´æ–°<code>DOM</code>æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªå¼‚æ­¥æ›´æ–°é˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚å¦‚æœåŒä¸€ä¸ª <code>watcher</code> è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥é˜Ÿåˆ—ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚<code>nextTick</code>æ–¹æ³•ä¼šåœ¨é˜Ÿåˆ—ä¸­åŠ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç¡®ä¿è¯¥å‡½æ•°åœ¨å‰é¢çš„ DOM æ“ä½œå®Œæˆåæ‰è°ƒç”¨ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯ï¼š">ä½¿ç”¨åœºæ™¯ï¼š</h3><ul><li>å¦‚æœæƒ³è¦åœ¨ä¿®æ”¹æ•°æ®åç«‹åˆ»å¾—åˆ°æ›´æ–°åçš„DOMç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨<code>Vue.nextTick()</code></li><li>åœ¨<code>created</code>ç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œ<code>DOM</code>æ“ä½œ</li></ul><h2 id="ä½¿ç”¨è¿‡æ’æ§½ä¹ˆï¼Ÿç”¨çš„æ˜¯å…·åæ’æ§½è¿˜æ˜¯åŒ¿åæ’æ§½æˆ–ä½œç”¨åŸŸæ’æ§½">ä½¿ç”¨è¿‡æ’æ§½ä¹ˆï¼Ÿç”¨çš„æ˜¯å…·åæ’æ§½è¿˜æ˜¯åŒ¿åæ’æ§½æˆ–ä½œç”¨åŸŸæ’æ§½</h2><p>vueä¸­çš„æ’æ§½æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ä¸œè¥¿slotè¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå ä½çš„ åœ¨vueå½“ä¸­æ’æ§½åŒ…å«ä¸‰ç§ä¸€ç§æ˜¯é»˜è®¤æ’æ§½ï¼ˆåŒ¿åï¼‰ä¸€ç§æ˜¯å…·åæ’æ§½è¿˜æœ‰ä¸€ç§å°±æ˜¯ä½œç”¨åŸŸæ’æ§½ åŒ¿åæ’æ§½å°±æ˜¯æ²¡æœ‰åå­—çš„åªè¦é»˜è®¤çš„éƒ½å¡«åˆ°è¿™é‡Œå…·åæ’æ§½æŒ‡çš„æ˜¯å…·æœ‰åå­—çš„</p><h2 id="keep-aliveçš„å®ç°">keep-aliveçš„å®ç°</h2><p>keep-aliveæ˜¯Vue.jsçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚å®ƒèƒ½å¤Ÿä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚</p><p>ä½œç”¨ï¼šå®ç°ç»„ä»¶ç¼“å­˜ï¼Œä¿æŒè¿™äº›ç»„ä»¶çš„çŠ¶æ€ï¼Œä»¥é¿å…åå¤æ¸²æŸ“å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚ éœ€è¦ç¼“å­˜ç»„ä»¶ é¢‘ç¹åˆ‡æ¢ï¼Œä¸éœ€è¦é‡å¤æ¸²æŸ“</p><p>åœºæ™¯ï¼štabsæ ‡ç­¾é¡µ åå°å¯¼èˆªï¼Œvueæ€§èƒ½ä¼˜åŒ–</p><p>åŸç†ï¼š<code>Vue.js</code>å†…éƒ¨å°†<code>DOM</code>èŠ‚ç‚¹æŠ½è±¡æˆäº†ä¸€ä¸ªä¸ªçš„<code>VNode</code>èŠ‚ç‚¹ï¼Œ<code>keep-alive</code>ç»„ä»¶çš„ç¼“å­˜ä¹Ÿæ˜¯åŸºäº<code>VNode</code>èŠ‚ç‚¹çš„è€Œä¸æ˜¯ç›´æ¥å­˜å‚¨<code>DOM</code>ç»“æ„ã€‚å®ƒå°†æ»¡è¶³æ¡ä»¶<code>ï¼ˆpruneCacheä¸pruneCacheï¼‰</code>çš„ç»„ä»¶åœ¨<code>cache</code>å¯¹è±¡ä¸­ç¼“å­˜èµ·æ¥ï¼Œåœ¨éœ€è¦é‡æ–°æ¸²æŸ“çš„æ—¶å€™å†å°†<code>vnode</code>èŠ‚ç‚¹ä»<code>cache</code>å¯¹è±¡ä¸­å–å‡ºå¹¶æ¸²æŸ“ã€‚</p><h2 id="keep-alive-çš„å±æ€§">keep-alive çš„å±æ€§</h2><p>å®ƒæä¾›äº†includeä¸excludeä¸¤ä¸ªå±æ€§ï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°è¿›è¡Œç¼“å­˜ã€‚</p><p>includeå®šä¹‰ç¼“å­˜ç™½åå•ï¼Œkeep-aliveä¼šç¼“å­˜å‘½ä¸­çš„ç»„ä»¶ï¼›excludeå®šä¹‰ç¼“å­˜é»‘åå•ï¼Œè¢«å‘½ä¸­çš„ç»„ä»¶å°†ä¸ä¼šè¢«ç¼“å­˜ï¼›maxå®šä¹‰ç¼“å­˜ç»„ä»¶ä¸Šé™ï¼Œè¶…å‡ºä¸Šé™ä½¿ç”¨LRUçš„ç­–ç•¥ç½®æ¢ç¼“å­˜æ•°æ®ã€‚</p><p>åœ¨åŠ¨æ€ç»„ä»¶ä¸­çš„åº”ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :include=<span class="string">&quot;whiteList&quot;</span> :exclude=<span class="string">&quot;blackList&quot;</span> :max=<span class="string">&quot;amount&quot;</span>&gt;</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;currentComponent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure><p>åœ¨vue-routerä¸­çš„åº”ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :include=<span class="string">&quot;whiteList&quot;</span> :exclude=<span class="string">&quot;blackList&quot;</span> :max=<span class="string">&quot;amount&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure><p>vue ä¸­å®Œæ•´ç¤ºä¾‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">coma</span> <span class="attr">v-if</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">coma</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">comb</span> <span class="attr">v-else</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">comb</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;test=handleClick&quot;</span>&gt;</span>è¯·ç‚¹å‡»<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        handleClick () &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">test</span> = !<span class="variable language_">this</span>.<span class="property">test</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒ:<br><a href="https://cn.vuejs.org/v2/api/#keep-alive">keep-alive å®˜ç½‘</a></p><p><a href="https://www.jianshu.com/p/9523bb439950">keep-aliveå®ç°åŸç†</a></p><p><a href="https://blog.csdn.net/weixin_38189842/article/details/103999989">Vue keep-aliveçš„å®ç°åŸç†</a></p><h2 id="mixin">mixin</h2><p><code>mixin</code>ï¼ˆæ··å…¥ï¼‰ï¼Œ å®ƒæä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ Vue ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚<br>ä½¿ç”¨åœºæ™¯ï¼š ä¸åŒç»„ä»¶ä¸­ç»å¸¸ä¼šç”¨åˆ°ä¸€äº›ç›¸åŒæˆ–ç›¸ä¼¼çš„ä»£ç ï¼Œè¿™äº›ä»£ç çš„åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹ã€‚å¯ä»¥é€šè¿‡mixin å°†ç›¸åŒæˆ–ç›¸ä¼¼çš„ä»£ç æå‡ºæ¥ã€‚<br>ç¼ºç‚¹ï¼š<br>å˜é‡æ¥æºä¸æ˜ç¡®<br>å¤š mixin å¯èƒ½ä¼šé€ æˆå‘½åå†²çªï¼ˆè§£å†³æ–¹å¼ï¼šVue 3çš„ç»„åˆAPIï¼‰<br>mixin å’Œç»„ä»¶å‡ºç°å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä½¿é¡¹ç›®å¤æ‚åº¦å˜é«˜ã€‚<br>åœ¨Vue ä¸­ï¼Œä¿®é¥°ç¬¦å¤„ç†äº†è®¸å¤š DOM äº‹ä»¶çš„ç»†èŠ‚ï¼Œè®©æˆ‘ä»¬ä¸å†éœ€è¦èŠ±å¤§é‡çš„æ—¶é—´å»å¤„ç†è¿™äº›çƒ¦æ¼çš„äº‹æƒ…ï¼Œè€Œèƒ½æœ‰æ›´å¤šçš„ç²¾åŠ›ä¸“æ³¨äºç¨‹åºçš„é€»è¾‘å¤„ç†ã€‚Vueä¸­ä¿®é¥°ç¬¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><h2 id="Vue-ä¸­çš„ä¿®é¥°ç¬¦æœ‰å“ªäº›">Vue ä¸­çš„ä¿®é¥°ç¬¦æœ‰å“ªäº›</h2><p>åœ¨Vue ä¸­ï¼Œä¿®é¥°ç¬¦å¤„ç†äº†è®¸å¤š DOM äº‹ä»¶çš„ç»†èŠ‚ï¼Œè®©æˆ‘ä»¬ä¸å†éœ€è¦èŠ±å¤§é‡çš„æ—¶é—´å»å¤„ç†è¿™äº›çƒ¦æ¼çš„äº‹æƒ…ï¼Œè€Œèƒ½æœ‰æ›´å¤šçš„ç²¾åŠ›ä¸“æ³¨äºç¨‹åºçš„é€»è¾‘å¤„ç†ã€‚Vueä¸­ä¿®é¥°ç¬¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><ol><li>è¡¨å•ä¿®é¥°ç¬¦<br><code>lazy</code> å¡«å®Œä¿¡æ¯ï¼Œå…‰æ ‡ç¦»å¼€æ ‡ç­¾çš„æ—¶å€™ï¼Œæ‰ä¼šå°†å€¼èµ‹äºˆç»™valueï¼Œä¹Ÿå°±æ˜¯åœ¨<code>change</code>äº‹ä»¶ä¹‹åå†è¿›è¡Œä¿¡æ¯åŒæ­¥ã€‚<br><code>number</code> è‡ªåŠ¨å°†ç”¨æˆ·è¾“å…¥å€¼è½¬åŒ–ä¸ºæ•°å€¼ç±»å‹ï¼Œä½†å¦‚æœè¿™ä¸ªå€¼æ— æ³•è¢«<code>parseFloat</code>è§£æï¼Œåˆ™ä¼šè¿”å›åŸæ¥çš„å€¼ã€‚<br><code>trim</code>è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºæ ¼ï¼Œè€Œä¸­é—´çš„ç©ºæ ¼ä¸ä¼šè¢«è¿‡æ»¤ã€‚</li><li>äº‹ä»¶ä¿®é¥°ç¬¦<br><code>stop</code> é˜»æ­¢äº†äº‹ä»¶å†’æ³¡ï¼Œç›¸å½“äºè°ƒç”¨äº†<code>event.stopPropagation</code>æ–¹æ³•ã€‚<br><code>prevent</code> é˜»æ­¢äº†äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œç›¸å½“äºè°ƒç”¨äº†<code>event.preventDefault</code>æ–¹æ³•ã€‚<br><code>self</code> åªå½“åœ¨Â <code>event.target</code>Â æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•°ã€‚<br><code>once</code> ç»‘å®šäº†äº‹ä»¶ä»¥ååªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡å°±ä¸ä¼šè§¦å‘ã€‚<br><code>capture</code>ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ï¼Œå³å…ƒç´ è‡ªèº«è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„å¤„ç†ï¼Œç„¶åæ‰äº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç†ã€‚<br><code>passive</code> å‘Šè¯‰æµè§ˆå™¨ä½ ä¸æƒ³é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚<br><code>native</code> è®©ç»„ä»¶å˜æˆåƒhtmlå†…ç½®æ ‡ç­¾é‚£æ ·ç›‘å¬æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ï¼Œå¦åˆ™ç»„ä»¶ä¸Šä½¿ç”¨Â <code>v-on</code>Â åªä¼šç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ã€‚</li><li>é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦<br><code>left</code> å·¦é”®ç‚¹å‡»ã€‚<br><code>right</code> å³é”®ç‚¹å‡»ã€‚<br><code>middle</code> ä¸­é”®ç‚¹å‡»ã€‚</li><li>é”®å€¼ä¿®é¥°ç¬¦<br>é”®ç›˜ä¿®é¥°ç¬¦æ˜¯ç”¨æ¥ä¿®é¥°é”®ç›˜äº‹ä»¶ï¼ˆ<code>onkeyup</code>ï¼Œ<code>onkeydown</code>ï¼‰çš„ï¼Œæœ‰å¦‚ä¸‹ï¼š<br><code>keyCode</code>å­˜åœ¨å¾ˆå¤šï¼Œä½†vueä¸ºæˆ‘ä»¬æä¾›äº†åˆ«åï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</li></ol><p>æ™®é€šé”®ï¼ˆenterã€tabã€deleteã€spaceã€escã€upâ€¦ï¼‰<br>ç³»ç»Ÿä¿®é¥°é”®ï¼ˆctrlã€altã€metaã€shiftâ€¦ï¼‰</p><h2 id="å¦‚ä½•å®ç°-v-model-åŒå‘ç»‘å®š">å¦‚ä½•å®ç° v-model,åŒå‘ç»‘å®š</h2><ol><li>æ¦‚å¿µï¼š<br>Vue ä¸­åŒå‘ç»‘å®šæ˜¯ä¸€ä¸ªæŒ‡ä»¤<code>v-model</code>ï¼Œå¯ä»¥ç»‘å®šä¸€ä¸ªå“åº”å¼æ•°æ®åˆ°è§†å›¾ï¼ŒåŒæ—¶è§†å›¾çš„å˜åŒ–èƒ½æ”¹å˜è¯¥å€¼ã€‚<code>v-model</code>æ˜¯è¯­æ³•ç³–ï¼Œé»˜è®¤æƒ…å†µä¸‹ç›¸å½“äº:<code>value</code>å’Œ<code>@input</code>ï¼Œä½¿ç”¨<code>v-model</code>å¯ä»¥å‡å°‘å¤§é‡ç¹ççš„äº‹ä»¶å¤„ç†ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</li><li>ä½¿ç”¨ï¼š<br>é€šå¸¸åœ¨è¡¨å•é¡¹ä¸Šä½¿ç”¨<code>v-model</code>ï¼Œè¿˜å¯ä»¥åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šä½¿ç”¨ï¼Œè¡¨ç¤ºæŸä¸ªå€¼çš„è¾“å…¥å’Œè¾“å‡ºæ§åˆ¶ã€‚</li><li>åŸç†ï¼š<br><code>v-model</code>æ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼ŒåŒå‘ç»‘å®šå®é™…ä¸Šæ˜¯Vue çš„ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œé€šè¿‡è¾“å‡ºåŒ…å«<code>v-model</code>æ¨¡ç‰ˆçš„ç»„ä»¶æ¸²æŸ“å‡½æ•°ï¼Œå®é™…ä¸Šè¿˜æ˜¯<code>value</code>å±æ€§çš„ç»‘å®šåŠ<code>input</code>äº‹ä»¶ç›‘å¬ï¼Œäº‹ä»¶å›è°ƒå‡½æ•°ä¸­ä¼šåšç›¸åº”å˜é‡çš„æ›´æ–°æ“ä½œã€‚</li></ol><h2 id="Vue-Routerä¸­çš„å¸¸ç”¨è·¯ç”±æ¨¡å¼å’ŒåŸç†ï¼Ÿ">Vue Routerä¸­çš„å¸¸ç”¨è·¯ç”±æ¨¡å¼å’ŒåŸç†ï¼Ÿ</h2><ol><li>hash æ¨¡å¼ï¼š<br><code>location.hash</code>çš„å€¼å°±æ˜¯urlä¸­ # åé¢çš„ä¸œè¥¿ã€‚å®ƒçš„ç‰¹ç‚¹åœ¨äºï¼šhashè™½ç„¶å‡ºç°urlä¸­ï¼Œä½†ä¸ä¼šè¢«åŒ…å«åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ï¼Œå› æ­¤æ”¹å˜hashä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ã€‚<br>å¯ä»¥ä¸ºhashçš„æ”¹å˜æ·»åŠ ç›‘å¬äº‹ä»¶<code>window.addEventListener(&quot;hashchange&quot;, funcRef, false)</code>ï¼Œæ¯ä¸€æ¬¡æ”¹å˜<code>hash (window.location.hash)</code>ï¼Œéƒ½ä¼šåœ¨æµè§ˆå™¨çš„è®¿é—®å†å²ä¸­å¢åŠ ä¸€ä¸ªè®°å½•ï¼Œåˆ©ç”¨hashçš„ä»¥ä¸Šç‰¹ç‚¹ï¼Œå°±å¯ä»¥å®ç°å‰ç«¯è·¯ç”±æ›´æ–°è§†å›¾ä½†ä¸é‡æ–°è¯·æ±‚é¡µé¢çš„åŠŸèƒ½äº†ã€‚<br>ç‰¹ç‚¹ï¼šå…¼å®¹æ€§å¥½ä½†æ˜¯ä¸ç¾è§‚</li><li>history æ¨¡å¼ï¼š<br>åˆ©ç”¨ HTML5 History Interface ä¸­æ–°å¢çš„<code>pushState()</code>å’Œ<code>replaceState()</code>æ–¹æ³•ã€‚<br>è¿™ä¸¤ä¸ªæ–¹æ³•åº”ç”¨äºæµè§ˆå™¨çš„å†å²è®°å½•æ ˆï¼Œåœ¨å½“å‰å·²æœ‰çš„<code>back</code>ã€<code>forward</code>ã€<code>go</code> çš„åŸºç¡€ä¸Šï¼Œä»–ä»¬æä¾›äº†å¯¹å†å²è®°å½•è¿›è¡Œä¿®æ”¹çš„åŠŸèƒ½ã€‚<br>è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰ä¸ªå…±åŒç‚¹ï¼šå½“è°ƒç”¨ä»–ä»¬ä¿®æ”¹æµè§ˆå™¨å†å²è®°å½•æ ˆåï¼Œè™½ç„¶å½“å‰urlæ”¹å˜äº†ï¼Œä½†æµè§ˆå™¨ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œè¿™å°±ä¸ºå•é¡µé¢åº”ç”¨å‰ç«¯è·¯ç”±â€œæ›´æ–°è§†å›¾ä½†ä¸é‡æ–°è¯·æ±‚é¡µé¢â€æä¾›äº†åŸºç¡€<br>ç‰¹ç‚¹ï¼šè™½ç„¶ç¾è§‚ï¼Œä½†æ˜¯åˆ·æ–°ä¼šå‡ºç° 404 éœ€è¦åç«¯è¿›è¡Œé…ç½®ã€‚</li></ol><h3 id="åŠ¨æ€è·¯ç”±ï¼Ÿ">åŠ¨æ€è·¯ç”±ï¼Ÿ</h3><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°†ç»™å®šåŒ¹é…æ¨¡å¼çš„è·¯ç”±æ˜ å°„åˆ°åŒä¸€ä¸ªç»„ä»¶ï¼Œè¿™ç§æƒ…å†µå°±éœ€è¦å®šä¹‰åŠ¨æ€è·¯ç”±ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª Userç»„ä»¶ï¼Œå¯¹äºæ‰€æœ‰ ID å„ä¸ç›¸åŒçš„ç”¨æˆ·ï¼Œéƒ½è¦ä½¿ç”¨è¿™ä¸ªç»„ä»¶æ¥æ¸²æŸ“ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ vue-router çš„è·¯ç”±è·¯å¾„ä¸­ä½¿ç”¨åŠ¨æ€è·¯å¾„å‚æ•°ï¼ˆdynamic segmentï¼‰æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼š<code>&#123;path: '/user/:id', compenent: User&#125;</code>ï¼Œå…¶ä¸­:idå°±æ˜¯åŠ¨æ€è·¯å¾„å‚æ•°ã€‚</p><h2 id="Vuexçš„ç†è§£åŠä½¿ç”¨åœºæ™¯">Vuexçš„ç†è§£åŠä½¿ç”¨åœºæ™¯</h2><p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚æ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ storeï¼ˆä»“åº“ï¼‰ã€‚</p><ol><li>Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ï¼›å½“ Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œ</li></ol><p>è‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–° 2. æ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤ (commit) mutationï¼Œ è¿™æ ·ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ– Vuexä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p><ol><li><code>State</code>ï¼šå®šä¹‰äº†åº”ç”¨çš„çŠ¶æ€æ•°æ®</li><li><code>Getter</code>ï¼šåœ¨ store ä¸­å®šä¹‰â€œgetterâ€ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯ store çš„è®¡ç®—å±æ€§ï¼‰ï¼Œ getter çš„è¿”å›å€¼ä¼šæ ¹æ®å®ƒçš„ä¾èµ–è¢«ç¼“å­˜èµ·æ¥ï¼Œ ä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–å€¼å‘ç”Ÿäº†æ”¹å˜æ‰ä¼šè¢«é‡æ–°è®¡ç®—</li><li><code>Mutation</code>ï¼šæ˜¯å”¯ä¸€æ›´æ”¹ store ä¸­çŠ¶æ€çš„æ–¹æ³•ï¼Œä¸”å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</li><li><code>Action</code>ï¼šç”¨äºæäº¤ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ï¼Œå¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œ</li><li><code>Module</code>ï¼šå…è®¸å°†å•ä¸€çš„ Store æ‹†åˆ†ä¸ºå¤šä¸ª store ä¸”åŒæ—¶ä¿å­˜åœ¨å•ä¸€çš„çŠ¶æ€æ ‘ä¸­</li></ol><h2 id="é¡µé¢åˆ·æ–°åVuex-çŠ¶æ€ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ">é¡µé¢åˆ·æ–°åVuex çŠ¶æ€ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ</h2><p>Vuex åªæ˜¯åœ¨å†…å­˜ä¸­ä¿å­˜çŠ¶æ€ï¼Œåˆ·æ–°åå°±ä¼šä¸¢å¤±ï¼Œå¦‚æœè¦æŒä¹…åŒ–å°±éœ€è¦ä¿å­˜èµ·æ¥ã€‚</p><ol><li><code>localStorage</code>å°±å¾ˆåˆé€‚ï¼Œæäº¤<code>mutation</code>çš„æ—¶å€™åŒæ—¶å­˜å…¥<code>localStorage</code>ï¼Œåœ¨<code>store</code>ä¸­æŠŠå€¼å–å‡ºæ¥ä½œä¸º<code>state</code>çš„åˆå§‹å€¼å³å¯ã€‚</li><li>ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæ¨èä½¿ç”¨<code>vuex-persist</code>æ’ä»¶ï¼Œå®ƒæ˜¯ä¸º <code>Vuex</code> æŒä¹…åŒ–å‚¨å­˜è€Œç”Ÿçš„ä¸€ä¸ªæ’ä»¶ï¼Œä¸éœ€è¦ä½ æ‰‹åŠ¨å­˜å–<code>storage</code>ï¼Œè€Œæ˜¯ç›´æ¥å°†çŠ¶æ€ä¿å­˜è‡³ <code>cookie</code> æˆ–è€… <code>localStorage</code>ä¸­ã€‚</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7249773a1634f779c48f3f0ffabf968~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p><h2 id="äº†è§£å“ªäº›-Vue-çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Ÿ">äº†è§£å“ªäº› Vue çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</h2><ol><li>è·¯ç”±æ‡’åŠ è½½ã€‚æœ‰æ•ˆæ‹†åˆ†åº”ç”¨å¤§å°ï¼Œè®¿é—®æ—¶æ‰å¼‚æ­¥åŠ è½½ã€‚</li><li>keep-aliveç¼“å­˜é¡µé¢ã€‚é¿å…é‡å¤åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œä¸”èƒ½ä¿ç•™ç¼“å­˜ç»„ä»¶çŠ¶æ€ã€‚</li><li>v-foréå†é¿å…åŒæ—¶ä½¿ç”¨v-ifã€‚å®é™…ä¸Šåœ¨ Vue 3 ä¸­å·²ç»æ˜¯ä¸€ä¸ªé”™è¯¯ç”¨æ³•äº†ã€‚</li><li>é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–ï¼Œå¯é‡‡ç”¨è™šæ‹Ÿåˆ—è¡¨ã€‚</li><li>v-onceã€‚ä¸å†å˜åŒ–çš„æ•°æ®ä½¿ç”¨v-onceã€‚</li><li>äº‹ä»¶é”€æ¯ã€‚ç»„ä»¶é”€æ¯åæŠŠå…¨å±€å˜é‡å’Œå®šæ—¶å™¨é”€æ¯ã€‚</li><li>å›¾ç‰‡æ‡’åŠ è½½ã€‚</li><li>ç¬¬ä¸‰æ–¹æ’ä»¶æŒ‰éœ€å¼•å…¥ã€‚</li><li>å­ç»„ä»¶åˆ†å‰²ã€‚è¾ƒé‡çš„çŠ¶æ€ç»„ä»¶é€‚åˆæ‹†åˆ†ã€‚</li><li>æœåŠ¡ç«¯æ¸²æŸ“ã€‚</li></ol>]]></content>
    
    
    <summary type="html">ğŸæœ¬æ–‡æ±‡æ€»Vueï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2023å‰ç«¯é¢è¯•ç³»åˆ—â€” JavaScriptç¯‡</title>
    <link href="https://www.cameliia.top/posts/101.html"/>
    <id>https://www.cameliia.top/posts/101.html</id>
    <published>2023-03-08T02:00:00.000Z</published>
    <updated>2023-08-01T10:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p>æœ¬æ–‡æ˜¯æˆ‘çš„å‰ç«¯é¢è¯•ç³»åˆ—ç³»åˆ—å¯¼èˆªï¼Œå…¶ä»–ç« èŠ‚å†…å®¹å¯ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ï¼š</p><ol><li><a href="https://www.cameliia.top/posts/100.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“HTML &amp; CSS ç¯‡</a> â‡¦å½“å‰ä½ç½®ğŸª‚</li><li><a href="https://www.cameliia.top/posts/101.html">2023å‰ç«¯é¢è¯•ç³»åˆ—-- JS ç¯‡</a></li><li><a href="https://www.cameliia.top/posts/102.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“vueç¯‡</a></li><li><a href="https://www.cameliia.top/posts/103.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“TSç¯‡</a></li><li><a href="https://www.cameliia.top/posts/104.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“Reactç¯‡</a></li><li><a href="https://www.cameliia.top/posts/105.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“ç½‘ç»œç¯‡</a></li><li><a href="https://www.cameliia.top/posts/106.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“æµè§ˆå™¨ç¯‡</a></li></ol></div><h1>JavaScript</h1><h2 id="JSä¸­çš„8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«">JSä¸­çš„8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«</h2><p>åŒ…æ‹¬å€¼ç±»å‹(åŸºæœ¬å¯¹è±¡ç±»å‹)å’Œå¼•ç”¨ç±»å‹(å¤æ‚å¯¹è±¡ç±»å‹)</p><p><strong>åŸºæœ¬ç±»å‹(å€¼ç±»å‹)ï¼š</strong> <code>Number</code>(æ•°å­—),<code>String</code>(å­—ç¬¦ä¸²),<code>Boolean</code>(å¸ƒå°”),<code>Symbol</code>(ç¬¦å·),<code>null</code>(ç©º),<code>undefined</code>(æœªå®šä¹‰)åœ¨å†…å­˜ä¸­å æ®å›ºå®šå¤§å°ï¼Œä¿å­˜åœ¨æ ˆå†…å­˜ä¸­</p><p><strong>å¼•ç”¨ç±»å‹(å¤æ‚æ•°æ®ç±»å‹)ï¼š</strong> <code>Object</code>(å¯¹è±¡)ã€<code>Function</code>(å‡½æ•°)ã€‚å…¶ä»–è¿˜æœ‰<code>Array</code>(æ•°ç»„)ã€<code>Date</code>(æ—¥æœŸ)ã€<code>RegExp</code>(æ­£åˆ™è¡¨è¾¾å¼)ã€ç‰¹æ®Šçš„åŸºæœ¬åŒ…è£…ç±»å‹(Stringã€Numberã€Boolean) ä»¥åŠå•ä½“å†…ç½®å¯¹è±¡(Globalã€Math)ç­‰ å¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯¹è±¡ ä¿å­˜åœ¨å †å†…å­˜ä¸­ï¼Œæ ˆå†…å­˜å­˜å‚¨çš„æ˜¯å¯¹è±¡çš„å˜é‡æ ‡è¯†ç¬¦ä»¥åŠå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€ã€‚</p><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><p><code>Symbol</code>ï¼šä½¿ç”¨Symbolæ¥ä½œä¸ºå¯¹è±¡å±æ€§å(key)  åˆ©ç”¨è¯¥ç‰¹æ€§ï¼ŒæŠŠä¸€äº›ä¸éœ€è¦å¯¹å¤–æ“ä½œå’Œè®¿é—®çš„å±æ€§ä½¿ç”¨Symbolæ¥å®šä¹‰</p><p><code>BigInt</code>ï¼šç”±äºåœ¨ Number ä¸ BigInt ä¹‹é—´è¿›è¡Œè½¬æ¢ä¼šæŸå¤±ç²¾åº¦ï¼Œå› è€Œå»ºè®®ä»…åœ¨å€¼å¯èƒ½å¤§äº253 æ—¶ä½¿ç”¨ BigInt ç±»å‹ï¼Œå¹¶ä¸”ä¸åœ¨ä¸¤ç§ç±»å‹ä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚</p><h2 id="JSä¸­çš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹æ¡ˆ">JSä¸­çš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹æ¡ˆ</h2><h3 id="1-typeof">1.typeof</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="number">1</span>);               <span class="comment">// number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">true</span>);            <span class="comment">// boolean</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="string">&#x27;mc&#x27;</span>);            <span class="comment">// string</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="title class_">Symbol</span>)           <span class="comment">// function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;);    <span class="comment">// function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="variable language_">console</span>.<span class="title function_">log</span>());   <span class="comment">// function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> []);              <span class="comment">// object </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> &#123;&#125;);              <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">null</span>);            <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">undefined</span>);       <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šèƒ½å¤Ÿå¿«é€ŸåŒºåˆ†åŸºæœ¬æ•°æ®ç±»å‹</p><p>ç¼ºç‚¹ï¼šä¸èƒ½å°†Objectã€Arrayå’ŒNullåŒºåˆ†ï¼Œéƒ½è¿”å›object</p><h3 id="2-instanceof">2.instanceof</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span> <span class="keyword">instanceof</span> <span class="title class_">Number</span>);                    <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="literal">true</span> <span class="keyword">instanceof</span> <span class="title class_">Boolean</span>);                <span class="comment">// false </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;str&#x27;</span> <span class="keyword">instanceof</span> <span class="title class_">String</span>);                <span class="comment">// false  </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([] <span class="keyword">instanceof</span> <span class="title class_">Array</span>);                    <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125; <span class="keyword">instanceof</span> <span class="title class_">Function</span>);       <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;&#125; <span class="keyword">instanceof</span> <span class="title class_">Object</span>);                   <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šèƒ½å¤ŸåŒºåˆ†Arrayã€Objectå’ŒFunctionï¼Œé€‚åˆç”¨äºåˆ¤æ–­è‡ªå®šä¹‰çš„ç±»å®ä¾‹å¯¹è±¡</p><p>ç¼ºç‚¹ï¼šNumberï¼ŒBooleanï¼ŒStringåŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½åˆ¤æ–­</p><h3 id="3-Object-prototype-toString-call">3.Object.prototype.toString.call()</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> toString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="number">1</span>));      <span class="comment">//[object Number]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="literal">true</span>));   <span class="comment">//[object Boolean]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="string">&#x27;mc&#x27;</span>));   <span class="comment">//[object String]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>([]));     <span class="comment">//[object Array]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(&#123;&#125;));     <span class="comment">//[object Object]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)); <span class="comment">//[object Function]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="literal">undefined</span>));  <span class="comment">//[object Undefined]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="literal">null</span>)); <span class="comment">//[object Null]</span></span><br></pre></td></tr></table></figure><p>ä¼˜ç‚¹ï¼šç²¾å‡†åˆ¤æ–­æ•°æ®ç±»å‹</p><p>ç¼ºç‚¹ï¼šå†™æ³•ç¹çä¸å®¹æ˜“è®°ï¼Œæ¨èè¿›è¡Œå°è£…åä½¿ç”¨</p><h3 id="instanceof-çš„ä½œç”¨">instanceof çš„ä½œç”¨</h3><p>ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¼•ç”¨ç±»å‹æ˜¯å¦å±äºæŸæ„é€ å‡½æ•°ï¼›</p><p>è¿˜å¯ä»¥åœ¨ç»§æ‰¿å…³ç³»ä¸­ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºå®ƒçš„çˆ¶ç±»å‹ã€‚</p><h3 id="instanceof-å’Œ-typeof-çš„åŒºåˆ«ï¼š">instanceof å’Œ typeof çš„åŒºåˆ«ï¼š</h3><p>typeofåœ¨å¯¹å€¼ç±»å‹numberã€stringã€boolean ã€null ã€ undefinedã€ ä»¥åŠå¼•ç”¨ç±»å‹çš„functionçš„ååº”æ˜¯ç²¾å‡†çš„ï¼›ä½†æ˜¯ï¼Œå¯¹äºå¯¹è±¡{ } ã€æ•°ç»„[ ] ã€null éƒ½ä¼šè¿”å›object</p><p>ä¸ºäº†å¼¥è¡¥è¿™ä¸€ç‚¹ï¼Œinstanceof ä»åŸå‹çš„è§’åº¦ï¼Œæ¥åˆ¤æ–­æŸå¼•ç”¨å±äºå“ªä¸ªæ„é€ å‡½æ•°ï¼Œä»è€Œåˆ¤å®šå®ƒçš„æ•°æ®ç±»å‹ã€‚</p><h2 id="ES6æ–°å¢ç‰¹æ€§">ES6æ–°å¢ç‰¹æ€§:</h2><ol><li>const let</li><li>ç®­å¤´å‡½æ•°(æ²¡æœ‰thisæŒ‡å‘,ä¼šä»ä½œç”¨åŸŸä¸Šä¸€çº§ç»§æ‰¿this)</li><li>è§£æ„èµ‹å€¼</li><li>å½¢å‚é»˜è®¤å€¼</li><li>ç±» class(Es5ä¹‹å‰ç”¨proptypeä»£æ›¿class)</li><li>æ‰©å±•è¿ç®—ç¬¦</li><li>æ¨¡æ¿å­—ç¬¦ä¸²</li><li>promise(é‡ç‚¹)</li></ol><h2 id="var-let-const">var &amp;&amp; let &amp;&amp; const</h2><p>ES6ä¹‹å‰åˆ›å»ºå˜é‡ç”¨çš„æ˜¯var,ä¹‹ååˆ›å»ºå˜é‡ç”¨çš„æ˜¯let/const</p><p><strong>ä¸‰è€…åŒºåˆ«</strong>ï¼š</p><ol><li>varå®šä¹‰çš„å˜é‡ï¼Œ<code>æ²¡æœ‰å—çš„æ¦‚å¿µï¼Œå¯ä»¥è·¨å—è®¿é—®</code>, ä¸èƒ½è·¨å‡½æ•°è®¿é—®ã€‚<br>letå®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œä¸èƒ½è·¨å—è®¿é—®ï¼Œä¹Ÿä¸èƒ½è·¨å‡½æ•°è®¿é—®ã€‚<br>constç”¨æ¥å®šä¹‰å¸¸é‡ï¼Œä½¿ç”¨æ—¶å¿…é¡»åˆå§‹åŒ–(å³å¿…é¡»èµ‹å€¼)ï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œä¸”ä¸èƒ½ä¿®æ”¹ã€‚</li><li>varå¯ä»¥<code>å…ˆä½¿ç”¨ï¼Œåå£°æ˜</code>ï¼Œå› ä¸ºå­˜åœ¨å˜é‡æå‡ï¼›letå¿…é¡»å…ˆå£°æ˜åä½¿ç”¨ã€‚</li><li>varæ˜¯å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…<code>é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡</code>çš„ï¼Œè€Œletä¸constä¸å…è®¸è¿™ä¸€ç°è±¡ã€‚</li><li>åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼ŒåŸºäºletå£°æ˜çš„å…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡GOï¼ˆwindowï¼‰æ²¡æœ‰ä»»ä½•å…³ç³» ;<br>varå£°æ˜çš„å˜é‡ä¼šå’ŒGOæœ‰æ˜ å°„å…³ç³»ï¼›</li><li><code>ä¼šäº§ç”Ÿæš‚æ—¶æ€§æ­»åŒº</code>ï¼š</li></ol><blockquote><p>æš‚æ—¶æ€§æ­»åŒºæ˜¯æµè§ˆå™¨çš„bugï¼šæ£€æµ‹ä¸€ä¸ªæœªè¢«å£°æ˜çš„å˜é‡ç±»å‹æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä¼šè¿”å›undefined<br>å¦‚ï¼šconsole.log(typeof a) //undefined<br>è€Œï¼šconsole.log(typeof a)//æœªå£°æ˜ä¹‹å‰ä¸èƒ½ä½¿ç”¨<br>let a</p></blockquote><ol start="6"><li>let /const/functionä¼šæŠŠå½“å‰æ‰€åœ¨çš„å¤§æ‹¬å·(é™¤å‡½æ•°ä¹‹å¤–)ä½œä¸ºä¸€ä¸ªå…¨æ–°çš„å—çº§ä¸Šä¸‹æ–‡ï¼Œåº”ç”¨è¿™ä¸ªæœºåˆ¶ï¼Œåœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œé‡åˆ°å¾ªç¯äº‹ä»¶ç»‘å®šç­‰ç±»ä¼¼çš„éœ€æ±‚ï¼Œæ— éœ€å†è‡ªå·±æ„å»ºé—­åŒ…æ¥å­˜å‚¨ï¼Œåªè¦åŸºäºletçš„å—ä½œç”¨ç‰¹å¾å³å¯è§£å†³</li></ol><h2 id="ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾">ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾</h2><p>åˆ›å»ºå‡½æ•°çš„æ—¶å€™ï¼Œå·²ç»å£°æ˜äº†å½“å‰å‡½æ•°çš„ä½œç”¨åŸŸ==&gt;<code>å½“å‰åˆ›å»ºå‡½æ•°æ‰€å¤„çš„ä¸Šä¸‹æ–‡</code>ã€‚å¦‚æœæ˜¯åœ¨å…¨å±€ä¸‹åˆ›å»ºçš„å‡½æ•°å°±æ˜¯<code>[[scope]]:EC(G)</code>ï¼Œå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå½¢æˆä¸€ä¸ªå…¨æ–°çš„ç§æœ‰ä¸Šä¸‹æ–‡<code>EC(FN)</code>ï¼Œä¾›å­—ç¬¦ä¸²ä»£ç æ‰§è¡Œ(è¿›æ ˆæ‰§è¡Œ)</p><p>å®šä¹‰ï¼šç®€å•æ¥è¯´ä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œ<code>ç”±å½“å‰ç¯å¢ƒä¸ä¸Šå±‚ç¯å¢ƒçš„ä¸€ç³»åˆ—å˜é‡å¯¹è±¡ç»„æˆ</code><br>1.å…¨å±€ä½œç”¨åŸŸï¼šä»£ç åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹éƒ½èƒ½è¢«è®¿é—®ï¼Œwindow å¯¹è±¡çš„å†…ç½®å±æ€§éƒ½æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚<br>2.å‡½æ•°ä½œç”¨åŸŸï¼šåœ¨å›ºå®šçš„ä»£ç ç‰‡æ®µæ‰èƒ½è¢«è®¿é—®</p><p>ä½œç”¨ï¼šä½œç”¨åŸŸæœ€å¤§çš„ç”¨å¤„å°±æ˜¯<code>éš”ç¦»å˜é‡</code>ï¼Œä¸åŒä½œç”¨åŸŸä¸‹åŒåå˜é‡ä¸ä¼šæœ‰å†²çªã€‚</p><p><strong>ä½œç”¨åŸŸé“¾å‚è€ƒé“¾æ¥</strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå˜é‡åˆ° åˆ›å»ºè¯¥å˜é‡ çš„å‡½æ•°çš„ä½œç”¨åŸŸä¸­å–å€¼ã€‚ä½†æ˜¯å¦‚æœåœ¨å½“å‰ä½œç”¨åŸŸä¸­æ²¡æœ‰æŸ¥åˆ°ï¼Œå°±ä¼šå‘ä¸Šçº§ä½œç”¨åŸŸå»æŸ¥ï¼Œç›´åˆ°æŸ¥åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œè¿™ä¹ˆä¸€ä¸ªæŸ¥æ‰¾è¿‡ç¨‹å½¢æˆçš„é“¾æ¡å°±å«åšä½œç”¨åŸŸé“¾ã€‚</p><h2 id="é—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼šä¿å­˜-ä¿æŠ¤">é—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼šä¿å­˜/ä¿æŠ¤</h2><ul><li><p><strong>é—­åŒ…çš„æ¦‚å¿µ</strong></p><p>å‡½æ•°æ‰§è¡Œæ—¶å½¢æˆçš„ç§æœ‰ä¸Šä¸‹æ–‡EC(FN)ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä»£ç æ‰§è¡Œå®Œä¼šå‡ºæ ˆåé‡Šæ”¾;ä½†æ˜¯ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æœå½“å‰ç§æœ‰ä¸Šä¸‹æ–‡ä¸­çš„æŸä¸ªä¸œè¥¿è¢«ä¸Šä¸‹æ–‡ä»¥å¤–çš„äº‹ç‰©å ç”¨äº†ï¼Œåˆ™ä¸Šä¸‹æ–‡ä¸ä¼šå‡ºæ ˆé‡Šæ”¾ï¼Œä»è€Œå½¢æˆä¸é”€æ¯çš„ä¸Šä¸‹æ–‡ã€‚ å‡½æ•°æ‰§è¡Œå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šå½¢æˆä¸€ä¸ªå…¨æ–°çš„ç§æœ‰ä¸Šä¸‹æ–‡ï¼Œå¯èƒ½ä¼šè¢«é‡Šæ”¾ï¼Œå¯èƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œä¸è®ºé‡Šæ”¾ä¸å¦ï¼Œä»–çš„ä½œç”¨æ˜¯ï¼š</p></li></ul><p>ï¼ˆ1ï¼‰ä¿æŠ¤ï¼šåˆ’åˆ†ä¸€ä¸ªç‹¬ç«‹çš„ä»£ç æ‰§è¡ŒåŒºåŸŸï¼Œåœ¨è¿™ä¸ªåŒºåŸŸä¸­æœ‰è‡ªå·±ç§æœ‰å˜é‡å­˜å‚¨çš„ç©ºé—´ï¼Œä¿æŠ¤è‡ªå·±çš„ç§æœ‰å˜é‡ä¸å—å¤–ç•Œå¹²æ‰°ï¼ˆæ“ä½œè‡ªå·±çš„ç§æœ‰å˜é‡å’Œå¤–ç•Œæ²¡æœ‰å…³ç³»ï¼‰ï¼›</p><p>ï¼ˆ2ï¼‰ä¿å­˜ï¼šå¦‚æœå½“å‰ä¸Šä¸‹æ–‡ä¸è¢«é‡Šæ”¾ã€åªè¦ä¸Šä¸‹æ–‡ä¸­çš„æŸä¸ªä¸œè¥¿è¢«å¤–éƒ¨å ç”¨å³å¯ã€‘ï¼Œåˆ™å­˜å‚¨çš„è¿™äº›ç§æœ‰å˜é‡ä¹Ÿä¸ä¼šè¢«é‡Šæ”¾ï¼Œå¯ä»¥ä¾›å…¶ä¸‹çº§ä¸Šä¸‹æ–‡ä¸­è°ƒå–ä½¿ç”¨ï¼Œç›¸å½“äºæŠŠä¸€äº›å€¼ä¿å­˜èµ·æ¥äº†ï¼›</p><p>æˆ‘ä»¬æŠŠå‡½æ•°æ‰§è¡Œå½¢æˆç§æœ‰ä¸Šä¸‹æ–‡ï¼Œæ¥ä¿æŠ¤å’Œä¿å­˜ç§æœ‰å˜é‡æœºåˆ¶ç§°ä¸º<code>é—­åŒ…</code>ã€‚</p><blockquote><p>é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°â€“ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</p></blockquote><p><strong>ç¨å…¨é¢çš„å›ç­”</strong>ï¼š åœ¨jsä¸­å˜é‡çš„ä½œç”¨åŸŸå±äºå‡½æ•°ä½œç”¨åŸŸ, åœ¨å‡½æ•°æ‰§è¡Œå®Œå,ä½œç”¨åŸŸå°±ä¼šè¢«æ¸…ç†,å†…å­˜ä¹Ÿä¼šéšä¹‹è¢«å›æ”¶,ä½†æ˜¯ç”±äºé—­åŒ…å‡½æ•°æ˜¯å»ºç«‹åœ¨å‡½æ•°å†…éƒ¨çš„å­å‡½æ•°, ç”±äºå…¶å¯è®¿é—®ä¸Šçº§ä½œç”¨åŸŸ,å³ä½¿ä¸Šçº§å‡½æ•°æ‰§è¡Œå®Œ, ä½œç”¨åŸŸä¹Ÿä¸ä¼šéšä¹‹é”€æ¯, è¿™æ—¶çš„å­å‡½æ•°(ä¹Ÿå°±æ˜¯é—­åŒ…),ä¾¿æ‹¥æœ‰äº†è®¿é—®ä¸Šçº§ä½œç”¨åŸŸä¸­å˜é‡çš„æƒé™,å³ä½¿ä¸Šçº§å‡½æ•°æ‰§è¡Œå®Œåä½œç”¨åŸŸå†…çš„å€¼ä¹Ÿä¸ä¼šè¢«é”€æ¯ã€‚</p><ul><li><p><strong>é—­åŒ…çš„ç‰¹æ€§</strong>ï¼š</p><ul><li><p>1ã€å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å®šä¹‰ä»–ä»¬å¤–éƒ¨å‡½æ•°çš„å‚æ•°å’Œå˜é‡ã€‚(ä½œç”¨åŸŸé“¾çš„å‘ä¸ŠæŸ¥æ‰¾ï¼ŒæŠŠå¤–å›´çš„ä½œç”¨åŸŸä¸­çš„å˜é‡å€¼å­˜å‚¨åœ¨å†…å­˜ä¸­è€Œä¸æ˜¯åœ¨å‡½æ•°è°ƒç”¨å®Œæ¯•åé”€æ¯)è®¾è®¡ç§æœ‰çš„æ–¹æ³•å’Œå˜é‡ï¼Œé¿å…å…¨å±€å˜é‡çš„æ±¡æŸ“ã€‚</p><p>1.1.é—­åŒ…æ˜¯å¯†é—­çš„å®¹å™¨ï¼Œï¼Œç±»ä¼¼äºsetã€mapå®¹å™¨ï¼Œå­˜å‚¨æ•°æ®çš„</p><p>1.2.é—­åŒ…æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå­˜æ”¾æ•°æ®çš„æ ¼å¼ä¸º key-value å½¢å¼</p></li><li><p>2ã€å‡½æ•°åµŒå¥—å‡½æ•°</p></li><li><p>3ã€æœ¬è´¨æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨è¿æ¥èµ·æ¥ã€‚ä¼˜ç‚¹æ˜¯å¯ä»¥è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œè®©è¿™äº›å˜é‡çš„å€¼å§‹ç»ˆä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šåœ¨å‡½æ•°è¢«è°ƒç”¨ä¹‹åè‡ªåŠ¨æ¸…é™¤</p></li></ul></li><li><p><strong>é—­åŒ…å½¢æˆçš„æ¡ä»¶</strong>ï¼š</p><ol><li>å‡½æ•°çš„åµŒå¥—</li><li>å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œå»¶é•¿å¤–éƒ¨å‡½æ•°çš„å˜é‡ç”Ÿå‘½å‘¨æœŸ</li></ol></li><li><p><strong>é—­åŒ…çš„ç”¨é€”</strong>ï¼š</p><ol><li>æ¨¡ä»¿å—çº§ä½œç”¨åŸŸ</li><li>ä¿æŠ¤å¤–éƒ¨å‡½æ•°çš„å˜é‡ èƒ½å¤Ÿè®¿é—®å‡½æ•°å®šä¹‰æ—¶æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸ(é˜»æ­¢å…¶è¢«å›æ”¶)</li><li>å°è£…ç§æœ‰åŒ–å˜é‡</li><li>åˆ›å»ºæ¨¡å—</li></ol></li><li><p><strong>é—­åŒ…åº”ç”¨åœºæ™¯</strong></p></li></ul><blockquote><p>é—­åŒ…çš„ä¸¤ä¸ªåœºæ™¯ï¼Œé—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼š<code>ä¿å­˜/ä¿æŠ¤</code>ã€‚ åœ¨å¼€å‘ä¸­, å…¶å®æˆ‘ä»¬éšå¤„å¯è§é—­åŒ…çš„èº«å½±, å³ä¸€ä¸ªäº‹ä»¶ç»‘å®šçš„å›è°ƒæ–¹æ³•; å‘é€ajaxè¯·æ±‚æˆåŠŸ|å¤±è´¥çš„å›è°ƒ;setTimeoutçš„å»¶æ—¶å›è°ƒ;æˆ–è€…ä¸€ä¸ªå‡½æ•°å†…éƒ¨è¿”å›å¦ä¸€ä¸ªåŒ¿åå‡½æ•°,è¿™äº›éƒ½æ˜¯é—­åŒ…çš„åº”ç”¨ã€‚</p></blockquote><ul><li><strong>é—­åŒ…çš„ä¼˜ç‚¹</strong>ï¼šå»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ</li><li><strong>é—­åŒ…ç¼ºç‚¹</strong>ï¼šä¼šå¯¼è‡´å‡½æ•°çš„å˜é‡ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿‡å¤šçš„é—­åŒ…å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼</li></ul><h2 id="JS-ä¸­-this-çš„æƒ…å†µ">JS ä¸­ this çš„æƒ…å†µ</h2><ol><li>æ™®é€šå‡½æ•°è°ƒç”¨ï¼šé€šè¿‡å‡½æ•°å()ç›´æ¥è°ƒç”¨ï¼š<code>this</code>æŒ‡å‘<code>å…¨å±€å¯¹è±¡window</code>ï¼ˆæ³¨æ„letå®šä¹‰çš„å˜é‡ä¸æ˜¯windowå±æ€§ï¼Œåªæœ‰window.xxxå®šä¹‰çš„æ‰æ˜¯ã€‚å³let a =â€™aaaâ€™; this.aæ˜¯undefinedï¼‰</li><li>æ„é€ å‡½æ•°è°ƒç”¨ï¼šå‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°ï¼Œç”¨newå…³é”®å­—è°ƒç”¨æ—¶ï¼š<code>this</code>æŒ‡å‘<code>æ–°newå‡ºçš„å¯¹è±¡</code></li><li>å¯¹è±¡å‡½æ•°è°ƒç”¨ï¼šé€šè¿‡å¯¹è±¡.å‡½æ•°å()è°ƒç”¨çš„ï¼š<code>this</code>æŒ‡å‘<code>è¿™ä¸ªå¯¹è±¡</code></li><li>ç®­å¤´å‡½æ•°è°ƒç”¨ï¼šç®­å¤´å‡½æ•°é‡Œé¢æ²¡æœ‰ this ï¼Œæ‰€ä»¥<code>æ°¸è¿œæ˜¯ä¸Šå±‚ä½œç”¨åŸŸthis</code>ï¼ˆä¸Šä¸‹æ–‡ï¼‰</li><li>applyå’Œcallè°ƒç”¨ï¼šå‡½æ•°ä½“å†… this çš„æŒ‡å‘çš„æ˜¯ call/apply æ–¹æ³•<code>ç¬¬ä¸€ä¸ªå‚æ•°</code>ï¼Œè‹¥ä¸ºç©ºé»˜è®¤æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚</li><li>å‡½æ•°ä½œä¸ºæ•°ç»„çš„ä¸€ä¸ªå…ƒç´ ï¼Œé€šè¿‡æ•°ç»„ä¸‹æ ‡è°ƒç”¨çš„ï¼šthisæŒ‡å‘è¿™ä¸ªæ•°ç»„</li><li>å‡½æ•°ä½œä¸ºwindowå†…ç½®å‡½æ•°çš„å›è°ƒå‡½æ•°è°ƒç”¨ï¼šthisæŒ‡å‘windowï¼ˆå¦‚setInterval setTimeout ç­‰ï¼‰</li></ol><h2 id="call-apply-bind-çš„åŒºåˆ«">call/apply/bind çš„åŒºåˆ«</h2><p>ç›¸åŒï¼š</p><p>1ã€éƒ½æ˜¯ç”¨æ¥æ”¹å˜å‡½æ•°çš„thiså¯¹è±¡çš„æŒ‡å‘çš„ã€‚<br>2ã€ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯thisè¦æŒ‡å‘çš„å¯¹è±¡ã€‚<br>3ã€éƒ½å¯ä»¥åˆ©ç”¨åç»­å‚æ•°ä¼ å‚ã€‚</p><p>ä¸åŒï¼š</p><p>applyå’Œcallä¼ å…¥çš„å‚æ•°åˆ—è¡¨å½¢å¼ä¸åŒã€‚apply æ¥æ”¶ argumentsï¼Œcallæ¥æ”¶ä¸€ä¸²å‚æ•°åˆ—è¡¨</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">fn</span>.call(obj, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="attribute">fn</span>.apply(obj,<span class="meta"> [1, 2]);</span></span><br></pre></td></tr></table></figure><p>bindï¼šè¯­æ³•å’Œcallä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºç«‹å³æ‰§è¡Œè¿˜æ˜¯ç­‰å¾…æ‰§è¡Œï¼Œbindä¸å…¼å®¹IE6~8<br>bind ä¸»è¦å°±æ˜¯å°†å‡½æ•°ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ï¼Œbind()ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å¯¹åº”å‡½æ•°ä¾¿äºç¨åè°ƒç”¨ï¼›è€Œapplyã€callåˆ™æ˜¯ç«‹å³è°ƒç”¨ã€‚</p><p>æ€»ç»“ï¼šåŸºäºFunction.prototypeä¸Šçš„ <code>apply ã€ call å’Œ bind </code>è°ƒç”¨æ¨¡å¼ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ˜¾ç¤ºçš„æŒ‡å®šè°ƒç”¨å‡½æ•°çš„ this æŒ‡å‘ã€‚<code>apply</code>æ¥æ”¶å‚æ•°çš„æ˜¯æ•°ç»„ï¼Œ<code>call</code>æ¥å—å‚æ•°åˆ—è¡¨ï¼Œ`` bind<code>æ–¹æ³•é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª</code> this <code>ç»‘å®šäº†ä¼ å…¥å¯¹è±¡çš„æ–°å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ </code>this<code>æŒ‡å‘é™¤äº†ä½¿ç”¨</code>new `æ—¶ä¼šè¢«æ”¹å˜ï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ã€‚è‹¥ä¸ºç©ºé»˜è®¤æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚</p><h2 id="ç®­å¤´å‡½æ•°çš„ç‰¹æ€§">ç®­å¤´å‡½æ•°çš„ç‰¹æ€§</h2><ol><li><code>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this</code>ï¼Œä¼šæ•è·å…¶æ‰€åœ¨çš„ä¸Šä¸‹æ–‡çš„thiså€¼ï¼Œä½œä¸ºè‡ªå·±çš„thiså€¼</li><li><code>ç®­å¤´å‡½æ•°æ²¡æœ‰constructor</code>ï¼Œæ˜¯åŒ¿åå‡½æ•°ï¼Œä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œä¸èƒ½é€šè¿‡new è°ƒç”¨ï¼›</li><li><code>æ²¡æœ‰new.target å±æ€§</code>ã€‚åœ¨é€šè¿‡newè¿ç®—ç¬¦è¢«åˆå§‹åŒ–çš„å‡½æ•°æˆ–æ„é€ æ–¹æ³•ä¸­ï¼Œnew.targetè¿”å›ä¸€ä¸ªæŒ‡å‘æ„é€ æ–¹æ³•æˆ–å‡½æ•°çš„å¼•ç”¨ã€‚åœ¨æ™®é€šçš„å‡½æ•°è°ƒç”¨ä¸­ï¼Œnew.target çš„å€¼æ˜¯undefined</li><li><code>ç®­å¤´å‡½æ•°ä¸ç»‘å®šArguments å¯¹è±¡</code>ã€‚å–è€Œä»£ä¹‹ç”¨restå‚æ•°â€¦è§£å†³ã€‚ç”±äº ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisæŒ‡é’ˆï¼Œé€šè¿‡ call() æˆ– apply() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œåªèƒ½ä¼ é€’å‚æ•°ï¼ˆä¸èƒ½ç»‘å®šthisï¼‰ï¼Œä»–ä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ï¼ˆè¿™ç§ç°è±¡å¯¹äºbindæ–¹æ³•åŒæ ·æˆç«‹ï¼‰</li><li>ç®­å¤´å‡½æ•°é€šè¿‡ call()  æˆ–   apply() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œåªä¼ å…¥äº†ä¸€ä¸ªå‚æ•°ï¼Œå¯¹ this å¹¶æ²¡æœ‰å½±å“ã€‚</li><li>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å±æ€§ Fn.prototype å€¼ä¸º undefined</li><li>ç®­å¤´å‡½æ•°ä¸èƒ½å½“åšGeneratorå‡½æ•°,ä¸èƒ½ä½¿ç”¨yieldå…³é”®å­—</li></ol><h2 id="åŸå‹-åŸå‹é“¾">åŸå‹ &amp;&amp; åŸå‹é“¾</h2><p><strong>åŸå‹å…³ç³»ï¼š</strong></p><ul><li>æ¯ä¸ª classéƒ½æœ‰æ˜¾ç¤ºåŸå‹ prototype</li><li>æ¯ä¸ªå®ä¾‹éƒ½æœ‰éšå¼åŸå‹ <code>__proto__</code></li><li>å®ä¾‹çš„ <code>__proto__</code> æŒ‡å‘å¯¹åº” class çš„ prototype</li></ul><p>â€Œ <strong>åŸå‹:</strong> Â åœ¨ JS ä¸­ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼‰æ—¶ï¼Œå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€äº›é¢„å®šä¹‰çš„å±æ€§ã€‚å…¶ä¸­æ¯ä¸ª<code>å‡½æ•°å¯¹è±¡</code>éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>Â å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„<code>åŸå‹å¯¹è±¡</code>ã€‚</p><blockquote><p>åŸå‹é“¾ï¼šæ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰proptypeå±æ€§,å†…éƒ¨å¿…æœ‰_proto_,å½“å®ä¾‹åŒ–å¯¹è±¡è®¿é—®ä¸€ä¸ªå±æ€§çš„æ—¶å€™,é¦–å…ˆä¼šåœ¨ è‡ªèº«æŸ¥æ‰¾,å¦‚æ‰¾ä¸åˆ°,åˆ™ä¼šå‘_proto_æŒ‡å‘çš„åŸå‹æŸ¥æ‰¾,å¦‚ä»æ‰¾ä¸åˆ°,åˆ™ä¼šåŸå‹ä¸­çš„_proto_æŒ‡å‘ ä¸Šçº§çš„åŸå‹ä¸­æŸ¥æ‰¾,ç›´åˆ°æ‰¾åˆ°object.proptype._proto_ä¸ºæ­¢(å€¼ä¸ºnull),è¿™ç§é“¾çŠ¶ç§°ä¸ºåŸå‹é“¾</p></blockquote><p><strong>ç‰¹ç‚¹:</strong> Â <code>JavaScript</code>å¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹åŸå‹æ—¶ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚</p><h2 id="newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶">newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶</h2><ol><li>é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>ç©ºå¯¹è±¡</code></li><li><code>è®¾ç½®åŸå‹</code>ï¼Œå°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºå‡½æ•°çš„<code>prototype</code>å¯¹è±¡ã€‚</li><li>è®©å‡½æ•°çš„<code>this</code>æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰</li><li>åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯å€¼ç±»å‹ï¼Œè¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚</li></ol><h2 id="ä»‹ç»èŠ‚æµé˜²æŠ–åŸç†ã€åŒºåˆ«ä»¥åŠåº”ç”¨">ä»‹ç»èŠ‚æµé˜²æŠ–åŸç†ã€åŒºåˆ«ä»¥åŠåº”ç”¨</h2><p><code>èŠ‚æµ</code>ï¼šäº‹ä»¶è§¦å‘åï¼Œè§„å®šæ—¶é—´å†…ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¸èƒ½å†æ¬¡è¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œå‡½æ•°åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”æ˜¯æœ€å…ˆè¢«è§¦å‘è°ƒç”¨çš„é‚£æ¬¡ã€‚</p><p><code>é˜²æŠ–</code>ï¼šå¤šæ¬¡è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æ˜¯åœ¨è§¦å‘æ“ä½œç»“æŸæ—¶æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘å‡†å¤‡æ‰§è¡Œäº‹ä»¶å‡½æ•°å‰ï¼Œä¼šç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼ˆè¿™æ—¶é—´æ˜¯ç å†œè‡ªå·±å»å®šä¹‰çš„ï¼Œæ¯”å¦‚ 1 ç§’ï¼‰ï¼Œå¦‚æœæ²¡æœ‰å†æ¬¡è¢«è§¦å‘ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œï¼Œå¦‚æœè¢«è§¦å‘äº†ï¼Œé‚£å°±æœ¬æ¬¡ä½œåºŸï¼Œé‡æ–°ä»æ–°è§¦å‘çš„æ—¶é—´å¼€å§‹è®¡ç®—ï¼Œå¹¶å†æ¬¡ç­‰å¾… 1 ç§’ï¼Œç›´åˆ°èƒ½æœ€ç»ˆæ‰§è¡Œï¼</p><p><code>ä½¿ç”¨åœºæ™¯</code>ï¼š<br>èŠ‚æµï¼šæ»šåŠ¨åŠ è½½æ›´å¤šã€æœç´¢æ¡†æœçš„ç´¢è”æƒ³åŠŸèƒ½ã€é«˜é¢‘ç‚¹å‡»ã€è¡¨å•é‡å¤æäº¤â€¦â€¦<br>é˜²æŠ–ï¼šæœç´¢æ¡†æœç´¢è¾“å…¥ï¼Œå¹¶åœ¨è¾“å…¥å®Œä»¥åè‡ªåŠ¨æœç´¢ã€æ‰‹æœºå·ï¼Œé‚®ç®±éªŒè¯è¾“å…¥æ£€æµ‹ã€çª—å£å¤§å° resize å˜åŒ–åï¼Œå†é‡æ–°æ¸²æŸ“ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŠ‚æµå‡½æ•° ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€æ¬¡åï¼Œåªæœ‰å¤§äºè®¾å®šçš„æ‰§è¡Œå‘¨æœŸæ‰ä¼šæ‰§è¡Œç¬¬äºŒæ¬¡ã€‚æœ‰ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œå‡ºäºä¼˜åŒ–æ€§èƒ½çš„è§’åº¦ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©å‡½æ•°è§¦å‘çš„ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼Œåé¢çš„ä¸ç”Ÿæ•ˆã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fnè¦è¢«èŠ‚æµçš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> delayè§„å®šçš„æ—¶é—´</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="comment">//è®°å½•ä¸Šä¸€æ¬¡å‡½æ•°è§¦å‘çš„æ—¶é—´</span></span><br><span class="line">    <span class="keyword">var</span> lastTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">//è®°å½•å½“å‰å‡½æ•°è§¦å‘çš„æ—¶é—´</span></span><br><span class="line">        <span class="keyword">var</span> nowTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">if</span>(nowTime - lastTime &gt; delay)&#123;</span><br><span class="line">            <span class="comment">//ä¿®æ­£thisæŒ‡å‘é—®é¢˜</span></span><br><span class="line">            fn.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">            <span class="comment">//åŒæ­¥æ‰§è¡Œç»“æŸæ—¶é—´</span></span><br><span class="line">            lastTime = nowTime;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">onscroll</span> = <span class="title function_">throttle</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;sclloräº‹ä»¶è¢«è§¦å‘äº†&#x27;</span> + <span class="title class_">Date</span>.<span class="title function_">now</span>());</span><br><span class="line">&#125;, <span class="number">200</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é˜²æŠ–å‡½æ•°  ä¸€ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©æœ€åä¸€æ¬¡ç”Ÿæ•ˆï¼Œå‰é¢çš„ä¸ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fnè¦è¢«èŠ‚æµçš„å‡½æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> delayè§„å®šçš„æ—¶é—´</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="comment">//è®°å½•ä¸Šä¸€æ¬¡çš„å»¶æ—¶å™¨</span></span><br><span class="line">    <span class="keyword">var</span> timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">//æ¸…é™¤ä¸Šä¸€æ¬¡çš„æ¼”ç¤ºå™¨</span></span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        <span class="comment">//é‡æ–°è®¾ç½®æ–°çš„å»¶æ—¶å™¨</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">//ä¿®æ­£thisæŒ‡å‘é—®é¢˜</span></span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>);</span><br><span class="line">        &#125;, delay); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>).<span class="property">onclick</span> = <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æŒ‰é’®è¢«ç‚¹å‡»äº†&#x27;</span> + <span class="title class_">Date</span>.<span class="title function_">now</span>());</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><h2 id="setTimeoutã€Promiseã€Async-Await-çš„åŒºåˆ«">setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«</h2><ol><li><p>setTimeout</p><p>settimeoutçš„å›è°ƒå‡½æ•°æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰åˆ°æ‰§è¡Œæ ˆæ¸…ç©ºä»¥åæ‰§è¡Œã€‚</p></li><li><p>Promise</p><p>Promiseæœ¬èº«æ˜¯<strong>åŒæ­¥çš„ç«‹å³æ‰§è¡Œå‡½æ•°</strong>ï¼Œ å½“åœ¨executorä¸­æ‰§è¡Œresolveæˆ–è€…rejectçš„æ—¶å€™, æ­¤æ—¶æ˜¯å¼‚æ­¥æ“ä½œï¼Œ ä¼šå…ˆæ‰§è¡Œthen/catchç­‰ï¼Œå½“ä¸»æ ˆå®Œæˆåï¼Œæ‰ä¼šå»è°ƒç”¨resolve/rejectä¸­å­˜æ”¾çš„æ–¹æ³•æ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span> (<span class="params">resolve</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1 end&#x27;</span>)</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;settimeout&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>)</span><br><span class="line"><span class="comment">// è¾“å‡ºé¡ºåº: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;settimeout</span></span><br></pre></td></tr></table></figure></li><li><p>async/await</p><p>async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° await å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œæ˜¯è®©å‡ºäº†çº¿ç¨‹ï¼Œè·³å‡ºäº† async å‡½æ•°ä½“ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 start&#x27;</span>);</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">async2</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>);</span><br><span class="line"><span class="title function_">async1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºé¡ºåºï¼šscript start-&gt;async1 start-&gt;async2-&gt;script end-&gt;async1 end</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="Async-Await-å¦‚ä½•é€šè¿‡åŒæ­¥çš„æ–¹å¼å®ç°å¼‚æ­¥">Async/Await å¦‚ä½•é€šè¿‡åŒæ­¥çš„æ–¹å¼å®ç°å¼‚æ­¥</h2><p>Async/Awaitå°±æ˜¯ä¸€ä¸ª<strong>è‡ªæ‰§è¡Œ</strong>çš„generateå‡½æ•°ã€‚åˆ©ç”¨generateå‡½æ•°çš„ç‰¹æ€§æŠŠå¼‚æ­¥çš„ä»£ç å†™æˆâ€œåŒæ­¥â€çš„å½¢å¼,ç¬¬ä¸€ä¸ªè¯·æ±‚çš„è¿”å›å€¼ä½œä¸ºåé¢ä¸€ä¸ªè¯·æ±‚çš„å‚æ•°,å…¶ä¸­æ¯ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡.</p><h2 id="EventLoop-äº‹ä»¶å¾ªç¯">EventLoop äº‹ä»¶å¾ªç¯</h2><p><code>JS</code>æ˜¯å•çº¿ç¨‹çš„ï¼Œä¸ºäº†é˜²æ­¢ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶é—´è¿‡é•¿é˜»å¡åé¢çš„ä»£ç ï¼Œæ‰€ä»¥ä¼šå…ˆå°†åŒæ­¥ä»£ç å‹å…¥æ‰§è¡Œæ ˆä¸­ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œå°†å¼‚æ­¥ä»£ç æ¨å…¥å¼‚æ­¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥é˜Ÿåˆ—åˆåˆ†ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå› ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œæ‰€ä»¥å¾®ä»»åŠ¡é˜Ÿåˆ—è¦ä¼˜å…ˆäºå®ä»»åŠ¡é˜Ÿåˆ—ã€‚å¾®ä»»åŠ¡é˜Ÿåˆ—çš„ä»£è¡¨å°±æ˜¯ï¼Œ<code>Promise.then</code>ï¼Œ<code>MutationObserver</code>ï¼Œå®ä»»åŠ¡çš„è¯å°±æ˜¯<code>setImmediate setTimeout setInterval</code></p><p>JSè¿è¡Œçš„ç¯å¢ƒã€‚ä¸€èˆ¬ä¸ºæµè§ˆå™¨æˆ–è€…Nodeã€‚ åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œæœ‰JS å¼•æ“çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹ï¼Œä¸”ä¸¤ä¸ªçº¿ç¨‹äº’æ–¥ã€‚ Nodeç¯å¢ƒä¸­ï¼Œåªæœ‰JS çº¿ç¨‹ã€‚ ä¸åŒç¯å¢ƒæ‰§è¡Œæœºåˆ¶æœ‰å·®å¼‚ï¼Œä¸åŒä»»åŠ¡è¿›å…¥ä¸åŒEvent Queueé˜Ÿåˆ—ã€‚ å½“ä¸»ç¨‹ç»“æŸï¼Œå…ˆæ‰§è¡Œå‡†å¤‡å¥½å¾®ä»»åŠ¡ï¼Œç„¶åå†æ‰§è¡Œå‡†å¤‡å¥½çš„å®ä»»åŠ¡ï¼Œä¸€ä¸ªè½®è¯¢ç»“æŸã€‚</p><h3 id="æµè§ˆå™¨ä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent-Loop"><strong>æµè§ˆå™¨ä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent Loop)</strong></h3><p>äº‹ä»¶ç¯çš„è¿è¡Œæœºåˆ¶æ˜¯ï¼Œå…ˆä¼šæ‰§è¡Œæ ˆä¸­çš„å†…å®¹ï¼Œæ ˆä¸­çš„å†…å®¹æ‰§è¡Œåæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡æ¸…ç©ºåå†æ‰§è¡Œå®ä»»åŠ¡ï¼Œå…ˆå–å‡ºä¸€ä¸ªå®ä»»åŠ¡ï¼Œå†å»æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œç„¶ååœ¨å–å®ä»»åŠ¡æ¸…å¾®ä»»åŠ¡è¿™æ ·ä¸åœçš„å¾ªç¯ã€‚</p><ul><li><p>eventLoop æ˜¯ç”±JSçš„å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨ï¼‰æ¥å®ç°çš„ï¼›</p></li><li><p>äº‹ä»¶å¾ªç¯å¯ä»¥ç®€å•çš„æè¿°ä¸ºä»¥ä¸‹å››ä¸ªæ­¥éª¤:</p><ol><li>å‡½æ•°å…¥æ ˆï¼Œå½“Stackä¸­æ‰§è¡Œåˆ°å¼‚æ­¥ä»»åŠ¡çš„æ—¶å€™ï¼Œå°±å°†ä»–ä¸¢ç»™WebAPIs,æ¥ç€æ‰§è¡ŒåŒæ­¥ä»»åŠ¡,ç›´åˆ°Stackä¸ºç©ºï¼›</li><li>æ­¤æœŸé—´WebAPIså®Œæˆè¿™ä¸ªäº‹ä»¶ï¼ŒæŠŠå›è°ƒå‡½æ•°æ”¾å…¥é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œï¼ˆå¾®ä»»åŠ¡æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼‰</li><li>æ‰§è¡Œæ ˆä¸ºç©ºæ—¶ï¼ŒEvent LoopæŠŠå¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œæ¸…ç©ºï¼›</li><li>å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºåï¼Œè¿›å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå–é˜Ÿåˆ—çš„ç¬¬ä¸€é¡¹ä»»åŠ¡æ”¾å…¥Stack(æ ˆï¼‰ä¸­æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåï¼ŒæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œæœ‰çš„è¯ï¼Œæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚é‡å¤4ï¼Œç»§ç»­ä»å®ä»»åŠ¡ä¸­å–ä»»åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆä¹‹åï¼Œç»§ç»­æ¸…ç©ºå¾®ä»»åŠ¡ï¼Œå¦‚æ­¤åå¤å¾ªç¯ï¼Œç›´è‡³æ¸…ç©ºæ‰€æœ‰çš„ä»»åŠ¡ã€‚</li></ol><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/342e581223d2471d9484fc48beb9f8e1~tplv-k3u1fbpfcp-zoom-1.image" alt="äº‹ä»¶å¾ªç¯æµç¨‹"></p></li><li><p>æµè§ˆå™¨ä¸­çš„ä»»åŠ¡æº(task):</p><ul><li><code>å®ä»»åŠ¡(macrotask)</code>ï¼š<br>å®¿ä¸»ç¯å¢ƒæä¾›çš„ï¼Œæ¯”å¦‚æµè§ˆå™¨<br>ajaxã€setTimeoutã€setIntervalã€setTmmediate(åªå…¼å®¹ie)ã€scriptã€requestAnimationFrameã€messageChannelã€UIæ¸²æŸ“ã€ä¸€äº›æµè§ˆå™¨api</li><li><code>å¾®ä»»åŠ¡(microtask)</code>ï¼š<br>è¯­è¨€æœ¬èº«æä¾›çš„ï¼Œæ¯”å¦‚promise.then<br>thenã€queueMicrotask(åŸºäºthen)ã€mutationObserver(æµè§ˆå™¨æä¾›)ã€messageChannel ã€mutationObersve</li></ul></li></ul><h3 id="Node-ç¯å¢ƒä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent-Loop"><strong>Node ç¯å¢ƒä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent Loop)</strong></h3><p><code>Node</code>æ˜¯åŸºäºV8å¼•æ“çš„è¿è¡Œåœ¨æœåŠ¡ç«¯çš„<code>JavaScript</code>è¿è¡Œç¯å¢ƒï¼Œåœ¨å¤„ç†é«˜å¹¶å‘ã€I/Oå¯†é›†(æ–‡ä»¶æ“ä½œã€ç½‘ç»œæ“ä½œã€æ•°æ®åº“æ“ä½œç­‰)åœºæ™¯æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚è™½ç„¶ç”¨åˆ°ä¹Ÿæ˜¯V8å¼•æ“ï¼Œä½†ç”±äºæœåŠ¡ç›®çš„å’Œç¯å¢ƒä¸åŒï¼Œå¯¼è‡´äº†å®ƒçš„APIä¸åŸç”ŸJSæœ‰äº›åŒºåˆ«ï¼Œå…¶Event Loopè¿˜è¦å¤„ç†ä¸€äº›I/Oï¼Œæ¯”å¦‚æ–°çš„ç½‘ç»œè¿æ¥ç­‰ï¼Œæ‰€ä»¥Nodeçš„Event Loop(äº‹ä»¶ç¯æœºåˆ¶)ä¸æµè§ˆå™¨çš„æ˜¯ä¸å¤ªä¸€æ ·ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e362c1770f62428fbf3faabd99d2a64c~tplv-k3u1fbpfcp-zoom-1.image" alt="2020120317343116.png"> æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p><ul><li><code>timers</code>: è®¡æ—¶å™¨ï¼Œæ‰§è¡ŒsetTimeoutå’ŒsetIntervalçš„å›è°ƒ</li><li><code>pending callbacks</code>: æ‰§è¡Œå»¶è¿Ÿåˆ°ä¸‹ä¸€ä¸ªå¾ªç¯è¿­ä»£çš„ I/O å›è°ƒ</li><li><code>idle, prepare</code>: é˜Ÿåˆ—çš„ç§»åŠ¨ï¼Œä»…ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨</li><li><code>pollè½®è¯¢</code>: æ£€ç´¢æ–°çš„ I/O äº‹ä»¶;æ‰§è¡Œä¸ I/O ç›¸å…³çš„å›è°ƒã€‚äº‹å®ä¸Šé™¤äº†å…¶ä»–å‡ ä¸ªé˜¶æ®µå¤„ç†çš„äº‹æƒ…ï¼Œå…¶ä»–å‡ ä¹æ‰€æœ‰çš„å¼‚æ­¥éƒ½åœ¨è¿™ä¸ªé˜¶æ®µå¤„ç†ã€‚</li><li><code>check</code>: æ‰§è¡Œ<code>setImmediate</code>å›è°ƒï¼ŒsetImmediateåœ¨è¿™é‡Œæ‰§è¡Œ</li><li><code>close callbacks</code>: æ‰§è¡Œ<code>close</code>äº‹ä»¶çš„<code>callback</code>ï¼Œä¸€äº›å…³é—­çš„å›è°ƒå‡½æ•°ï¼Œå¦‚ï¼šsocket.on(â€˜closeâ€™, â€¦)</li></ul>]]></content>
    
    
    <summary type="html">ğŸ’æœ¬æ–‡æ±‡æ€»JavaScriptï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2023å‰ç«¯é¢è¯•ç³»åˆ—â€” TypeScriptç¯‡</title>
    <link href="https://www.cameliia.top/posts/103.html"/>
    <id>https://www.cameliia.top/posts/103.html</id>
    <published>2023-03-08T02:00:00.000Z</published>
    <updated>2023-08-01T10:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p>æœ¬æ–‡æ˜¯æˆ‘çš„å‰ç«¯é¢è¯•ç³»åˆ—ç³»åˆ—å¯¼èˆªï¼Œå…¶ä»–ç« èŠ‚å†…å®¹å¯ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ï¼š</p><ol><li><a href="https://www.cameliia.top/posts/100.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“HTML &amp; CSS ç¯‡</a> â‡¦å½“å‰ä½ç½®ğŸª‚</li><li><a href="https://www.cameliia.top/posts/101.html">2023å‰ç«¯é¢è¯•ç³»åˆ—-- JS ç¯‡</a></li><li><a href="https://www.cameliia.top/posts/102.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“vueç¯‡</a></li><li><a href="https://www.cameliia.top/posts/103.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“TSç¯‡</a></li><li><a href="https://www.cameliia.top/posts/104.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“Reactç¯‡</a></li><li><a href="https://www.cameliia.top/posts/105.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“ç½‘ç»œç¯‡</a></li><li><a href="https://www.cameliia.top/posts/106.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“æµè§ˆå™¨ç¯‡</a></li></ol></div><h2 id="1ã€ä»€ä¹ˆæ˜¯TypeScriptï¼Ÿ">1ã€ä»€ä¹ˆæ˜¯TypeScriptï¼Ÿ</h2><p>TypeScriptæ˜¯JavaScriptçš„åŠ å¼ºç‰ˆï¼Œå®ƒç»™JavaScriptæ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹å’ŒåŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒæ‹“å±•äº†JavaScriptçš„è¯­æ³•ã€‚</p><p>è€Œä¸”TypeScriptä¸å­˜åœ¨è·Ÿæµè§ˆå™¨ä¸å…¼å®¹çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶ï¼Œå®ƒäº§ç”Ÿçš„éƒ½æ˜¯JavaScriptä»£ç ã€‚</p><h3 id="2ã€TypeScript-å’Œ-JavaScript-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ">2ã€TypeScript å’Œ JavaScript çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Typescript æ˜¯ JavaScript çš„è¶…é›†ï¼Œå¯ä»¥è¢«ç¼–è¯‘æˆ JavaScript ä»£ç ã€‚ ç”¨ JavaScript ç¼–å†™çš„åˆæ³•ä»£ç ï¼Œåœ¨ TypeScript ä¸­ä¾ç„¶æœ‰æ•ˆã€‚Typescript æ˜¯çº¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…å«ç±»å’Œæ¥å£çš„æ¦‚å¿µã€‚ ç¨‹åºå‘˜å¯ä»¥ç”¨å®ƒæ¥ç¼–å†™é¢å‘å¯¹è±¡çš„æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ç¨‹åºï¼Œå¹¶å°†å®ƒä»¬ç¼–è¯‘æˆ JavaScript ä»£ç ã€‚</p><p>TypeScriptå’Œ JavaScriptçš„å…³ç³»<br>TypeScript å¼•å…¥äº†å¾ˆå¤šé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„ç‰¹å¾ï¼ŒåŒ…æ‹¬ï¼š</p><p>interfaces  æ¥å£<br>classes  ç±»<br>enumerated types æšä¸¾ç±»å‹<br>generics æ³›å‹<br>modules æ¨¡å—<br>ä¸»è¦ä¸åŒç‚¹å¦‚ä¸‹ï¼š<br>TS æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œè€Œ JS æ˜¯ä¸€ç§è„šæœ¬è¯­è¨€ï¼ˆå°½ç®¡ JS æ˜¯åŸºäºå¯¹è±¡çš„ï¼‰ã€‚<br>TS æ”¯æŒå¯é€‰å‚æ•°ï¼Œ JS åˆ™ä¸æ”¯æŒè¯¥ç‰¹æ€§ã€‚<br>TS æ”¯æŒé™æ€ç±»å‹ï¼ŒJS ä¸æ”¯æŒã€‚<br>TS æ”¯æŒæ¥å£ï¼ŒJS ä¸æ”¯æŒæ¥å£ã€‚</p><h3 id="3ä¸ºä»€ä¹ˆè¦ç”¨-TypeScript-ï¼Ÿ">3ä¸ºä»€ä¹ˆè¦ç”¨ TypeScript ï¼Ÿ</h3><p>TS åœ¨å¼€å‘æ—¶å°±èƒ½ç»™å‡ºç¼–è¯‘é”™è¯¯ï¼Œ è€Œ JS é”™è¯¯åˆ™éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½æš´éœ²ã€‚<br>ä½œä¸ºå¼ºç±»å‹è¯­è¨€ï¼Œä½ å¯ä»¥æ˜ç¡®çŸ¥é“æ•°æ®çš„ç±»å‹ã€‚ä»£ç å¯è¯»æ€§æå¼ºï¼Œå‡ ä¹æ¯ä¸ªäººéƒ½èƒ½ç†è§£ã€‚<br>TS éå¸¸æµè¡Œï¼Œè¢«å¾ˆå¤šä¸šç•Œå¤§ä½¬ä½¿ç”¨ã€‚åƒ Asanaã€Circle CI å’Œ Slack è¿™äº›å…¬å¸éƒ½åœ¨ç”¨ TSã€‚</p><h3 id="4ã€TypeScript-å’Œ-JavaScript-å“ªä¸ªæ›´å¥½ï¼Ÿ">4ã€TypeScript å’Œ JavaScript å“ªä¸ªæ›´å¥½ï¼Ÿ</h3><p>ç”±äº TS çš„å…ˆå¤©ä¼˜åŠ¿ï¼ŒTS è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚ä½†æ˜¯TS æœ€ç»ˆä¸å¯èƒ½å–ä»£ JSï¼Œå› ä¸º JS æ˜¯ TS çš„æ ¸å¿ƒã€‚</p><p>é€‰æ‹© TypeScript è¿˜æ˜¯ JavaScript è¦ç”±å¼€å‘è€…è‡ªå·±å»åšå†³å®šã€‚å¦‚æœä½ å–œæ¬¢ç±»å‹å®‰å…¨çš„è¯­è¨€ï¼Œé‚£ä¹ˆæ¨èä½ é€‰æ‹© TSã€‚ å¦‚æœä½ å·²ç»ç”¨ JS å¥½ä¹…äº†ï¼Œä½ å¯ä»¥é€‰æ‹©èµ°å‡ºèˆ’é€‚åŒºå­¦ä¹  TSï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åšæŒè‡ªå·±çš„å¼ºé¡¹ï¼Œç»§ç»­ä½¿ç”¨ JSã€‚</p><h3 id="5ã€ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ">5ã€ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿ</h3><p>æ³›å‹æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œä½¿ç”¨æ—¶å†å»æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§ã€‚<br>å¯ä»¥æŠŠæ³›å‹ç†è§£ä¸ºä»£è¡¨ç±»å‹çš„å‚æ•°<br>// æˆ‘ä»¬å¸Œæœ›ä¼ å…¥çš„å€¼æ˜¯ä»€ä¹ˆç±»å‹ï¼Œè¿”å›çš„å€¼å°±æ˜¯ä»€ä¹ˆç±»å‹<br>// ä¼ å…¥çš„å€¼å¯ä»¥æ˜¯ä»»æ„çš„ç±»å‹ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨åˆ° æ³›å‹</p><p>// å¦‚æœä½¿ç”¨ any çš„è¯ï¼Œå°±å¤±å»äº†ç±»å‹æ£€æŸ¥çš„æ„ä¹‰</p><p>function createArray1(length: any, value: any): Array<any> {<br>let result: any = [];<br>for (let i = 0; i &lt; length; i++) {<br>result[i] = value;<br>}<br>return result;<br>}</p><p>let result = createArray1(3, â€˜xâ€™);<br>console.log(result);</p><p>// æœ€å‚»çš„å†™æ³•ï¼šæ¯ç§ç±»å‹éƒ½å¾—å®šä¹‰ä¸€ç§å‡½æ•°<br>function createArray2(length: number, value: string): Array<string> {<br>let result: Array<string> = [];<br>for (let i = 0; i &lt; length; i++) {<br>result[i] = value;<br>}<br>return result;<br>}</p><p>function createArray3(length: number, value: number): Array<number> {<br>let result: Array<number> = [];<br>for (let i = 0; i &lt; length; i++) {<br>result[i] = value;<br>}<br>return result;<br>}<br>// æˆ–è€…ä½¿ç”¨å‡½æ•°é‡è½½ï¼Œå†™æ³•æœ‰ç‚¹éº»çƒ¦<br>function createArray4(length: number, value: number): Array<number><br>function createArray4(length: number, value: string): Array<string><br>function createArray4(length: number, value: any): Array<any> {<br>let result: Array<number> = [];<br>for (let i = 0; i &lt; length; i++) {<br>result[i] = value;<br>}<br>return result;<br>}<br>createArray4(6, â€˜666â€™);<br>//ä½¿ç”¨æ³›å‹<br>// æœ‰å…³è”çš„åœ°æ–¹éƒ½æ”¹æˆ <T><br>function createArray<T>(length: number, value: T): Array<T> {<br>let result: T[] = [];<br>for (let i = 0; i &lt; length; i++) {<br>result[i] = value;<br>}<br>return result;<br>}<br>// ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹<br>let result = createArray<string>(3, â€˜xâ€™);<br>// ä¹Ÿå¯ä»¥ä¸æŒ‡å®šç±»å‹ï¼ŒTS ä¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼<br>let result2 = createArray(3, â€˜xâ€™);<br>console.log(result);</p><h3 id="6ã€TSä¸­çš„ç±»">6ã€TSä¸­çš„ç±»</h3><p>TypeScript æ˜¯é¢å‘å¯¹è±¡çš„ JavaScriptã€‚è€Œå…¶ä¸­çš„ç±»æè¿°äº†æ‰€åˆ›å»ºçš„å¯¹è±¡å…±åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p>ä¼ ç»Ÿçš„JavaScriptç¨‹åºä½¿ç”¨å‡½æ•°å’ŒåŸºäºåŸå‹çš„ç»§æ‰¿æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä½†è¿™å¯¹äºç†Ÿæ‚‰ä½¿ç”¨é¢å‘å¯¹è±¡æ–¹å¼çš„ç¨‹åºå‘˜æ¥è¯´æœ‰äº›æ£˜æ‰‹ï¼Œå› ä¸ºä»–ä»¬ç”¨çš„æ˜¯åŸºäºç±»çš„ç»§æ‰¿å¹¶ä¸”å¯¹è±¡æ˜¯ä»ç±»æ„å»ºå‡ºæ¥çš„ã€‚</p><p>ä»ECMAScript 2015ï¼Œä¹Ÿå°±æ˜¯ECMAScript 6ï¼ŒJavaScriptç¨‹åºå°†å¯ä»¥ä½¿ç”¨è¿™ç§åŸºäºç±»çš„é¢å‘å¯¹è±¡æ–¹æ³•ã€‚åœ¨TypeScripté‡Œå…è®¸å¼€å‘è€…ç°åœ¨å°±ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¹¶ä¸”ç¼–è¯‘åçš„JavaScriptå¯ä»¥åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨å’Œå¹³å°ä¸Šè¿è¡Œï¼Œ</p><h3 id="7ã€ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ">7ã€ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>æ„é€ å‡½æ•° ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ã€‚ä¸»è¦ç”¨æ¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶åˆå§‹åŒ–å¯¹è±¡ï¼Œ å³ä¸ºå¯¹è±¡æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ï¼Œæ€»ä¸newè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨åœ¨åˆ›å»ºå¯¹è±¡çš„è¯­å¥ä¸­ã€‚è€ŒTypeScriptçš„æ„é€ å‡½æ•°ç”¨å…³é”®å­—constructoræ¥å®ç°ã€‚å¯ä»¥é€šè¿‡thisï¼ˆå’Œjava/C#ä¸€æ ·ä»£è¡¨å¯¹è±¡å®ä¾‹çš„æˆå‘˜è®¿é—®ï¼‰å…³é”®å­—æ¥è®¿é—®å½“å‰ç±»ä½“ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><h3 id="8ã€å®ä¾‹åŒ–æ˜¯ä»€ä¹ˆï¼Ÿ">8ã€å®ä¾‹åŒ–æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªç±»åå¹¶ä¸èƒ½ç›´æ¥çš„å¯¹å±æ€§å’Œæ–¹æ³•è¿›è¡Œå¼•ç”¨ï¼Œå¿…é¡»å¯¹ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œå³åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚TypeScriptä¸­ç”¨new å…³é”®å­—åˆ›å»ºå¯¹è±¡ã€‚å®ä¾‹åŒ–åé€šè¿‡â€œ.â€æ¥è®¿é—®å±æ€§å’Œæ–¹æ³•</p><h3 id="9ã€æ–¹æ³•é‡å†™æ˜¯ä»€ä¹ˆï¼Ÿ">9ã€æ–¹æ³•é‡å†™æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å­ç±»å¯ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–å†™ç›¸åŒçš„æ–¹æ³•ã€‚ä½†æœ‰æ—¶å­ç±»å¹¶ä¸æƒ³åŸå°ä¸åŠ¨åœ°ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œæ˜¯æƒ³ä½œä¸€å®šçš„ä¿®æ”¹ï¼Œè¿™å°±éœ€è¦é‡‡ç”¨æ–¹æ³•çš„é‡å†™</p><p>é‡å†™çš„ä½œç”¨åœ¨äºå­ç±»å¯ä»¥æ ¹æ®éœ€è¦ï¼Œå®šä¹‰ç‰¹å®šäºè‡ªå·±çš„è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯è¯´å­ç±»èƒ½å¤Ÿæ ¹æ®éœ€è¦å®ç°çˆ¶ç±»çš„æ–¹æ³•ã€‚</p><h3 id="10ã€ä»€ä¹ˆæ˜¯å¯ç´¢å¼•ç±»å‹æ¥å£ï¼Ÿ">10ã€ä»€ä¹ˆæ˜¯å¯ç´¢å¼•ç±»å‹æ¥å£ï¼Ÿ</h3><p>ä¸€èˆ¬ç”¨æ¥çº¦æŸæ•°ç»„å’Œå¯¹è±¡</p><p>/ æ•°å­—ç´¢å¼•â€”â€”çº¦æŸæ•°ç»„<br>// index æ˜¯éšä¾¿å–çš„åå­—ï¼Œå¯ä»¥ä»»æ„å–å<br>// åªè¦ index çš„ç±»å‹æ˜¯ numberï¼Œé‚£ä¹ˆå€¼çš„ç±»å‹å¿…é¡»æ˜¯ string<br>interface StringArray {<br>// key çš„ç±»å‹ä¸º number ï¼Œä¸€èˆ¬éƒ½ä»£è¡¨æ˜¯æ•°ç»„<br>// é™åˆ¶ value çš„ç±»å‹ä¸º string<br>[index:number]:string<br>}<br>let arr:StringArray = [â€˜aaaâ€™,â€˜bbbâ€™];<br>console.log(arr);</p><p>// å­—ç¬¦ä¸²ç´¢å¼•â€”â€”çº¦æŸå¯¹è±¡<br>// åªè¦ index çš„ç±»å‹æ˜¯ stringï¼Œé‚£ä¹ˆå€¼çš„ç±»å‹å¿…é¡»æ˜¯ string<br>interface StringObject {<br>// key çš„ç±»å‹ä¸º string ï¼Œä¸€èˆ¬éƒ½ä»£è¡¨æ˜¯å¯¹è±¡<br>// é™åˆ¶ value çš„ç±»å‹ä¸º string<br>[index:string]:string<br>}<br>let obj:StringObject = {name:â€˜cccâ€™};</p><h3 id="11ã€ä»€ä¹ˆæ˜¯å‡½æ•°ç±»å‹æ¥å£ï¼Ÿ">11ã€ä»€ä¹ˆæ˜¯å‡½æ•°ç±»å‹æ¥å£ï¼Ÿ</h3><p>å¯¹æ–¹æ³•ä¼ å…¥çš„å‚æ•°å’Œè¿”å›å€¼è¿›è¡Œçº¦æŸ<br>// æ³¨æ„åŒºåˆ«</p><p>// æ™®é€šçš„æ¥å£<br>interface discount1{<br>getNum : (price:number) =&gt; number<br>}</p><p>// å‡½æ•°ç±»å‹æ¥å£<br>interface discount2{<br>// æ³¨æ„:<br>// â€œ:â€ å‰é¢çš„æ˜¯å‡½æ•°çš„ç­¾åï¼Œç”¨æ¥çº¦æŸå‡½æ•°çš„å‚æ•°<br>// â€œ:â€ åé¢çš„ç”¨æ¥çº¦æŸå‡½æ•°çš„è¿”å›å€¼<br>(price:number):number<br>}<br>let cost:discount2 = function(price:number):number{<br>return price * .8;<br>}</p><p>// ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«å<br>type Add = (x: number, y: number) =&gt; number<br>let add: Add = (a: number, b: number) =&gt; a + b</p><h3 id="12ã€ä»€ä¹ˆæ˜¯ç±»ç±»å‹æ¥å£ï¼Ÿ">12ã€ä»€ä¹ˆæ˜¯ç±»ç±»å‹æ¥å£ï¼Ÿ</h3><p>å¦‚æœæ¥å£ç”¨äºä¸€ä¸ªç±»çš„è¯ï¼Œé‚£ä¹ˆæ¥å£ä¼šè¡¨ç¤ºâ€œè¡Œä¸ºçš„æŠ½è±¡â€<br>å¯¹ç±»çš„çº¦æŸï¼Œè®©ç±»å»å®ç°æ¥å£ï¼Œç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£<br>æ¥å£åªèƒ½çº¦æŸç±»çš„å…¬æœ‰æˆå‘˜ï¼ˆå®ä¾‹å±æ€§/æ–¹æ³•ï¼‰ï¼Œæ— æ³•çº¦æŸç§æœ‰æˆå‘˜ã€æ„é€ å‡½æ•°ã€é™æ€å±æ€§/æ–¹æ³•</p><p>// æ¥å£å¯ä»¥åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­è¡¨ç¤ºä¸ºè¡Œä¸ºçš„æŠ½è±¡<br>interface Speakable {<br>name: string;</p><pre><code> // &quot;:&quot; å‰é¢çš„æ˜¯å‡½æ•°ç­¾åï¼Œç”¨æ¥çº¦æŸå‡½æ•°çš„å‚æ•°// &quot;:&quot; åé¢çš„ç”¨æ¥çº¦æŸå‡½æ•°çš„è¿”å›å€¼speak(words: string): void</code></pre><p>}</p><p>interface Speakable2 {<br>age: number;<br>}</p><p>class Dog implements Speakable, Speakable2 {<br>name!: string;<br>age = 18;</p><pre><code>speak(words: string) &#123;    console.log(words);&#125;</code></pre><p>}</p><p>let dog = new Dog();<br>dog.speak(â€˜æ±ªæ±ªæ±ªâ€™);</p><h3 id="13ã€ä»€ä¹ˆæ˜¯æ··åˆç±»å‹æ¥å£ï¼Ÿ">13ã€ä»€ä¹ˆæ˜¯æ··åˆç±»å‹æ¥å£ï¼Ÿ</h3><p>ä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶åšä¸ºå‡½æ•°å’Œå¯¹è±¡ä½¿ç”¨</p><p>interface FnType {<br>(getName:string):string;<br>}</p><p>interface MixedType extends FnType{<br>name:string;<br>age:number;<br>}<br>interface Counter {<br>(start: number): string;<br>interval: number;<br>reset(): void;<br>}</p><p>function getCounter(): Counter {<br>let counter = <Counter>function (start: number) { };<br>counter.interval = 123;<br>counter.reset = function () { };<br>return counter;<br>}</p><p>let c = getCounter();<br>c(10);<br>c.reset();<br>c.interval = 5.0;</p><h3 id="14ã€never-å’Œ-void-çš„åŒºåˆ«ï¼Ÿ">14ã€never å’Œ void çš„åŒºåˆ«ï¼Ÿ</h3><p>void è¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ï¼ˆå¯ä»¥è¢«èµ‹å€¼ä¸º null å’Œ undefinedï¼‰ã€‚<br>never è¡¨ç¤ºä¸€ä¸ªä¸åŒ…å«å€¼çš„ç±»å‹ï¼Œå³è¡¨ç¤ºæ°¸è¿œä¸å­˜åœ¨çš„å€¼ã€‚<br>æ‹¥æœ‰ void è¿”å›å€¼ç±»å‹çš„å‡½æ•°èƒ½æ­£å¸¸è¿è¡Œã€‚æ‹¥æœ‰ never è¿”å›å€¼ç±»å‹çš„å‡½æ•°æ— æ³•æ­£å¸¸è¿”å›ï¼Œæ— æ³•ç»ˆæ­¢ï¼Œæˆ–ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><h3 id="15ã€TSçš„å­¦å‰åŸºç¡€ï¼Ÿ">15ã€TSçš„å­¦å‰åŸºç¡€ï¼Ÿ</h3><p>å› ä¸º TypeScript æ˜¯å¯¹ JavaScript çš„æ‰©å±•ï¼Œæ›´å‡†ç¡®çš„è¯´æ˜¯ ECMAScriptã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å­¦ä¹ æˆ‘ä»¬è¿™å¥— TypeScript çš„è¯¾ç¨‹ï¼Œéœ€è¦å…·å¤‡ ECMAScript è¯­è¨€çš„åŸºç¡€ï¼š</p><p>ç†Ÿæ‚‰è¯­æ³•åŸºç¡€ï¼ˆå˜é‡ã€è¯­å¥ã€å‡½æ•°ç­‰åŸºç¡€æ¦‚å¿µï¼‰<br>æŒæ¡å†…ç½®å¯¹è±¡ï¼ˆArrayã€Date ç­‰ï¼‰çš„ä½¿ç”¨<br>é¢å‘å¯¹è±¡åŸºæœ¬æ¦‚å¿µï¼ˆæ„é€ å‡½æ•°ã€åŸå‹ã€ç»§æ‰¿ï¼‰</p>]]></content>
    
    
    <summary type="html">ğŸ”æœ¬æ–‡æ±‡æ€»TypeScriptï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2023å‰ç«¯é¢è¯•ç³»åˆ—â€” Reactç¯‡</title>
    <link href="https://www.cameliia.top/posts/104.html"/>
    <id>https://www.cameliia.top/posts/104.html</id>
    <published>2023-03-08T02:00:00.000Z</published>
    <updated>2023-08-01T10:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note info no-icon flat"><p>æœ¬æ–‡æ˜¯æˆ‘çš„å‰ç«¯é¢è¯•ç³»åˆ—ç³»åˆ—å¯¼èˆªï¼Œå…¶ä»–ç« èŠ‚å†…å®¹å¯ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ï¼š</p><ol><li><a href="https://www.cameliia.top/posts/100.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“HTML &amp; CSS ç¯‡</a> â‡¦å½“å‰ä½ç½®ğŸª‚</li><li><a href="https://www.cameliia.top/posts/101.html">2023å‰ç«¯é¢è¯•ç³»åˆ—-- JS ç¯‡</a></li><li><a href="https://www.cameliia.top/posts/102.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“vueç¯‡</a></li><li><a href="https://www.cameliia.top/posts/103.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“TSç¯‡</a></li><li><a href="https://www.cameliia.top/posts/104.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“Reactç¯‡</a></li><li><a href="https://www.cameliia.top/posts/105.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“ç½‘ç»œç¯‡</a></li><li><a href="https://www.cameliia.top/posts/106.html">2023å‰ç«¯é¢è¯•ç³»åˆ—â€“æµè§ˆå™¨ç¯‡</a></li></ol></div><h2 id="React-é¢è¯•ä¸“é¢˜">React é¢è¯•ä¸“é¢˜</h2><h3 id="React-jsæ˜¯-MVVM-æ¡†æ¶å—">React.jsæ˜¯ MVVM æ¡†æ¶å—?</h3><p>Reactå°±æ˜¯Facebookçš„ä¸€ä¸ªå¼€æºJSæ¡†æ¶ï¼Œä¸“æ³¨çš„å±‚é¢ä¸ºViewå±‚ï¼Œä¸åŒ…æ‹¬æ•°æ®è®¿é—®å±‚æˆ–è€…é‚£ç§Hashè·¯ç”±ï¼ˆä¸è¿‡React æœ‰æ’ä»¶æ”¯æŒï¼‰ï¼Œä¸Angularjsï¼ŒEmberjsç­‰å¤§è€Œå…¨çš„æ¡†æ¶ä¸åŒï¼ŒReactä¸“æ³¨çš„ä¸­å¿ƒæ˜¯Componentï¼Œå³ç»„ä»¶ã€‚Reactè®¤ä¸ºä¸€åˆ‡é¡µé¢å…ƒ ç´ éƒ½å¯ä»¥æŠ½è±¡æˆç»„ä»¶ï¼Œæ¯”å¦‚ä¸€ä¸ªè¡¨å•ï¼Œæˆ–è€…è¡¨å•ä¸­çš„æŸä¸€é¡¹ã€‚</p><p>Reactå¯ä»¥ä½œä¸ºMVVMä¸­ç¬¬äºŒä¸ªVï¼Œä¹Ÿå°±æ˜¯Viewï¼Œä½†æ˜¯å¹¶ä¸æ˜¯MVVMæ¡†æ¶ã€‚MVVMä¸€ä¸ªæœ€æ˜¾è‘—çš„ç‰¹å¾ï¼šåŒå‘ç»‘å®šã€‚Reactæ²¡æœ‰è¿™ä¸ªï¼Œå®ƒæ˜¯å•å‘æ•°æ®ç»‘å®šçš„ã€‚Reactæ˜¯ä¸€ä¸ªå•å‘æ•°æ®æµçš„åº“ï¼ŒçŠ¶æ€é©±åŠ¨è§†å›¾ã€‚reactæ•´ä½“æ˜¯å‡½æ•°å¼çš„æ€æƒ³ï¼ŒæŠŠç»„ä»¶è®¾è®¡æˆçº¯ç»„ä»¶ï¼ŒçŠ¶æ€å’Œé€»è¾‘é€šè¿‡å‚æ•°ä¼ å…¥ï¼Œæ‰€ä»¥åœ¨reactä¸­ï¼Œæ˜¯å•å‘æ•°æ®æµï¼Œæ¨å´‡ç»“åˆimmutableæ¥å®ç°æ•°æ®ä¸å¯å˜ã€‚</p><h3 id="hooksç”¨è¿‡å—ï¼ŸèŠèŠreactä¸­classç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«">hooksç”¨è¿‡å—ï¼ŸèŠèŠreactä¸­classç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«</h3><p>ç±»ç»„ä»¶æ˜¯ä½¿ç”¨ES6 çš„ classÂ æ¥å®šä¹‰çš„ç»„ä»¶ã€‚ å‡½æ•°ç»„ä»¶æ˜¯æ¥æ”¶ä¸€ä¸ªå•ä¸€çš„Â <code>props</code>Â å¯¹è±¡å¹¶è¿”å›ä¸€ä¸ªReactå…ƒç´ ã€‚</p><p>å…³äºReactçš„ä¸¤å¥—APIï¼ˆç±»ï¼ˆclassï¼‰API å’ŒåŸºäºå‡½æ•°çš„é’©å­ï¼ˆhooksï¼‰ APIï¼‰ã€‚å®˜æ–¹æ¨èä½¿ç”¨é’©å­ï¼ˆå‡½æ•°ï¼‰ï¼Œè€Œä¸æ˜¯ç±»ã€‚å› ä¸ºé’©å­æ›´ç®€æ´ï¼Œä»£ç é‡å°‘ï¼Œç”¨èµ·æ¥æ¯”è¾ƒ&quot;è½»&quot;ï¼Œè€Œç±»æ¯”è¾ƒ&quot;é‡&quot;ã€‚è€Œä¸”ï¼Œé’©å­æ˜¯å‡½æ•°ï¼Œæ›´ç¬¦åˆ React å‡½æ•°å¼çš„æœ¬è´¨ã€‚</p><p>å‡½æ•°ä¸€èˆ¬æ¥è¯´ï¼Œåªåº”è¯¥åšä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå€¼ã€‚ å¦‚æœä½ æœ‰å¤šä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œåº”è¯¥å†™æˆä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ã€‚è€Œä¸”ï¼Œæ•°æ®çš„çŠ¶æ€åº”è¯¥ä¸æ“ä½œæ–¹æ³•åˆ†ç¦»ã€‚æ ¹æ®å‡½æ•°è¿™ç§ç†å¿µï¼ŒReact çš„å‡½æ•°ç»„ä»¶åªåº”è¯¥åšä¸€ä»¶äº‹æƒ…ï¼šè¿”å›ç»„ä»¶çš„ HTML ä»£ç ï¼Œè€Œæ²¡æœ‰å…¶ä»–çš„åŠŸèƒ½ã€‚å‡½æ•°çš„è¿”å›ç»“æœåªä¾èµ–äºå®ƒçš„å‚æ•°ã€‚ä¸æ”¹å˜å‡½æ•°ä½“å¤–éƒ¨æ•°æ®ã€å‡½æ•°æ‰§è¡Œè¿‡ç¨‹é‡Œé¢æ²¡æœ‰å‰¯ä½œç”¨ã€‚</p><p>ç±»ï¼ˆclassï¼‰æ˜¯æ•°æ®å’Œé€»è¾‘çš„å°è£…ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç»„ä»¶çš„çŠ¶æ€å’Œæ“ä½œæ–¹æ³•æ˜¯å°è£…åœ¨ä¸€èµ·çš„ã€‚å¦‚æœé€‰æ‹©äº†ç±»çš„å†™æ³•ï¼Œå°±åº”è¯¥æŠŠç›¸å…³çš„æ•°æ®å’Œæ“ä½œï¼Œéƒ½å†™åœ¨åŒä¸€ä¸ª class é‡Œé¢ã€‚</p><p><strong>ç±»ç»„ä»¶çš„ç¼ºç‚¹</strong> :</p><p>å¤§å‹ç»„ä»¶å¾ˆéš¾æ‹†åˆ†å’Œé‡æ„ï¼Œä¹Ÿå¾ˆéš¾æµ‹è¯•ã€‚<br>ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨ç»„ä»¶çš„å„ä¸ªæ–¹æ³•ä¹‹ä¸­ï¼Œå¯¼è‡´é‡å¤é€»è¾‘æˆ–å…³è”é€»è¾‘ã€‚<br>ç»„ä»¶ç±»å¼•å…¥äº†å¤æ‚çš„ç¼–ç¨‹æ¨¡å¼ï¼Œæ¯”å¦‚ render props å’Œé«˜é˜¶ç»„ä»¶ã€‚<br>éš¾ä»¥ç†è§£çš„ classï¼Œç†è§£ JavaScript ä¸­Â <code>this</code>Â çš„å·¥ä½œæ–¹å¼ã€‚</p><p><strong>åŒºåˆ«</strong>ï¼š</p><p>å‡½æ•°ç»„ä»¶çš„æ€§èƒ½æ¯”ç±»ç»„ä»¶çš„æ€§èƒ½è¦é«˜ï¼Œå› ä¸ºç±»ç»„ä»¶ä½¿ç”¨çš„æ—¶å€™è¦å®ä¾‹åŒ–ï¼Œè€Œå‡½æ•°ç»„ä»¶ç›´æ¥æ‰§è¡Œå‡½æ•°å–è¿”å›ç»“æœå³å¯ã€‚</p><p>1.çŠ¶æ€çš„æœ‰æ— <br>hookså‡ºç°ä¹‹å‰ï¼Œå‡½æ•°ç»„ä»¶<code>æ²¡æœ‰å®ä¾‹</code>ï¼Œ<code>æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸ</code>ï¼Œ<code>æ²¡æœ‰state</code>ï¼Œ<code>æ²¡æœ‰this</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°å‡½æ•°ç»„ä»¶ä¸ºæ— çŠ¶æ€ç»„ä»¶ã€‚ hookså‡ºç°ä¹‹å‰ï¼Œreactä¸­çš„å‡½æ•°ç»„ä»¶é€šå¸¸åªè€ƒè™‘è´Ÿè´£UIçš„æ¸²æŸ“ï¼Œæ²¡æœ‰è‡ªèº«çš„çŠ¶æ€æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚å®ƒçš„è¾“å‡ºåªç”±å‚æ•°propså†³å®šï¼Œä¸å—å…¶ä»–ä»»ä½•å› ç´ å½±å“ã€‚</p><p>2.è°ƒç”¨æ–¹å¼çš„ä¸åŒ<br>å‡½æ•°ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå°†é‡æ–°è°ƒç”¨ç»„ä»¶æ–¹æ³•è¿”å›æ–°çš„reactå…ƒç´ ã€‚ç±»ç»„ä»¶é‡æ–°æ¸²æŸ“å°†newä¸€ä¸ªæ–°çš„ç»„ä»¶å®ä¾‹ï¼Œç„¶åè°ƒç”¨renderç±»æ–¹æ³•è¿”å›reactå…ƒç´ ï¼Œè¿™ä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆç±»ç»„ä»¶ä¸­thisæ˜¯å¯å˜çš„ã€‚</p><p>3.å› ä¸ºè°ƒç”¨æ–¹å¼ä¸åŒï¼Œåœ¨å‡½æ•°ç»„ä»¶ä½¿ç”¨ä¸­ä¼šå‡ºç°é—®é¢˜<br>åœ¨æ“ä½œä¸­æ”¹å˜çŠ¶æ€å€¼ï¼Œç±»ç»„ä»¶å¯ä»¥è·å–æœ€æ–°çš„çŠ¶æ€å€¼ï¼Œè€Œå‡½æ•°ç»„ä»¶åˆ™ä¼šæŒ‰ç…§é¡ºåºè¿”å›çŠ¶æ€å€¼</p><p><strong>React Hooksï¼ˆé’©å­çš„ä½œç”¨ï¼‰</strong></p><p><em>Hook</em>Â æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p><p>React Hooksçš„å‡ ä¸ªå¸¸ç”¨é’©å­:</p><ol><li><code>useState()</code> //çŠ¶æ€é’©å­</li><li><code>useContext()</code> //å…±äº«çŠ¶æ€é’©å­</li><li><code>useReducer()</code> //action é’©å­</li><li><code>useEffect()</code> //å‰¯ä½œç”¨é’©å­</li></ol><p>è¿˜æœ‰å‡ ä¸ªä¸å¸¸è§çš„å¤§æ¦‚çš„è¯´ä¸‹ï¼Œåç»­ä¼šä¸“é—¨å†™ç¯‡æ–‡ç« æè¿°ä¸‹</p><ul><li><p>1.useCallback è®°å¿†å‡½æ•° ä¸€èˆ¬æŠŠ<strong>å‡½æ•°å¼ç»„ä»¶ç†è§£ä¸ºclassç»„ä»¶renderå‡½æ•°çš„è¯­æ³•ç³–</strong>ï¼Œæ‰€ä»¥æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œå‡½æ•°å¼ç»„ä»¶å†…éƒ¨æ‰€æœ‰çš„ä»£ç éƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚è€Œæœ‰äº† useCallback å°±ä¸ä¸€æ ·äº†ï¼Œä½ å¯ä»¥é€šè¿‡ useCallback è·å¾—ä¸€ä¸ªè®°å¿†åçš„å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> memoizedHandleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Click happened&#x27;</span>)</span><br><span class="line">  &#125;, []); <span class="comment">// ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">SomeComponent</span> <span class="attr">onClick</span>=<span class="string">&#123;memoizedHandleClick&#125;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">SomeComponent</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ä¸€æ—¦å€¼æˆ–è€…å¼•ç”¨å‘ç”Ÿæ”¹å˜ï¼ŒuseCallback å°±ä¼šé‡æ–°è¿”å›ä¸€ä¸ªæ–°çš„è®°å¿†å‡½æ•°æä¾›ç»™åé¢è¿›è¡Œæ¸²æŸ“ã€‚</p></li><li><p>2.useMemo è®°å¿†ç»„ä»¶ useCallback çš„åŠŸèƒ½å®Œå…¨å¯ä»¥ç”± useMemo æ‰€å–ä»£ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ä½¿ç”¨ useMemo è¿”å›ä¸€ä¸ªè®°å¿†å‡½æ•°ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼š<strong>useCallback ä¸ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°ï¼Œè€Œæ˜¯å°†å®ƒè¿”å›ç»™ä½ ï¼Œè€Œ useMemo ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°å¹¶ä¸”å°†å‡½æ•°æ‰§è¡Œç»“æœè¿”å›ç»™ä½ </strong>ã€‚<br>æ‰€ä»¥ useCallback å¸¸ç”¨è®°å¿†äº‹ä»¶å‡½æ•°ï¼Œç”Ÿæˆè®°å¿†åçš„äº‹ä»¶å‡½æ•°å¹¶ä¼ é€’ç»™å­ç»„ä»¶ä½¿ç”¨ã€‚è€Œ useMemo æ›´é€‚åˆç»è¿‡å‡½æ•°è®¡ç®—å¾—åˆ°ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œæ¯”å¦‚è®°å¿†ç»„ä»¶ã€‚</p></li><li><p>3.useRef ä¿å­˜å¼•ç”¨å€¼</p><p>useRef è·Ÿ createRef ç±»ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨æ¥ç”Ÿæˆå¯¹ DOM å¯¹è±¡çš„å¼•ç”¨ã€‚useRef è¿”å›çš„å€¼ä¼ é€’ç»™ç»„ä»¶æˆ–è€… DOM çš„ ref å±æ€§ï¼Œå°±å¯ä»¥é€šè¿‡ ref.current å€¼<strong>è®¿é—®ç»„ä»¶æˆ–çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œé‡ç‚¹æ˜¯ç»„ä»¶ä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°çš„</strong>ï¼Œä»è€Œå¯ä»¥å¯¹ DOM è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ç›‘å¬äº‹ä»¶ç­‰ç­‰ã€‚</p></li><li><p>4.useImperativeHandle ç©¿é€ Ref</p><p>é€šè¿‡ useImperativeHandle ç”¨äºè®©çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…çš„ç´¢å¼•</p></li><li><p>5.useLayoutEffect åŒæ­¥æ‰§è¡Œå‰¯ä½œç”¨</p><p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½¿ç”¨ useEffect å°±å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦åŒæ­¥è°ƒç”¨ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å¯¹ DOM çš„æ“ä½œï¼Œå°±éœ€è¦ä½¿ç”¨ useLayoutEffectï¼ŒuseLayoutEffect ä¸­çš„å‰¯ä½œç”¨ä¼šåœ¨ DOM æ›´æ–°ä¹‹ååŒæ­¥æ‰§è¡Œã€‚</p><p><strong>useEffectå’ŒuseLayoutEffectæœ‰ä»€ä¹ˆåŒºåˆ«</strong>ï¼šç®€å•æ¥è¯´å°±æ˜¯è°ƒç”¨æ—¶æœºä¸åŒï¼ŒuseLayoutEffectå’ŒåŸæ¥componentDidMount&amp;componentDidUpdateä¸€è‡´ï¼Œåœ¨reactå®ŒæˆDOMæ›´æ–°åé©¬ä¸ŠåŒæ­¥è°ƒç”¨çš„ä»£ç ï¼Œä¼šé˜»å¡é¡µé¢æ¸²æŸ“ã€‚è€ŒuseEffectæ˜¯ä¼šåœ¨æ•´ä¸ªé¡µé¢æ¸²æŸ“å®Œæ‰ä¼šè°ƒç”¨çš„ä»£ç ã€‚<code>å®˜æ–¹å»ºè®®ä¼˜å…ˆä½¿ç”¨useEffect</code></p></li></ul><h3 id="React-ç»„ä»¶é€šä¿¡æ–¹å¼">React ç»„ä»¶é€šä¿¡æ–¹å¼</h3><p>reactç»„ä»¶é—´é€šä¿¡å¸¸è§çš„å‡ ç§æƒ…å†µ:</p><ul><li><ol><li>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡</li></ol></li><li><ol start="2"><li>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</li></ol></li><li><ol start="3"><li>è·¨çº§ç»„ä»¶é€šä¿¡</li></ol></li><li><ol start="4"><li>éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡</li></ol></li></ul><h4 id="1ï¼‰çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡">1ï¼‰çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡</h4><p>çˆ¶ç»„ä»¶é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’éœ€è¦çš„ä¿¡æ¯ã€‚çˆ¶ä¼ å­æ˜¯åœ¨çˆ¶ç»„ä»¶ä¸­ç›´æ¥ç»‘å®šä¸€ä¸ªæ­£å¸¸çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§å°±æ˜¯æŒ‡å…·ä½“çš„å€¼ï¼Œåœ¨å­ç»„ä»¶ä¸­ï¼Œç”¨propså°±å¯ä»¥è·å–åˆ°è¿™ä¸ªå€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶: Child</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Child</span> = props =&gt;&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;props.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ Parent</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Parent</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">name</span>=<span class="string">&quot;äº¬ç¨‹ä¸€ç¯&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2ï¼‰å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡">2ï¼‰å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</h4><p>props+å›è°ƒçš„æ–¹å¼ï¼Œä½¿ç”¨å…¬å…±ç»„ä»¶è¿›è¡ŒçŠ¶æ€æå‡ã€‚å­ä¼ çˆ¶æ˜¯å…ˆåœ¨çˆ¶ç»„ä»¶ä¸Šç»‘å®šå±æ€§è®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå½“å­ç»„ä»¶éœ€è¦ç»™çˆ¶ç»„ä»¶ä¼ å€¼çš„æ—¶å€™ï¼Œåˆ™é€šè¿‡propsè°ƒç”¨è¯¥å‡½æ•°å°†å‚æ•°ä¼ å…¥åˆ°è¯¥å‡½æ•°å½“ä¸­ï¼Œæ­¤æ—¶å°±å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­çš„å‡½æ•°ä¸­æ¥æ”¶åˆ°è¯¥å‚æ•°äº†ï¼Œè¿™ä¸ªå‚æ•°åˆ™ä¸ºå­ç»„ä»¶ä¼ è¿‡æ¥çš„å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶: Child</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Child</span> = props =&gt;&#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">cb</span> = msg =&gt;&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">()=&gt;</span>&#123;</span><br><span class="line">          props.<span class="title function_">callback</span>(msg)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;cb(</span>&quot;<span class="attr">äº¬ç¨‹ä¸€ç¯æ¬¢è¿ä½ </span>!&quot;)&#125;&gt;</span>äº¬ç¨‹ä¸€ç¯æ¬¢è¿ä½ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ Parent</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">callback</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">callback</span>=<span class="string">&#123;this.callback.bind(this)&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span>    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3ï¼‰è·¨çº§ç»„ä»¶é€šä¿¡">3ï¼‰è·¨çº§ç»„ä»¶é€šä¿¡</h4><p>å³çˆ¶ç»„ä»¶å‘å­ç»„ä»¶çš„å­ç»„ä»¶é€šä¿¡ï¼Œå‘æ›´æ·±å±‚å­ç»„ä»¶é€šä¿¡ã€‚</p><ul><li>ä½¿ç”¨propsï¼Œåˆ©ç”¨ä¸­é—´ç»„ä»¶å±‚å±‚ä¼ é€’,ä½†æ˜¯å¦‚æœçˆ¶ç»„ä»¶ç»“æ„è¾ƒæ·±ï¼Œé‚£ä¹ˆä¸­é—´æ¯ä¸€å±‚ç»„ä»¶éƒ½è¦å»ä¼ é€’propsï¼Œå¢åŠ äº†å¤æ‚åº¦ï¼Œå¹¶ä¸”è¿™äº›propså¹¶ä¸æ˜¯ä¸­é—´ç»„ä»¶è‡ªå·±éœ€è¦çš„ã€‚</li><li>ä½¿ç”¨contextï¼Œcontextç›¸å½“äºä¸€ä¸ªå¤§å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¦é€šä¿¡çš„å†…å®¹æ”¾åœ¨è¿™ä¸ªå®¹å™¨ä¸­ï¼Œè¿™æ ·ä¸ç®¡åµŒå¥—å¤šæ·±ï¼Œéƒ½å¯ä»¥éšæ„å–ç”¨ï¼Œå¯¹äºè·¨è¶Šå¤šå±‚çš„å…¨å±€æ•°æ®å¯ä»¥ä½¿ç”¨contextå®ç°ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// contextæ–¹å¼å®ç°è·¨çº§ç»„ä»¶é€šä¿¡ </span></span><br><span class="line"><span class="comment">// Context è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">BatteryContext</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å­ç»„ä»¶çš„å­ç»„ä»¶ </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandChild</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">BatteryContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;</span></span><br><span class="line"><span class="language-xml">                    color =&gt; <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span>&quot;<span class="attr">color</span>&quot;<span class="attr">:color</span>&#125;&#125;&gt;</span>æˆ‘æ˜¯çº¢è‰²çš„:&#123;color&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">BatteryContext.Consumer</span>&gt;</span></span></span><br><span class="line">        ) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Child</span> = (<span class="params"></span>) =&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">GrandChild</span>/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">          <span class="attr">color</span>:<span class="string">&quot;red&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="keyword">const</span> &#123;color&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">BatteryContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;color&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Child</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">BatteryContext.Provider</span>&gt;</span></span> </span><br><span class="line">          )</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡">4ï¼‰éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡</h4><p>å³æ²¡æœ‰ä»»ä½•åŒ…å«å…³ç³»çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬å…„å¼Ÿç»„ä»¶ä»¥åŠä¸åœ¨åŒä¸€ä¸ªçˆ¶çº§ä¸­çš„éå…„å¼Ÿç»„ä»¶ã€‚</p><ul><li><ol><li>å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡ï¼ˆå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼‰ï¼Œä½¿ç”¨pubsub-js</li></ol></li><li><ol start="2"><li>å¯ä»¥é€šè¿‡reduxç­‰è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†</li></ol></li><li><ol start="3"><li>å¦‚æœæ˜¯å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼Œå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹å…±åŒçš„çˆ¶èŠ‚ç‚¹, ç»“åˆçˆ¶å­é—´é€šä¿¡æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</li></ol></li><li><ol start="4"><li>ä¹Ÿå¯ä»¥newä¸€ä¸ª Vue çš„ EventBus,è¿›è¡Œäº‹ä»¶ç›‘å¬ï¼Œä¸€è¾¹æ‰§è¡Œç›‘å¬ï¼Œä¸€è¾¹æ‰§è¡Œæ–°å¢ VUEçš„eventBus å°±æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œæ˜¯å¯ä»¥åœ¨Reactä¸­ä½¿ç”¨çš„;</li></ol></li></ul><h3 id="setState-æ—¢å­˜åœ¨å¼‚æ­¥æƒ…å†µä¹Ÿå­˜åœ¨åŒæ­¥æƒ…å†µ">setState æ—¢å­˜åœ¨å¼‚æ­¥æƒ…å†µä¹Ÿå­˜åœ¨åŒæ­¥æƒ…å†µ</h3><p>1.å¼‚æ­¥æƒ…å†µ åœ¨<code>Reactäº‹ä»¶å½“ä¸­æ˜¯å¼‚æ­¥æ“ä½œ</code></p><p>2.åŒæ­¥æƒ…å†µ å¦‚æœæ˜¯åœ¨<code>setTimeoutäº‹ä»¶æˆ–è€…è‡ªå®šä¹‰çš„domäº‹ä»¶</code>ä¸­ï¼Œéƒ½æ˜¯åŒæ­¥çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setTimeoutäº‹ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Count</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>count:&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.btnAction&#125;</span>&gt;</span>å¢åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    btnAction = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//ä¸èƒ½ç›´æ¥ä¿®æ”¹stateï¼Œéœ€è¦é€šè¿‡setStateè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">        <span class="comment">//åŒæ­¥</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Count</span>;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰domäº‹ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>,&#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Count</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>count:&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>ç»‘å®šç‚¹å‡»äº‹ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰domäº‹ä»¶ï¼Œä¹Ÿæ˜¯åŒæ­¥ä¿®æ”¹</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Count</span>;</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bae01e6eb804d849e5bb889f787707d~tplv-k3u1fbpfcp-zoom-1.image" alt="image.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">å®‰è£…</span><br><span class="line">å½“ç»„ä»¶çš„å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥åˆ° <span class="variable constant_">DOM</span> ä¸­æ—¶ï¼Œè¿™äº›æ–¹æ³•æŒ‰ä»¥ä¸‹é¡ºåºè°ƒç”¨ï¼š</span><br><span class="line"></span><br><span class="line"><span class="title function_">constructor</span>(<span class="params"></span>)</span><br><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>()</span><br><span class="line"><span class="title function_">render</span>()</span><br><span class="line"><span class="title function_">componentDidMount</span>()</span><br><span class="line"></span><br><span class="line">æ›´æ–°ä¸­</span><br><span class="line">æ›´æ–°å¯èƒ½ç”±é“å…·æˆ–çŠ¶æ€çš„æ›´æ”¹å¼•èµ·ã€‚å½“é‡æ–°æ¸²æŸ“ç»„ä»¶æ—¶ï¼Œè¿™äº›æ–¹æ³•æŒ‰ä»¥ä¸‹é¡ºåºè°ƒç”¨ï¼š</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>()</span><br><span class="line"><span class="title function_">shouldComponentUpdate</span>()</span><br><span class="line"><span class="title function_">render</span>()</span><br><span class="line"><span class="title function_">getSnapshotBeforeUpdate</span>()</span><br><span class="line"><span class="title function_">componentDidUpdate</span>()</span><br><span class="line"></span><br><span class="line">å¸è½½</span><br><span class="line">å½“ç»„ä»¶ä» <span class="variable constant_">DOM</span> ä¸­ç§»é™¤æ—¶è°ƒç”¨æ­¤æ–¹æ³•ï¼š</span><br><span class="line"></span><br><span class="line"><span class="title function_">componentWillUnmount</span>()</span><br></pre></td></tr></table></figure><h3 id="è¯´ä¸€ä¸‹-react-fiber">è¯´ä¸€ä¸‹ react-fiber</h3><h4 id="1ï¼‰èƒŒæ™¯">1ï¼‰èƒŒæ™¯</h4><p>react-fiber äº§ç”Ÿçš„æ ¹æœ¬åŸå› ï¼Œæ˜¯<code>å¤§é‡çš„åŒæ­¥è®¡ç®—ä»»åŠ¡é˜»å¡äº†æµè§ˆå™¨çš„ UI æ¸²æŸ“</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒJS è¿ç®—ã€é¡µé¢å¸ƒå±€å’Œé¡µé¢ç»˜åˆ¶éƒ½æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨çš„ä¸»çº¿ç¨‹å½“ä¸­ï¼Œä»–ä»¬ä¹‹é—´æ˜¯äº’æ–¥çš„å…³ç³»ã€‚å¦‚æœ JS è¿ç®—æŒç»­å ç”¨ä¸»çº¿ç¨‹ï¼Œé¡µé¢å°±æ²¡æ³•å¾—åˆ°åŠæ—¶çš„æ›´æ–°ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code>setState</code>æ›´æ–°é¡µé¢çš„æ—¶å€™ï¼ŒReact ä¼šéå†åº”ç”¨çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè®¡ç®—å‡ºå·®å¼‚ï¼Œç„¶åå†æ›´æ–° UIã€‚å¦‚æœé¡µé¢å…ƒç´ å¾ˆå¤šï¼Œæ•´ä¸ªè¿‡ç¨‹å ç”¨çš„æ—¶æœºå°±å¯èƒ½è¶…è¿‡ 16 æ¯«ç§’ï¼Œå°±å®¹æ˜“å‡ºç°æ‰å¸§çš„ç°è±¡ã€‚</p><h4 id="2ï¼‰å®ç°åŸç†">2ï¼‰å®ç°åŸç†</h4><ul><li><p>reactå†…éƒ¨è¿è½¬åˆ†ä¸‰å±‚ï¼š</p><ul><li>Virtual DOM å±‚ï¼Œæè¿°é¡µé¢é•¿ä»€ä¹ˆæ ·ã€‚</li><li>Reconciler å±‚ï¼Œè´Ÿè´£è°ƒç”¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè¿›è¡Œ Diff è¿ç®—ç­‰ã€‚</li><li>Renderer å±‚ï¼Œæ ¹æ®ä¸åŒçš„å¹³å°ï¼Œæ¸²æŸ“å‡ºç›¸åº”çš„é¡µé¢ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯ ReactDOM å’Œ ReactNativeã€‚</li></ul></li></ul><p><code>Fiber å…¶å®æŒ‡çš„æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨ä¸€ä¸ªçº¯ JS å¯¹è±¡æ¥è¡¨ç¤º</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fiber = &#123;</span><br><span class="line">    stateNode,    <span class="comment">// èŠ‚ç‚¹å®ä¾‹</span></span><br><span class="line">    child,        <span class="comment">// å­èŠ‚ç‚¹</span></span><br><span class="line">    sibling,      <span class="comment">// å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span>,       <span class="comment">// çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¸ºäº†å®ç°ä¸å¡é¡¿ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªè°ƒåº¦å™¨ (Scheduler) æ¥è¿›è¡Œä»»åŠ¡åˆ†é…ã€‚ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ï¼ˆå¦‚é”®ç›˜è¾“å…¥ï¼‰å¯ä»¥æ‰“æ–­ä¼˜å…ˆçº§ä½çš„ä»»åŠ¡ï¼ˆå¦‚Diffï¼‰çš„æ‰§è¡Œï¼Œä»è€Œæ›´å¿«çš„ç”Ÿæ•ˆã€‚ä»»åŠ¡çš„ä¼˜å…ˆçº§æœ‰å…­ç§ï¼š</p><ul><li>synchronousï¼Œä¸ä¹‹å‰çš„Stack Reconcileræ“ä½œä¸€æ ·ï¼ŒåŒæ­¥æ‰§è¡Œ</li><li>taskï¼Œåœ¨next tickä¹‹å‰æ‰§è¡Œ</li><li>animationï¼Œä¸‹ä¸€å¸§ä¹‹å‰æ‰§è¡Œ</li><li>highï¼Œåœ¨ä¸ä¹…çš„å°†æ¥ç«‹å³æ‰§è¡Œ</li><li>lowï¼Œç¨å¾®å»¶è¿Ÿæ‰§è¡Œä¹Ÿæ²¡å…³ç³»</li><li>offscreenï¼Œä¸‹ä¸€æ¬¡renderæ—¶æˆ–scrollæ—¶æ‰æ‰§è¡Œ</li></ul></li><li><p>Fiber Reconcilerï¼ˆreact ï¼‰æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸º2ä¸ªé˜¶æ®µï¼š</p><ul><li>é˜¶æ®µä¸€ï¼Œç”Ÿæˆ Fiber æ ‘ï¼Œå¾—å‡ºéœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚è¿™ä¸€æ­¥æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¯ä»¥è¢«æ‰“æ–­ã€‚é˜¶æ®µä¸€å¯è¢«æ‰“æ–­çš„ç‰¹æ€§ï¼Œè®©ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡å…ˆæ‰§è¡Œï¼Œä»æ¡†æ¶å±‚é¢å¤§å¤§é™ä½äº†é¡µé¢æ‰å¸§çš„æ¦‚ç‡ã€‚</li><li>é˜¶æ®µäºŒï¼Œå°†éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¸€æ¬¡è¿‡æ‰¹é‡æ›´æ–°ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸èƒ½è¢«æ‰“æ–­ã€‚</li></ul></li><li><p>Fiberæ ‘ï¼šReact åœ¨ render ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œä¼šé€šè¿‡ React.createElement åˆ›å»ºä¸€é¢— Element æ ‘ï¼Œå¯ä»¥ç§°ä¹‹ä¸º Virtual DOM Treeï¼Œç”±äºè¦è®°å½•ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒåŠ å…¥äº† Fiberï¼Œæ¯ä¸€ä¸ª Element ä¼šå¯¹åº”ä¸€ä¸ª Fiber Nodeï¼Œå°† Fiber Node é“¾æ¥èµ·æ¥çš„ç»“æ„æˆä¸º Fiber Treeã€‚Fiber Tree ä¸€ä¸ªé‡è¦çš„ç‰¹ç‚¹æ˜¯é“¾è¡¨ç»“æ„ï¼Œå°†é€’å½’éå†ç¼–ç¨‹å¾ªç¯éå†ï¼Œç„¶åé…åˆ requestIdleCallback API, å®ç°ä»»åŠ¡æ‹†åˆ†ã€ä¸­æ–­ä¸æ¢å¤ã€‚</p></li></ul><p>ä»Stack Reconcileråˆ°Fiber Reconcilerï¼Œæºç å±‚é¢å…¶å®å°±æ˜¯å¹²äº†ä¸€ä»¶é€’å½’æ”¹å¾ªç¯çš„äº‹æƒ…</p><p>ä¼ é€é—¨ â˜<a href="https://juejin.cn/post/7002250258826657799"># æ·±å…¥äº†è§£ Fiber</a></p><h3 id="Portals">Portals</h3><p>Portals æä¾›äº†ä¸€ç§ä¸€æµçš„æ–¹å¼æ¥å°†å­ç»„ä»¶æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶çš„ DOM å±‚æ¬¡ç»“æ„ä¹‹å¤–çš„ DOM èŠ‚ç‚¹ä¸­ã€‚ç»“æ„ä¸å—å¤–ç•Œçš„æ§åˆ¶çš„æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨portalsè¿›è¡Œåˆ›å»º</p><h3 id="ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿå¦‚å’Œä½¿ç”¨å¼‚æ­¥ç»„ä»¶">ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿå¦‚å’Œä½¿ç”¨å¼‚æ­¥ç»„ä»¶</h3><ul><li>åŠ è½½å¤§ç»„ä»¶çš„æ—¶å€™</li><li>è·¯ç”±å¼‚æ­¥åŠ è½½çš„æ—¶å€™</li></ul><p>react ä¸­è¦é…åˆ Suspense ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼‚æ­¥æ‡’åŠ è½½</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Box</span> = <span class="title function_">lazy</span>(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Box&#x27;</span>));</span><br><span class="line"><span class="comment">// ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™è¦ç”¨suspenseè¿›è¡ŒåŒ…è£¹</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">    &#123;show &amp;&amp; <span class="tag">&lt;<span class="name">Box</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="React-äº‹ä»¶ç»‘å®šåŸç†">React äº‹ä»¶ç»‘å®šåŸç†</h3><p>Reactå¹¶ä¸æ˜¯å°†clickäº‹ä»¶ç»‘åœ¨è¯¥divçš„çœŸå®DOMä¸Šï¼Œè€Œæ˜¯<code>åœ¨documentå¤„ç›‘å¬æ‰€æœ‰æ”¯æŒçš„äº‹ä»¶</code>ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶å†’æ³¡è‡³documentå¤„æ—¶ï¼ŒReactå°†äº‹ä»¶å†…å®¹å°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…å‡å°‘äº†å†…å­˜æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚è½½é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚<br>å¦å¤–å†’æ³¡åˆ° document ä¸Šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯åŸç”Ÿæµè§ˆå™¨äº‹ä»¶ï¼Œè€Œæ˜¯ React è‡ªå·±å®ç°çš„åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ã€‚å› æ­¤æˆ‘ä»¬å¦‚æœä¸æƒ³è¦äº‹ä»¶å†’æ³¡çš„è¯ï¼Œè°ƒç”¨ event.stopPropagation æ˜¯æ— æ•ˆçš„ï¼Œè€Œåº”è¯¥è°ƒç”¨ <code>event.preventDefault</code>ã€‚</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2089718f74b342869de15f01588f033f~tplv-k3u1fbpfcp-zoom-1.image" alt="reactäº‹ä»¶ç»‘å®šåŸç†"></p><h3 id="React-lazy-å®ç°çš„åŸç†">React.lazy() å®ç°çš„åŸç†</h3><p>Reactçš„æ‡’åŠ è½½ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">OtherComponent</span> = <span class="title class_">React</span>.<span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./OtherComponent&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">OtherComponent</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>React.lazy åŸç†</strong></p><p>ä»¥ä¸‹ React æºç åŸºäº 16.8.0 ç‰ˆæœ¬</p><p>React.lazy çš„æºç å®ç°å¦‚ä¸‹ï¼š</p><p>export function lazy&lt;T, R&gt;(ctor: () =&gt; Thenable&lt;T, R&gt;): LazyComponent<T> {<br>let lazyType = {<br>$$typeof: REACT_LAZY_TYPE,<br>_ctor: ctor,<br>// React uses these fields to store the result.<br>_status: -1,<br>_result: null,<br>};</p><p>return lazyType;<br>}<br>å¯ä»¥çœ‹åˆ°å…¶è¿”å›äº†ä¸€ä¸ª LazyComponent å¯¹è±¡ã€‚</p><p>è€Œå¯¹äº LazyComponent å¯¹è±¡çš„è§£æï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="title class_">LazyComponent</span>: &#123;</span><br><span class="line">  <span class="keyword">const</span> elementType = workInProgress.<span class="property">elementType</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">mountLazyComponent</span>(</span><br><span class="line">    current,</span><br><span class="line">    workInProgress,</span><br><span class="line">    elementType,</span><br><span class="line">    updateExpirationTime,</span><br><span class="line">    renderExpirationTime,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mountLazyComponent</span>(<span class="params"></span></span><br><span class="line"><span class="params">  _current,</span></span><br><span class="line"><span class="params">  workInProgress,</span></span><br><span class="line"><span class="params">  elementType,</span></span><br><span class="line"><span class="params">  updateExpirationTime,</span></span><br><span class="line"><span class="params">  renderExpirationTime,</span></span><br><span class="line"><span class="params"></span>) &#123; </span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">let</span> <span class="title class_">Component</span> = <span class="title function_">readLazyComponentType</span>(elementType);</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pending = 0, Resolved = 1, Rejected = 2</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> readLazyComponentType&lt;T&gt;(<span class="attr">lazyComponent</span>: <span class="title class_">LazyComponent</span>&lt;T&gt;): T &#123;</span><br><span class="line">  <span class="keyword">const</span> status = lazyComponent.<span class="property">_status</span>;</span><br><span class="line">  <span class="keyword">const</span> result = lazyComponent.<span class="property">_result</span>;</span><br><span class="line">  <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Resolved</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="title class_">Component</span>: T = result;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Component</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Rejected</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">error</span>: mixed = result;</span><br><span class="line">      <span class="keyword">throw</span> error;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="title class_">Pending</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">thenable</span>: <span class="title class_">Thenable</span>&lt;T, mixed&gt; = result;</span><br><span class="line">      <span class="keyword">throw</span> thenable;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">default</span>: &#123; <span class="comment">// lazyComponent é¦–æ¬¡è¢«æ¸²æŸ“</span></span><br><span class="line">      lazyComponent.<span class="property">_status</span> = <span class="title class_">Pending</span>;</span><br><span class="line">      <span class="keyword">const</span> ctor = lazyComponent.<span class="property">_ctor</span>;</span><br><span class="line">      <span class="keyword">const</span> thenable = <span class="title function_">ctor</span>();</span><br><span class="line">      thenable.<span class="title function_">then</span>(</span><br><span class="line">        <span class="function"><span class="params">moduleObject</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (lazyComponent.<span class="property">_status</span> === <span class="title class_">Pending</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> defaultExport = moduleObject.<span class="property">default</span>;</span><br><span class="line">            lazyComponent.<span class="property">_status</span> = <span class="title class_">Resolved</span>;</span><br><span class="line">            lazyComponent.<span class="property">_result</span> = defaultExport;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (lazyComponent.<span class="property">_status</span> === <span class="title class_">Pending</span>) &#123;</span><br><span class="line">            lazyComponent.<span class="property">_status</span> = <span class="title class_">Rejected</span>;</span><br><span class="line">            lazyComponent.<span class="property">_result</span> = error;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      );</span><br><span class="line">      <span class="comment">// Handle synchronous thenables.</span></span><br><span class="line">      <span class="keyword">switch</span> (lazyComponent.<span class="property">_status</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="title class_">Resolved</span>:</span><br><span class="line">          <span class="keyword">return</span> lazyComponent.<span class="property">_result</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="title class_">Rejected</span>:</span><br><span class="line">          <span class="keyword">throw</span> lazyComponent.<span class="property">_result</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      lazyComponent.<span class="property">_result</span> = thenable;</span><br><span class="line">      <span class="keyword">throw</span> thenable;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šå¦‚æœ readLazyComponentType å‡½æ•°å¤šæ¬¡å¤„ç†åŒä¸€ä¸ª lazyComponentï¼Œåˆ™å¯èƒ½è¿›å…¥Pendingã€Rejectedç­‰ case ä¸­ã€‚</p><p>ä»ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºæœ€åˆ React.lazy() æ‰€è¿”å›çš„ LazyComponent å¯¹è±¡ï¼Œå…¶ _status é»˜è®¤æ˜¯ -1ï¼Œæ‰€ä»¥é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œä¼šè¿›å…¥ readLazyComponentType å‡½æ•°ä¸­çš„ default çš„é€»è¾‘ï¼Œè¿™é‡Œæ‰ä¼šçœŸæ­£å¼‚æ­¥æ‰§è¡Œ import(url)æ“ä½œï¼Œç”±äºå¹¶æœªç­‰å¾…ï¼Œéšåä¼šæ£€æŸ¥æ¨¡å—æ˜¯å¦ Resolvedï¼Œå¦‚æœå·²ç»Resolvedäº†ï¼ˆå·²ç»åŠ è½½å®Œæ¯•ï¼‰åˆ™ç›´æ¥è¿”å›moduleObject.defaultï¼ˆåŠ¨æ€åŠ è½½çš„æ¨¡å—çš„é»˜è®¤å¯¼å‡ºï¼‰ï¼Œå¦åˆ™å°†é€šè¿‡ throw å°† thenable æŠ›å‡ºåˆ°ä¸Šå±‚ã€‚</p><p>ä¸ºä»€ä¹ˆè¦ throw å®ƒï¼Ÿè¿™å°±è¦æ¶‰åŠåˆ° Suspense çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹åˆ†æã€‚</p><p><strong>Suspense åŸç†</strong></p><p>ç”±äº React æ•è·å¼‚å¸¸å¹¶å¤„ç†çš„ä»£ç é€»è¾‘æ¯”è¾ƒå¤šï¼Œè¿™é‡Œå°±ä¸è´´æºç ï¼Œæ„Ÿå…´è¶£å¯ä»¥å»çœ‹ throwException ä¸­çš„é€»è¾‘ï¼Œå…¶ä¸­å°±åŒ…å«äº†å¦‚ä½•å¤„ç†æ•è·çš„å¼‚å¸¸ã€‚ç®€å•æè¿°ä¸€ä¸‹å¤„ç†è¿‡ç¨‹ï¼ŒReact æ•è·åˆ°å¼‚å¸¸ä¹‹åï¼Œä¼šåˆ¤æ–­å¼‚å¸¸æ˜¯ä¸æ˜¯ä¸€ä¸ª thenableï¼Œå¦‚æœæ˜¯åˆ™ä¼šæ‰¾åˆ° SuspenseComponent ï¼Œå¦‚æœ thenable å¤„äº pending çŠ¶æ€ï¼Œåˆ™ä¼šå°†å…¶ children éƒ½æ¸²æŸ“æˆ fallback çš„å€¼ï¼Œä¸€æ—¦ thenable è¢« resolve åˆ™ SuspenseComponent çš„å­ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡ã€‚</p><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ componentDidCatch å®ç°ä¸€ä¸ªè‡ªå·±çš„ Suspense ç»„ä»¶ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Suspense</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">promise</span>: <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidCatch</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­ err æ˜¯å¦æ˜¯ thenable</span></span><br><span class="line">    <span class="keyword">if</span> (err !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> err === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> err.<span class="property">then</span> === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">promise</span>: err &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        err.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">promise</span>: <span class="literal">null</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; fallback, children &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span><br><span class="line">    <span class="keyword">const</span> &#123; promise &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>&#123; promise ? fallback : children &#125;<span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬åˆ†æå®Œäº† React çš„æ‡’åŠ è½½åŸç†ã€‚ç®€å•æ¥è¯´ï¼ŒReactåˆ©ç”¨ React.lazyä¸import()å®ç°äº†æ¸²æŸ“æ—¶çš„åŠ¨æ€åŠ è½½ ï¼Œå¹¶åˆ©ç”¨Suspenseæ¥å¤„ç†å¼‚æ­¥åŠ è½½èµ„æºæ—¶é¡µé¢åº”è¯¥å¦‚ä½•æ˜¾ç¤ºçš„é—®é¢˜ã€‚</p><p>å‚è€ƒä¼ é€é—¨â˜ <a href="https://thoamsy.github.io/blogs/react-lazy/">React Lazy çš„å®ç°åŸç†</a></p>]]></content>
    
    
    <summary type="html">ğŸŸæœ¬æ–‡æ±‡æ€»Reactï¼Œå¯ä½œä¸ºæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://www.cameliia.top/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
</feed>
